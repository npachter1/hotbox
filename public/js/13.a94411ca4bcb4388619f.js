(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"+25R":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.vdp-datepicker__calendar {\n    left: 0px;\n}\n",""])},"5Jh3":function(t,e,a){"use strict";var i=a("AAAX");a.n(i).a},"66JU":function(t,e,a){"use strict";var i=a("TpZx");a.n(i).a},"8ft1":function(t,e,a){"use strict";var i=a("Ue7Y");a.n(i).a},AAAX:function(t,e,a){var i=a("LQqs");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},HIo7:function(t,e,a){var i=a("wssI");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},LQqs:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n#harvest_action_menu {\n   display: none;\n   position: absolute;\n   z-index: 10;\n   background-color: #ffffff;\n   border-style: solid;\n   border-width: 1px;\n   border-color: rgba(0, 0, 0, 0.05);\n}\n",""])},MP3i:function(t,e,a){"use strict";var i=a("HIo7");a.n(i).a},PQ5q:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.vdp-datepicker__calendar {\n    left: 0px;\n}\n",""])},TpZx:function(t,e,a){var i=a("hhDx");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},Ue7Y:function(t,e,a){var i=a("+25R");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},"V/iZ":function(t,e,a){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}a.d(e,"a",(function(){return l}));var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,r(e).apply(this,arguments))}var a,i,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),a=e,(i=[{key:"resource",value:function(){return"admin/grow/harvests"}},{key:"primaryKey",value:function(){return"id"}}])&&s(a.prototype,i),l&&s(a,l),e}(a("YA5Z").a)},fHa0:function(t,e,a){var i=a("PQ5q");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},hhDx:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.vdp-datepicker__calendar {\n    left: 0px;\n}\n",""])},wjan:function(t,e,a){"use strict";var i=a("fHa0");a.n(i).a},wssI:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.vdp-datepicker__calendar {\n    left: 0px;\n}\n\n",""])},x8ie:function(t,e,a){"use strict";a.r(e);var i=a("o0o1"),s=a.n(i),n=a("V/iZ"),r={props:{ids:{type:Array,default:function(){}},model:{type:String,default:"Harvest"},module:{type:String,default:"plants"},sources:{type:Array,default:null}},data:function(){return{batch:null,isLoading:!1,isDownloading:!1,newItem:{harvest_ids:this.ids,label:null,package_weights:null,package_uom:"Grams",package_date:new Date,item_id:null,patient_license_number:null},batch_ids:this.ids}},mounted:function(){this.getBatchData()},methods:{submit:function(t){var e=this;this.$validator.validateAll().then((function(t){t&&e.$swal.fire({title:"Are you sure?",text:"This will create a package from "+e.ids.length+" harvests ",type:"warning",showCancelButton:!0,confirmButtonText:"Yes"}).then((function(t){t.value&&(e.isProcessing=!0,axios.post("/api/v1/"+e.schema.meta.resource+"/createPackage",e.newItem).then((function(t){e.$announcer({status:200,data:{message:"Success"}}),t.schema&&e.$store.commit(e.module+"/setSchema",{data:t.schema,key:e.model.toLowerCase()+"Schema"}),e.$emit("refresh")})).catch((function(t){e.isProcessing=!1,e.$announcer(t.response)})))}))}))},getBatchData:function(){var t=this;this.isLoading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/batch?batch_ids="+this.batch_ids.join(",")).then((function(e){t.batch=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.$announcer(e.response),t.$emit("refresh")}))},initializeWeights:function(){var t=this;this.newItem.package_weights={},this.sources&&this.sources.forEach((function(e){t.newItem.package_weights[e.id]=0}))},setWeight:function(t,e){this.newItem.package_weights||this.initializeWeights(),this.newItem.package_weights[e]=t.srcElement.value},isMedical:function(){return this.sources[0].location.settings.is_medical}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}}},o=(a("MP3i"),a("KHd+")),l=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.schema?a("div",{staticClass:"col-12"},[a("form",{staticClass:"modal-form",attrs:{id:"createpackage"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("fieldset",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-6"},[a("label",[t._v("Package Tag #")]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.label,expression:"newItem.label"}],staticClass:"form-control",attrs:{type:"text",name:"tag"},domProps:{value:t.newItem.label},on:{input:function(e){e.target.composing||t.$set(t.newItem,"label",e.target.value)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("tag"),expression:"errors.has('tag')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("tag")))])])]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",[t._v("Product")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.item_id,expression:"newItem.item_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"item_name"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"item_id",e.target.multiple?a:a[0])}}},t._l(t.schema.form.item_id.values,(function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item_name"),expression:"errors.has('item_name')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("item_name")))])])])]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-6"},[a("label",[t._v("Date")]),t._v(" "),a("div",{staticClass:"form-group"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-date",name:"date",format:"MM/dd/yyyy","bootstrap-styling":!0,"input-class":"form-datepicker"},model:{value:t.newItem.package_date,callback:function(e){t.$set(t.newItem,"package_date",e)},expression:"newItem.package_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",[t._v("Unit of Measure")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.package_uom,expression:"newItem.package_uom"}],staticClass:"form-control",attrs:{name:"package_uom"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"package_uom",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Milligrams"}},[t._v("Milligrams")]),t._v(" "),a("option",{attrs:{value:"Grams"}},[t._v("Grams")]),t._v(" "),a("option",{attrs:{value:"Ounces"}},[t._v("Ounces")]),t._v(" "),a("option",{attrs:{value:"Kilograms"}},[t._v("Kilograms")]),t._v(" "),a("option",{attrs:{value:"Pounds"}},[t._v("Pounds")])])])]),t._v(" "),t.isMedical()?a("div",{staticClass:"col-6"},[a("label",{attrs:{for:"item-patient_license_number"}},[t._v("Patient License Number")]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.patient_license_number,expression:"newItem.patient_license_number"},{name:"validate",rawName:"v-validate"}],ref:"patient_license_numberInput",staticClass:"form-control",class:{input:!0},attrs:{id:"item-patient_license_number","aria-describedby":"addon-right addon-left",name:"patient_license_number",type:"text",placeholder:""},domProps:{value:t.newItem.patient_license_number},on:{input:function(e){e.target.composing||t.$set(t.newItem,"patient_license_number",e.target.value)}}})])]):t._e()]),t._v(" "),a("div",{staticClass:"form-row"},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.sources,(function(e,i){return a("tr",[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[a("input",{staticClass:"form-control",staticStyle:{width:"100px"},attrs:{type:"number",name:"weight",id:"weight"+i},on:{change:function(a){return t.setWeight(a,e.id)}}})])])})),0)])]),t._v(" "),t._m(1)])])]):a("div",[a("loading",{attrs:{display:!t.schema,type:"loadModal"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("Harvest Name")]),this._v(" "),e("th",[this._v("Weight Packaged")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 clearfix mt-2 text-center"},[e("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[this._v("Create Package")])])}],!1,null,null,null).exports,c={props:{ids:{type:Array,default:function(){}},model:{type:String,default:"Harvest"},module:{type:String,default:"plants"},sources:{type:Array,default:null}},data:function(){return{batch:null,isLoading:!1,isDownloading:!1,newItem:{harvest_id:this.ids,labels:null,package_weights:null,package_count:1,package_uom:"Grams",package_date:new Date,item_id:null,patient_license_number:null},batch_ids:this.ids}},mounted:function(){this.getBatchData()},methods:{submit:function(t){var e=this;this.$validator.validateAll().then((function(t){t&&e.$swal.fire({title:"Are you sure?",text:"This will create "+e.newItem.package_count+" packages from "+e.ids.length+" harvests ",type:"warning",showCancelButton:!0,confirmButtonText:"Yes"}).then((function(t){t.value&&(e.isProcessing=!0,axios.post("/api/v1/"+e.schema.meta.resource+"/createPackages",e.newItem).then((function(t){e.$announcer({status:200,data:{message:"Success"}}),t.schema&&e.$store.commit(e.module+"/setSchema",{data:t.schema,key:e.model.toLowerCase()+"Schema"}),e.$emit("refresh")})).catch((function(t){e.isProcessing=!1,e.$announcer(t.response)})))}))}))},getBatchData:function(){var t=this;this.isLoading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/batch?batch_ids="+this.batch_ids.join(",")).then((function(e){t.batch=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.$announcer(e.response),t.$emit("refresh")}))},initializeLabels:function(){this.newItem.labels=[];for(var t=0;t<this.newItem.package_count;t++)this.newItem.labels[t]=""},setLabel:function(t,e){this.newItem.labels||this.initializeLabels(),this.newItem.labels[e]=t.srcElement.value},isMedical:function(){return this.sources[0].location.settings.is_medical}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}}},d=(a("66JU"),Object(o.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.schema?a("div",{staticClass:"col-12"},[a("form",{staticClass:"modal-form",attrs:{id:"createpackages"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("fieldset",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-6"},[a("label",{attrs:{for:"item-room_id"}},[t._v("Product")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.item_id,expression:"newItem.item_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"item_id",e.target.multiple?a:a[0])}}},t._l(t.schema.form.item_id.values,(function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)])]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",[t._v("Date")]),t._v(" "),a("div",{staticClass:"form-group"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-date",name:"date",format:"MM/dd/yyyy","bootstrap-styling":!0,"input-class":"form-datepicker"},model:{value:t.newItem.package_date,callback:function(e){t.$set(t.newItem,"package_date",e)},expression:"newItem.package_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",[t._v("Unit of Measure")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.package_uom,expression:"newItem.package_uom"}],staticClass:"form-control",attrs:{name:"package_uom"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"package_uom",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Milligrams"}},[t._v("Milligrams")]),t._v(" "),a("option",{attrs:{value:"Grams"}},[t._v("Grams")]),t._v(" "),a("option",{attrs:{value:"Ounces"}},[t._v("Ounces")]),t._v(" "),a("option",{attrs:{value:"Kilograms"}},[t._v("Kilograms")]),t._v(" "),a("option",{attrs:{value:"Pounds"}},[t._v("Pounds")])])])]),t._v(" "),t.isMedical()?a("div",{staticClass:"col-6"},[a("label",{attrs:{for:"item-patient_license_number"}},[t._v("Patient License Number")]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.patient_license_number,expression:"newItem.patient_license_number"},{name:"validate",rawName:"v-validate"}],ref:"patient_license_numberInput",staticClass:"form-control",class:{input:!0},attrs:{id:"item-patient_license_number","aria-describedby":"addon-right addon-left",name:"patient_license_number",type:"text",placeholder:""},domProps:{value:t.newItem.patient_license_number},on:{input:function(e){e.target.composing||t.$set(t.newItem,"patient_license_number",e.target.value)}}})])]):t._e(),t._v(" "),a("div",{staticClass:"col-12"},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.sources,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"padding-left":"0px"}},[t._v(t._s(e.name)+"\n                        ")]),t._v(" "),a("td",{staticStyle:{padding:"20px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.package_weights,expression:"newItem.package_weights"}],staticClass:"form-control",staticStyle:{width:"100px"},attrs:{type:"number",name:"package_weight",id:"package_weight"+i},domProps:{value:t.newItem.package_weights},on:{input:function(e){e.target.composing||t.$set(t.newItem,"package_weights",e.target.value)}}})]),t._v(" "),a("td",{staticStyle:{padding:"20px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.package_count,expression:"newItem.package_count"}],staticClass:"form-control",staticStyle:{width:"100px"},attrs:{type:"number",name:"package_count",id:"package_count"+i},domProps:{value:t.newItem.package_count},on:{change:t.initializeLabels,input:function(e){e.target.composing||t.$set(t.newItem,"package_count",e.target.value)}}})])])})),0)])]),t._v(" "),t.sources?t._e():a("div",[a("span",[t._v("No Harvest Selected")])]),t._v(" "),a("div",{staticClass:"col-8"},[a("label",[t._v("Package Tag # (s)")]),t._v(" "),t._l(1*t.newItem.package_count,(function(e){return a("div",{staticClass:"form-group"},[a("input",{staticClass:"form-control",attrs:{type:"text"},on:{change:function(a){t.setLabel(a,e-1)}}})])}))],2)]),t._v(" "),t._m(1)])])]):a("div",[a("loading",{attrs:{display:!t.schema,type:"loadModal"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("Harvest Name")]),this._v(" "),e("th",{staticStyle:{"padding-left":"20px"}},[this._v("Weight per Package")]),this._v(" "),e("th",{staticStyle:{"padding-left":"20px"}},[this._v("Count")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 clearfix mt-2 text-center"},[e("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[this._v("Create Packages")])])}],!1,null,null,null).exports),u={props:{ids:{type:Array,default:function(){}},model:{type:String,default:"Harvest"},module:{type:String,default:"plants"},sources:{type:Array,default:null}},data:function(){return{batch:null,isLoading:!1,isDownloading:!1,newItem:{harvest_ids:this.ids,waste_weights:null,waste_types:null,remove_waste_date:new Date,remove_waste_uom:"Grams"},batch_ids:this.ids}},mounted:function(){this.getBatchData()},methods:{submit:function(t){var e=this;this.$validator.validateAll().then((function(t){t&&e.$swal.fire({title:"Are you sure?",text:"This will remove waste from "+e.ids.length+" harvests ",type:"warning",showCancelButton:!0,confirmButtonText:"Yes"}).then((function(t){t.value&&(e.isProcessing=!0,axios.post("/api/v1/"+e.schema.meta.resource+"/removeWaste",e.newItem).then((function(t){e.$announcer({status:200,data:{message:"Success"}}),t.schema&&e.$store.commit(e.module+"/setSchema",{data:t.schema,key:e.model.toLowerCase()+"Schema"}),e.$emit("refresh")})).catch((function(t){e.isProcessing=!1,e.$announcer(t.response)})))}))}))},getBatchData:function(){var t=this;this.isLoading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/batch?batch_ids="+this.batch_ids.join(",")).then((function(e){t.batch=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.$announcer(e.response),t.$emit("refresh")}))},initializeWeights:function(){var t=this;this.newItem.waste_weights={},this.sources&&this.sources.forEach((function(e){t.newItem.waste_weights[e.id]=0}))},setWeight:function(t,e){this.newItem.waste_weights||this.initializeWeights(),this.newItem.waste_weights[e]=t.srcElement.value},initializeWasteTypes:function(){var t=this;this.newItem.waste_types={},this.actionItems&&this.actionItems.forEach((function(e){t.newItem.waste_types[e.id]=0}))},setWasteType:function(t,e){this.newItem.waste_types||this.initializeWasteTypes(),this.newItem.waste_types[e]=t.srcElement.value}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}}},m=(a("8ft1"),Object(o.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.schema?a("div",{staticClass:"col-12"},[a("form",{staticClass:"modal-form",attrs:{id:"removewasteform"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("fieldset",[a("h5",{staticClass:"mb-0"},[t._v("Remove Waste from "+t._s(t.ids.length)+" "+t._s(t._f("pluralize")("Harvest",t.ids.length)))]),a("br"),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-6"},[a("label",[t._v("Date")]),t._v(" "),a("div",{staticClass:"form-group"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-date",name:"date",format:"MM/dd/yyyy","bootstrap-styling":!0,"input-class":"form-datepicker"},model:{value:t.newItem.remove_waste_date,callback:function(e){t.$set(t.newItem,"remove_waste_date",e)},expression:"newItem.remove_waste_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",[t._v("Unit of Measure")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.remove_waste_uom,expression:"newItem.remove_waste_uom"}],staticClass:"form-control",attrs:{name:"waste_uom"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"remove_waste_uom",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"Grams"}},[t._v("g")]),t._v(" "),a("option",{attrs:{value:"Ounces"}},[t._v("oz")])])])]),t._v(" "),a("div",{staticClass:"col-12"},[a("table",{staticClass:"table"},[t._m(0),t._v(" "),a("tbody",t._l(t.sources,(function(e,i){return a("tr",{key:i},[a("td",{staticStyle:{"padding-left":"0px"}},[t._v(t._s(e.name)+"\n                        ")]),t._v(" "),a("td",{staticStyle:{padding:"20px"}},[a("input",{staticClass:"form-control",staticStyle:{width:"75px"},attrs:{type:"text",name:"waste_weight",id:"waste_weight"+i},on:{change:function(a){return t.setWeight(a,e.id)}}})]),t._v(" "),a("td",{staticStyle:{padding:"20px"}},[a("input",{staticClass:"form-control",staticStyle:{width:"150px"},attrs:{type:"text",name:"waste_type",id:"waste_type"+i},on:{change:function(a){return t.setWasteType(a,e.id)}}})])])})),0)])]),t._v(" "),t.sources?t._e():a("div",[a("span",[t._v("No Harvests Selected")])])]),t._v(" "),t._m(1)])])]):a("div",[a("loading",{attrs:{display:!t.schema,type:"loadModal"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("Harvest Name")]),this._v(" "),e("th",{staticStyle:{"padding-left":"20px"}},[this._v("Waste Weight")]),this._v(" "),e("th",{staticStyle:{"padding-left":"20px"}},[this._v("Waste Type")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 clearfix mt-2 text-center"},[e("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[this._v("Remove Waste")])])}],!1,null,null,null).exports),h={props:{ids:{type:Array,default:function(){}},model:{type:String,default:"Harvest"},module:{type:String,default:"plants"},sources:{type:Array,default:null}},data:function(){return{batch:null,isLoading:!1,isDownloading:!1,newItem:{harvest_ids:this.ids,finish_date:new Date},batch_ids:this.ids}},mounted:function(){this.getBatchData()},methods:{submit:function(t){var e=this;this.$validator.validateAll().then((function(t){t&&e.$swal.fire({title:"Are you sure?",text:"This will finish "+e.ids.length+" harvests ",type:"warning",showCancelButton:!0,confirmButtonText:"Yes"}).then((function(t){t.value&&(e.isProcessing=!0,axios.post("/api/v1/"+e.schema.meta.resource+"/finish",e.newItem).then((function(t){e.$announcer({status:200,data:{message:"Success"}}),t.schema&&e.$store.commit(e.module+"/setSchema",{data:t.schema,key:e.model.toLowerCase()+"Schema"}),e.$emit("refresh")})).catch((function(t){e.isProcessing=!1,e.$announcer(t.response)})))}))}))},getBatchData:function(){var t=this;this.isLoading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/batch?batch_ids="+this.batch_ids.join(",")).then((function(e){t.batch=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.$announcer(e.response),t.$emit("refresh")}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}}},v=(a("wjan"),Object(o.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.schema?a("div",{staticClass:"col-12"},[a("form",{staticClass:"modal-form",attrs:{id:"finishharvest"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("fieldset",[a("h5",{staticClass:"mb-0"},[t._v("Finish "+t._s(t.ids.length)+" "+t._s(t._f("pluralize")("Harvest",t.ids.length)))]),a("br"),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-6"},[a("label",[t._v("Finish Date")]),t._v(" "),a("div",{staticClass:"form-group"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-finish_date",name:"finish_date",format:"MM/dd/yyyy","bootstrap-styling":!0,"input-class":"form-datepicker"},model:{value:t.newItem.finish_date,callback:function(e){t.$set(t.newItem,"finish_date",e)},expression:"newItem.finish_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-12"},[a("label",[t._v("Harvests Selected")]),t._v(" "),t._l(t.sources,(function(e){return a("div",[t._v("\n                    "+t._s(e.name)+"\n                ")])})),t._v(" "),t.sources?t._e():a("div",[a("span",[t._v("No Harvests Selected")])])],2)]),t._v(" "),t._m(0)])])]):a("div",[a("loading",{attrs:{display:!t.schema,type:"loadModal"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 clearfix mt-2 text-center"},[e("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[this._v("Finish Harvests")])])}],!1,null,null,null).exports),f={props:{ids:{type:Array,default:function(){}},model:{type:String,default:"Harvest"},module:{type:String,default:"plants"},sources:{type:Array,default:null}},data:function(){return{batch:null,isLoading:!1,isDownloading:!1,newItem:{harvest_ids:this.ids},batch_ids:this.ids}},mounted:function(){this.getBatchData()},methods:{submit:function(t){var e=this;this.$validator.validateAll().then((function(t){t&&e.$swal.fire({title:"Are you sure?",text:"This will unfinish "+e.ids.length+" harvests ",type:"warning",showCancelButton:!0,confirmButtonText:"Yes"}).then((function(t){t.value&&(e.isProcessing=!0,axios.post("/api/v1/"+e.schema.meta.resource+"/unfinish",e.newItem).then((function(t){e.$announcer({status:200,data:{message:"Success"}}),t.schema&&e.$store.commit(e.module+"/setSchema",{data:t.schema,key:e.model.toLowerCase()+"Schema"}),e.$emit("refresh")})).catch((function(t){e.isProcessing=!1,e.$announcer(t.response)})))}))}))},getBatchData:function(){var t=this;this.isLoading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/batch?batch_ids="+this.batch_ids.join(",")).then((function(e){t.batch=e.data,t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1,t.$announcer(e.response),t.$emit("refresh")}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}}},p=Object(o.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.schema?a("div",{staticClass:"col-12"},[a("form",{staticClass:"modal-form",attrs:{id:"unfinishharvest"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("fieldset",[a("h5",{staticClass:"mb-0"},[t._v("Uninish "+t._s(t.ids.length)+" "+t._s(t._f("pluralize")("Harvest",t.ids.length)))]),a("br"),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-12"},[a("label",[t._v("Harvests Selected")]),t._v(" "),t._l(t.sources,(function(e){return a("div",[t._v("\n                    "+t._s(e.name)+"\n                ")])})),t._v(" "),t.sources?t._e():a("div",[a("span",[t._v("No Harvests Selected")])])],2)]),t._v(" "),t._m(0)])])]):a("div",[a("loading",{attrs:{display:!t.schema,type:"loadModal"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 clearfix mt-2 text-center"},[e("button",{staticClass:"btn btn-info",attrs:{type:"submit"}},[this._v("Unfinish Harvests")])])}],!1,null,null,null).exports;function g(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}var _,b,w={props:{id:{type:Number,default:null},model:{type:String,default:"Harvest"},module:{type:String,default:"plants"}},data:function(){return{item:null,isLoading:!1,isDownloading:!1,newItem:{material_date:new Date,material_id:null,unit_of_measurement_id:null,quantity:null}}},mounted:(_=s.a.mark((function t(){var e=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch(this.module+"/setSchemas",this.model.toLowerCase());case 2:this.isLoading=!0,this.id?n.a.find(this.id).then((function(t){e.item=new n.a(t).withDefaults(e.schema,!1),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}}),e.$emit("refresh",{},"log")})):(this.isLoading=!1,this.$announcer({status:422,data:{message:"Whoops - couldnt find the associated record - Please try again later."}}),this.$emit("refresh",{},"log"));case 4:case"end":return t.stop()}}),t,this)})),b=function(){var t=this,e=arguments;return new Promise((function(a,i){var s=_.apply(t,e);function n(t){g(s,a,i,n,r,"next",t)}function r(t){g(s,a,i,n,r,"throw",t)}n(void 0)}))},function(){return b.apply(this,arguments)}),methods:{},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}}},y=Object(o.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.item&&t.schema?a("div",{staticClass:"col-12"},[t.item.id?a("h3",{staticClass:"mb-0"},[t._v(t._s(t.item.name))]):t._e(),t._v(" "),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"item-material_date"}},[t._v("Date")]),t._v(" "),a("div",{staticClass:"form-group"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-material_date",name:"material_date","bootstrap-styling":!0,"input-class":"form-datepicker"},model:{value:t.newItem.material_date,callback:function(e){t.$set(t.newItem,"material_date",e)},expression:"newItem.material_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"item-material"}},[t._v("Material")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.material_id,expression:"newItem.material_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-material",name:"material_id"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"material_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select a Material")]),t._v(" "),t._l(t.materials,(function(e){return a("option",{domProps:{value:e.id}},[t._v("\n                            "+t._s(e.description)+"\n                        ")])}))],2),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("material_id"),expression:"errors.has('material_id')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("material_id")))])])]),t._v(" "),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"item-uom"}},[t._v("UoM")]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.unitOfMeasurement,expression:"unitOfMeasurement"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-uom",type:"text",name:"unit_of_measurement",disabled:"disabled"},domProps:{value:t.unitOfMeasurement},on:{input:function(e){e.target.composing||(t.unitOfMeasurement=e.target.value)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("unit_of_measurement"),expression:"errors.has('unit_of_measurement')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("unit_of_measurement")))])])]),t._v(" "),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"item-quantity"}},[t._v("Quantity")]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.quantity,expression:"newItem.quantity"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-quantity",type:"number",name:"quantity"},domProps:{value:t.newItem.quantity},on:{input:function(e){e.target.composing||t.$set(t.newItem,"quantity",e.target.value)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("quantity"),expression:"errors.has('quantity')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("quantity")))])])])]):a("div",[a("loading",{attrs:{display:!t.schema||!t.item,type:"loadModal"}})],1)}),[],!1,null,null,null).exports;function M(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}var C={props:{id:{type:Number,default:null},model:{type:String,default:"Harvest"},module:{type:String,default:"plants"}},data:function(){return{item:null,isLoading:!1,isDownloading:!1,newItem:{start_date:new Date,end_date:new Date,activity_id:null,unit_of_measurement:null,quantity:null}}},mounted:function(){var t=function(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function r(t){M(n,i,s,r,o,"next",t)}function o(t){M(n,i,s,r,o,"throw",t)}r(void 0)}))}}(s.a.mark((function t(){var e=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch(this.module+"/setSchemas",this.model.toLowerCase());case 2:this.isLoading=!0,this.id?n.a.find(this.id).then((function(t){e.item=new n.a(t).withDefaults(e.schema,!1),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}}),e.$emit("refresh",{},"log")})):(this.isLoading=!1,this.$announcer({status:422,data:{message:"Whoops - couldnt find the associated record - Please try again later."}}),this.$emit("refresh",{},"log"));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),methods:{},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}}},k=Object(o.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.item&&t.schema?a("div",{staticClass:"col-12"},[t.item.id?a("h3",{staticClass:"mb-0"},[t._v(t._s(t.item.name))]):t._e(),t._v(" "),a("div",{staticClass:"col-6"},[a("label",{attrs:{for:"item-start_date"}},[t._v("Start Date")]),t._v(" "),a("div",{staticClass:"form-group"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-start_date",name:"activity_date","bootstrap-styling":!0,"input-class":"form-datepicker"},model:{value:t.newItem.start_date,callback:function(e){t.$set(t.newItem,"start_date",e)},expression:"newItem.start_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",{attrs:{for:"item-end_date"}},[t._v("End Date")]),t._v(" "),a("div",{staticClass:"form-group"},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-end_date",name:"activity_date","bootstrap-styling":!0,"input-class":"form-datepicker"},model:{value:t.newItem.end_date,callback:function(e){t.$set(t.newItem,"end_date",e)},expression:"newItem.end_date"}})],1)]),t._v(" "),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"item-material"}},[t._v("Activity")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.activity_id,expression:"newItem.activity_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-material",name:"material_id"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"activity_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select an Activity")]),t._v(" "),t._l(t.activities,(function(e){return a("option",{domProps:{value:e.id}},[t._v("\n                            "+t._s(e.description)+"\n                        ")])}))],2),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("activity_id"),expression:"errors.has('activity_id')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("activity_id")))])])]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",{attrs:{for:"item-quantity"}},[t._v("Quantity")]),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newItem.quantity,expression:"newItem.quantity"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-quantity",type:"number",name:"quantity"},domProps:{value:t.newItem.quantity},on:{input:function(e){e.target.composing||t.$set(t.newItem,"quantity",e.target.value)}}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("quantity"),expression:"errors.has('quantity')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("quantity")))])])]),t._v(" "),a("div",{staticClass:"col-6"},[a("label",{attrs:{for:"item-unit-of-measurement"}},[t._v("Hour/Min")]),t._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.newItem.unit_of_measurement,expression:"newItem.unit_of_measurement"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-unit-of-measurement",name:"unit_of_measurement"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newItem,"unit_of_measurement",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:""}},[t._v("Select a Unit Of Measure")]),t._v(" "),a("option",{attrs:{value:"H",selected:""}},[t._v("Hours")]),t._v(" "),a("option",{attrs:{value:"Min"}},[t._v("Minutes")])])])])]):a("div",[a("loading",{attrs:{display:!t.schema||!t.item,type:"loadModal"}})],1)}),[],!1,null,null,null).exports,x=a("LvDl"),I=a.n(x);function E(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function P(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(t,e,a,i,s,n,r){try{var o=t[n](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,s)}var $,D={props:{module:{type:String,default:"plants"},model:{type:String,default:"harvest"},filters:{type:Object,default:function(){}}},data:function(){return{isLoading:!1,isDownloading:!1,shouldReload:!1,gridData:null,gridSearch:null,gridPage:1,gridColumns:null,gridFilters:null,createSinglePackageModal:!1,createMultiplePackagesModal:!1,removeWasteModal:!1,finishModal:!1,unfinishModal:!1,addMaterialModal:!1,addActivityModal:!1,batchEditFocus:"createSinglePackage",batchEditIds:[],singleEditId:[],action_menu_visibility:0,regulatoryAgent:null}},components:{CreateSinglePackageModal:l,CreateMultiplePackagesModal:d,RemoveWasteModal:m,FinishModal:v,UnfinishModal:p,AddMaterialModal:y,AddActivityModal:k},mounted:function(){var t=this;this.gridSearch=this.$store.state[this.module].search||null,this.regulatoryAgent=this.$store.getters.getAgent,this.schema&&(this.setFilters(this.$route.params.focus),this.gridColumns=this.schema.meta.fields.filter((function(e){return e.regulatory_agent===t.regulatoryAgent||!e.hasOwnProperty("regulatory_agent")})))},methods:{fetchGrid:($=function(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function r(t){S(n,i,s,r,o,"next",t)}function o(t){S(n,i,s,r,o,"throw",t)}r(void 0)}))}}(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.schema&&this.gridFilters){t.next=4;break}return t.abrupt("return",!1);case 4:if(1!=this.isLoading){t.next=6;break}return t.abrupt("return",!1);case 6:return this.isLoading=!0,t.next=9,(new n.a).setFilters(this.gridFilters.filter).params({search:this.gridSearch}).orderBy((this.gridFilters.orderDesc?"-":"")+this.gridFilters.sortBy).limit(this.gridFilters.pageLimit).page(this.gridPage).get();case 9:this.gridData=t.sent,this.isLoading=!1;case 11:case"end":return t.stop()}}),t,this)}))),function(){return $.apply(this,arguments)}),searchGrid:I.a.debounce((function(t){this.gridPage=1,this.fetchGrid()}),500),setFilters:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.schema)return!1;this.gridFilters={pageLimit:20,sortBy:Object.keys(this.schema.filters).find((function(e){return"daterange"===t.schema.filters[e].type}))||"rank",orderDesc:!1,filter:Object.assign.apply(Object,[{}].concat(P(Object.keys(this.schema.filters).map((function(t){return E({},t,["all"])}))),[this.filters]))}},renderRowBg:function(t,e){return t?this.batchEditIds.length>0?this.inSet(t.id,this.batchEditIds)?"table-success":null:this.inSet(t.id,this.singleEditId)?"table-success":null:null},rowClickHandler:function(t){this.$router.push({name:this.model.toLowerCase()+"_show",params:{id:t.id}})},confirmDelete:function(t){var e=this;this.$swal.fire({title:"Are you sure?",text:"This will Delete this "+this.model+" row.",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete row"}).then((function(a){a.value&&(e.isLoading=!0,new n.a({id:t}).delete().then((function(t){e.isLoading=!1,e.$store.dispatch(e.module+"/setSchemas",e.model.toLowerCase()),e.$announcer(t),e.fetchGrid()})).catch((function(t){e.isLoading=!1,e.$announcer(t.response)})))}))},toggleBatchAll:function(t){t.target.checked?this.batchEditIds=this.gridData.data.map((function(t){return t.id})):this.batchEditIds=[]},toggleBatchId:function(t,e){e.target.checked?-1===this.batchEditIds.indexOf(t)&&this.batchEditIds.push(t):this.batchEditIds.splice(this.batchEditIds.indexOf(t),1)},refreshFromModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"createSinglePackage";"createSinglePackage"==t?this.createSinglePackageModal=!this.createSinglePackageModal:"createMultipleackages"==t?this.createMultiplePackagesModal=!this.createMultiplePackagesModal:"removeWaste"==t?this.removeWasteModal=!this.removeWasteModal:"finish"==t?this.finishModal=!this.finishModal:"unfinish"==t?this.unfinishModal=!this.unfinishModal:"addMaterial"==t?this.addMaterialModal=!this.addMaterialModal:"addActivity"==t&&(this.addActivityModal=!this.addActivityModal),this.batchEditIds=[],this.singleEditId=[],this.shouldReload=!0,this.fetchGrid()},viewModal:function(){"createSinglePackage"==this.batchEditFocus?this.createSinglePackageModal=!this.createSinglePackageModal:"createMultiplePackages"==this.batchEditFocus?this.createMultiplePackagesModal=!this.createMultiplePackagesModal:"removeWaste"==this.batchEditFocus?this.removeWasteModal=!this.removeWasteModal:"finish"==this.batchEditFocus?this.finishModal=!this.finishModal:"unfinish"==this.batchEditFocus?this.unfinishModal=!this.unfinishModal:"addMaterial"==this.batchEditFocus?this.addMaterialModal=!this.addMaterialModal:"addActivity"==this.batchEditFocus&&(this.addActivityModal=!this.addActivityModal)},viewCreateSinglePackageModal:function(t){this.batchEditIds=[],this.singleEditId=[t],this.createSinglePackageModal=!this.createSinglePackageModal},viewRemoveWasteModal:function(t){this.batchEditIds=[],this.singleEditId=[t],this.removeWasteModal=!this.removeWasteModal},viewFinishModal:function(t){this.batchEditIds=[],this.singleEditId=[t],this.finishModal=!this.finishModal},viewUnfinishModal:function(t){this.batchEditIds=[],this.singleEditId=[t],this.unfinishModal=!this.unfinishModal},viewAddMaterialModal:function(t){this.batchEditIds=[],this.singleEditId=[t],this.addMaterialModal=!this.addMaterialModal},viewAddActivityModal:function(t){this.batchEditIds=[],this.singleEditId=[t],this.addActivityModal=!this.addActivityModal},downloadExport:function(t){var e=this;this.isDownloading=!0,axios({url:(new n.a).setFilters(this.gridFilters.filter).custom(this.schema.meta.resource+"/export/"+t).getUrl(),method:"GET",responseType:"blob"}).then((function(t){e.isDownloading=!1,e.downloadFile(t)})).catch((function(t){e.isDownloading=!1,e.$announcer(t.response)}))},getSelectedHarvest:function(){var t=this;return this.batchEditIds.length>0?this.gridData.data.find((function(e){return e.id===t.batchEditIds[0]})):this.gridData.data.find((function(e){return e.id===t.singleEditId[0]}))},getSelectedHarvests:function(){var t=this,e=[];return this.batchEditIds.forEach((function(a){e.push(t.gridData.data.find((function(t){return t.id===a})))})),this.singleEditId.forEach((function(a){e.push(t.gridData.data.find((function(t){return t.id===a})))})),e}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},columnsVisible:function(){return this.gridColumns?this.gridColumns.filter((function(t){return!0===t.toggle||!t.hasOwnProperty("toggle")})):[]},isAllInBatch:function(){return!!this.gridData&&this.batchEditIds.length==this.gridData.data.length}},watch:{gridFilters:{handler:function(t,e){this.gridPage=1,this.gridFilters&&this.fetchGrid()},deep:!0},gridPage:function(t,e){this.gridFilters&&this.fetchGrid()},schema:{handler:function(t,e){!e&&t?this.setFilters():I.a.isEqual(t.filters,e.filters)?1==this.shouldReload&&(this.fetchGrid(),this.shouldReload=!1):this.setFilters(),t&&!this.gridColumns&&(this.gridColumns=t.meta.fields)},deep:!0}}},A=(a("5Jh3"),Object(o.a)(D,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.schema?a("div",{staticClass:"col-12"},[a("form",[a("div",{staticClass:"table-filter-row"},[a("div",{staticClass:"filter-search",class:{active:t.gridSearch}},[a("div",{staticClass:"input-group"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.gridSearch,expression:"gridSearch"}],staticClass:"form-control border-left-0",attrs:{type:"text",placeholder:t.schema.lang.searchPrompt||"Search Grid"},domProps:{value:t.gridSearch},on:{input:[function(e){e.target.composing||(t.gridSearch=e.target.value)},t.searchGrid],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchGrid(e))}}})])]),t._v(" "),t.gridFilters?a("div",{staticClass:"filters"},[t.gridData?a("filter-more",{attrs:{meta:t.gridData.meta,schema:t.schema,gridFilters:t.gridFilters,columns:t.gridColumns,isDownloading:t.isDownloading},on:{"update:gridFilters":function(e){t.gridFilters=e},"update:grid-filters":function(e){t.gridFilters=e},"update:columns":function(e){t.gridColumns=e},downloadExport:t.downloadExport}}):t._e(),t._v(" "),t._l(t.schema.filters,(function(e,i){return"wherein"==e.type?a("filter-in",{key:i,attrs:{schema:e,filter:t.gridFilters.filter[i]},on:{update:function(e){t.gridFilters.filter[i]=e}}}):t._e()})),t._v(" "),t._l(t.schema.filters,(function(e,i){return"daterange"==e.type?a("filter-date",{key:i,attrs:{schema:e,filter:t.gridFilters.filter[i]},on:{update:function(e){t.gridFilters.filter[i]=e}}}):t._e()}))],2):t._e()])]),t._v(" "),a("loading",{attrs:{display:t.isLoading,type:"loadGrid"}}),t._v(" "),a("transition",{attrs:{name:"bo-slide"}},[t.schema&&t.gridFilters?a("b-table",{attrs:{striped:"",hover:"",id:t.model.toLowerCase()+"_table","primary-key":"id",items:t.gridData?t.gridData.data:[],fields:t.columnsVisible,busy:t.isLoading,"show-empty":!0,"sort-by":t.gridFilters.sortBy,"sort-desc":t.gridFilters.orderDesc,"no-local-sorting":!0,"no-local-filtering":!0,"per-page":0,tbodyTrClass:t.renderRowBg,responsive:"md",stacked:"sm"},on:{"update:busy":function(e){t.isLoading=e},"update:sortBy":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.gridFilters,"orderDesc",e)},"update:sort-desc":function(e){return t.$set(t.gridFilters,"orderDesc",e)}},scopedSlots:t._u([t._l(t.schema.meta.fields,(function(e,i){return{key:"head(field.key)",fn:function(i){return[a("em",[e.icon?a("i",{class:e.icon}):t._e(),t._v(" "),e.description?a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.description,expression:"field.description",modifiers:{hover:!0}}],staticClass:"hotbox-icon hotbox-icon-c-question",attrs:{title:e.name}}):t._e(),t._v(" "),"batch_ids"==e.key?a("span",[a("label",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:t.isAllInBatch},on:{click:t.toggleBatchAll}}),a("span",{staticClass:"custom-control-indicator"})])]):a("span",[t._v(t._s(i.label))])])]}}})),{key:"cell(batch_ids)",fn:function(e){return[a("label",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",disabled:!1},domProps:{checked:t.inSet(e.item.id,t.batchEditIds)},on:{click:function(a){return t.toggleBatchId(e.item.id,a)}}}),a("span",{staticClass:"custom-control-indicator"})])]}},{key:"cell(strain_id)",fn:function(e){return[e.item.strain_id?a("span",[t._v("\n                       "+t._s(e.item.strain.name)+"\n                   ")]):a("span",[t._v("n/a")])]}},{key:"cell(drying_room_id)",fn:function(e){return[e.item.drying_room_id?a("span",[t._v("\n                       "+t._s(e.item.room.name)+"\n                   ")]):a("span",[t._v("n/a")])]}},{key:"cell(harvest_start_at)",fn:function(e){return[t._v("\n                   "+t._s(t._f("formattedLocalDate")(e.value))+"\n               ")]}},{key:"cell(finished_at)",fn:function(e){return[t._v("\n                   "+t._s(e.value?"No":"Yes")+"\n               ")]}},{key:"cell(current_weight)",fn:function(e){return[t._v("\n                   "+t._s(e.value)+" "+t._s(e.item.unit_of_weight)+"\n               ")]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"dropdown"},[a("a",{attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"ti-more-alt"})]),t._v(" "),a("div",{staticClass:"dropdown-menu tight dropdown-menu-right"},[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:t.model.toLowerCase()+"_show",params:{id:e.item.id}},tag:"a"}},[a("i",{staticClass:"hotbox-icon"}),t._v(" View Details  ")]),t._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(a){return a.preventDefault(),t.viewCreateSinglePackageModal(e.item.id)}}},[a("i",{staticClass:"hotbox-icon"}),t._v(" Create Single Package")]),t._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(a){return a.preventDefault(),t.viewRemoveWasteModal(e.item.id)}}},[a("i",{staticClass:"hotbox-icon"}),t._v(" Remove Waste")]),t._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(a){return a.preventDefault(),t.viewFinishModal(e.item.id)}}},[a("i",{staticClass:"hotbox-icon"}),t._v(" Finish")]),t._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(a){return a.preventDefault(),t.viewUnfinishModal(e.item.id)}}},[a("i",{staticClass:"hotbox-icon"}),t._v(" Unfinish")])],1)])]}},{key:"row-details",fn:function(){},proxy:!0},t.gridData?{key:"table-caption",fn:function(){return[t.gridData.data.length>0?a("div",[t.gridData.meta?a("span",[t._v("\n                           Showing "+t._s(t.gridData.meta.per_page*(t.gridPage-1)+1)+" to "+t._s(t.gridData.meta.per_page*t.gridPage<t.gridData.meta.total?t.gridData.meta.per_page*t.gridPage:t.gridData.meta.total)+" of "+t._s(t.gridData.meta.total)+" "+t._s(t.schema.lang.items?t.schema.lang.items:"Records")+"\n                       ")]):a("span",[t._v("Showing All "+t._s(t.schema.lang.items?t.schema.lang.items:"Records"))]),t._v(" "),a("div",{staticClass:"table-pager-footer"},[t.gridData.meta.total>0?a("b-pagination",{attrs:{"total-rows":t.gridData.meta.total,"per-page":t.gridData.meta.per_page,"aria-controls":"users_table"},model:{value:t.gridPage,callback:function(e){t.gridPage=e},expression:"gridPage"}}):t._e()],1)]):t._e()]},proxy:!0}:null,{key:"empty",fn:function(){return[t.isLoading?a("div",{staticClass:"h-100"},[t._v("")]):a("div",[a("img",{attrs:{src:"/images/logo.png",alt:"No Results",width:"115"}}),t._v(" "),a("h4",[t._v("Hmm, There are currently no Results.")])])]},proxy:!0}],null,!0)}):t._e()],1),t._v(" "),a("div",{staticClass:"col-12 batch-block"},[a("i",{staticClass:"batch-icon"}),t._v(" With Selected: \n           "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.batchEditFocus,expression:"batchEditFocus"}],staticClass:"batch-sel",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.batchEditFocus=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"createSinglePackage"}},[t._v("Create Single Package")]),t._v(" "),1==t.batchEditIds.length?a("option",{attrs:{value:"createMultiplePackages"}},[t._v("Create Multiple Packages")]):t._e(),t._v(" "),a("option",{attrs:{value:"removeWaste"}},[t._v("Remove Waste")]),t._v(" "),a("option",{attrs:{value:"finish"}},[t._v("Finish")]),t._v(" "),a("option",{attrs:{value:"unfinish"}},[t._v("Unfinish")])]),t._v(" "),a("button",{staticClass:"btn btn-sm",class:{"btn-light":t.batchEditIds.length<=0,"btn-warning":t.batchEditIds.length>0},attrs:{disabled:!(t.batchEditIds.length>0)},on:{click:function(e){return e.preventDefault(),t.viewModal()}}},[t._v("Batch It!")])]),t._v(" "),a("div",{ref:"harvest_action_menu",staticClass:"drowdown-menu",attrs:{id:"harvest_action_menu"}},[a("a",{staticClass:"dropdown-item",on:{click:function(e){t.createSinglePackageModal=!t.createSinglePackageModal}}},[t._v("Create Single Package")]),t._v(" "),1==this.batchEditIds.length?a("a",{staticClass:"dropdown-item",on:{click:function(e){t.createMultiplePackagesModal=!t.createMultiplePackagesModal}}},[t._v("Create Multiple Packages")]):t._e(),t._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(e){t.removeWasteModal=!t.removeWasteModal}}},[t._v("Remove Waste")]),t._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(e){t.finishModal=!t.finishModal}}},[t._v("Finish")]),t._v(" "),a("a",{staticClass:"dropdown-item",on:{click:function(e){t.unfinishModal=!t.unfinishModal}}},[t._v("Unfinish")])]),t._v(" "),a("b-modal",{ref:"createSinglePackageModal",attrs:{centered:"",size:"md","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.createSinglePackageModal,callback:function(e){t.createSinglePackageModal=e},expression:"createSinglePackageModal"}},[a("template",{slot:"modal-header"},[a("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.createSinglePackageModal=!t.createSinglePackageModal,t.singleEditId=[]}}}),t._v(" "),a("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Create Package")])]),t._v(" "),t.createSinglePackageModal?a("create-single-package-modal",{attrs:{focus:t.batchEditFocus,ids:1==t.singleEditId.length?t.singleEditId:t.batchEditIds,schema:t.schema,sources:t.getSelectedHarvests()},on:{"update:ids":function(e){return t.$set(t.singleEditId,"length == 1 ? singleEditId : batchEditIds",e)},refresh:function(e){return t.refreshFromModal("createSinglePackage")}}}):t._e(),t._v(" "),a("template",{slot:"modal-footer"},[a("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.createSinglePackageModal=!t.createSinglePackageModal,t.singleEditId=[]}}},[t._v("Close")])])],2),t._v(" "),a("b-modal",{ref:"createMultiplePackagesModal",attrs:{centered:"",size:"md","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.createMultiplePackagesModal,callback:function(e){t.createMultiplePackagesModal=e},expression:"createMultiplePackagesModal"}},[a("template",{slot:"modal-header"},[a("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.createMultiplePackagesModal=!t.createMultiplePackagesModal,t.singleEditId=[]}}}),t._v(" "),a("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Create Packages")])]),t._v(" "),t.createMultiplePackagesModal?a("create-multiple-packages-modal",{attrs:{focus:t.batchEditFocus,ids:1==t.singleEditId.length?t.singleEditId:t.batchEditIds,schema:t.schema,sources:t.getSelectedHarvests()},on:{"update:ids":function(e){return t.$set(t.singleEditId,"length == 1 ? singleEditId : batchEditIds",e)},refresh:function(e){return t.refreshFromModal("createMultipleackages")}}}):t._e(),t._v(" "),a("template",{slot:"modal-footer"},[a("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.createMultiplePackagesModal=!t.createMultiplePackagesModal,t.singleEditId=[]}}},[t._v("Close")])])],2),t._v(" "),a("b-modal",{ref:"removeWasteModal",attrs:{centered:"",size:"md","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.removeWasteModal,callback:function(e){t.removeWasteModal=e},expression:"removeWasteModal"}},[a("template",{slot:"modal-header"},[a("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.removeWasteModal=!t.removeWasteModal,t.singleEditId=[]}}}),t._v(" "),a("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Remove Waste")])]),t._v(" "),t.removeWasteModal?a("remove-waste-modal",{attrs:{focus:t.batchEditFocus,ids:1==t.singleEditId.length?t.singleEditId:t.batchEditIds,schema:t.schema,sources:t.getSelectedHarvests()},on:{"update:ids":function(e){return t.$set(t.singleEditId,"length == 1 ? singleEditId : batchEditIds",e)},refresh:function(e){return t.refreshFromModal("removeWaste")}}}):t._e(),t._v(" "),a("template",{slot:"modal-footer"},[a("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.removeWasteModal=!t.removeWasteModal,t.singleEditId=[]}}},[t._v("Close")])])],2),t._v(" "),a("b-modal",{ref:"finishModal",attrs:{centered:"",size:"md","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.finishModal,callback:function(e){t.finishModal=e},expression:"finishModal"}},[a("template",{slot:"modal-header"},[a("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.finishModal=!t.finishModal,t.singleEditId=[]}}}),t._v(" "),a("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Finish")])]),t._v(" "),t.finishModal?a("finish-modal",{attrs:{focus:t.batchEditFocus,ids:1==t.singleEditId.length?t.singleEditId:t.batchEditIds,schema:t.schema,sources:t.getSelectedHarvests()},on:{"update:ids":function(e){return t.$set(t.singleEditId,"length == 1 ? singleEditId : batchEditIds",e)},refresh:function(e){return t.refreshFromModal("finish")}}}):t._e(),t._v(" "),a("template",{slot:"modal-footer"},[a("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.finishModal=!t.finishModal,t.singleEditId=[]}}},[t._v("Close")])])],2),t._v(" "),a("b-modal",{ref:"unfinishModal",attrs:{centered:"",size:"md","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.unfinishModal,callback:function(e){t.unfinishModal=e},expression:"unfinishModal"}},[a("template",{slot:"modal-header"},[a("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.unfinishModal=!t.unfinishModal,t.singleEditId=[]}}}),t._v(" "),a("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Unfinish")])]),t._v(" "),t.unfinishModal?a("unfinish-modal",{attrs:{focus:t.batchEditFocus,ids:1==t.singleEditId.length?t.singleEditId:t.batchEditIds,schema:t.schema,sources:t.getSelectedHarvests()},on:{"update:ids":function(e){return t.$set(t.singleEditId,"length == 1 ? singleEditId : batchEditIds",e)},refresh:function(e){return t.refreshFromModal("unfinish")}}}):t._e(),t._v(" "),a("template",{slot:"modal-footer"},[a("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.unfinishModal=!t.unfinishModal,t.singleEditId=[]}}},[t._v("Close")])])],2),t._v(" "),a("b-modal",{ref:"addMaterialModal",attrs:{centered:"",size:"md","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.addMaterialModal,callback:function(e){t.addMaterialModal=e},expression:"addMaterialModal"}},[a("template",{slot:"modal-header"},[a("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.addMaterialModal=!t.addMaterialModal,t.singleEditId=[]}}}),t._v(" "),a("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Add Materials")])]),t._v(" "),t.addMaterialModal?a("add-material-modal",{attrs:{id:t.batchEditIds[0],schema:t.schema},on:{refresh:function(e){t.addMaterialModal=!t.addMaterialModal}}}):t._e(),t._v(" "),a("template",{slot:"modal-footer"},[a("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.addMaterialModal=!t.addMaterialModal,t.singleEditId=[]}}},[t._v("Close")])])],2),t._v(" "),a("b-modal",{ref:"addActivityModal",attrs:{centered:"",size:"md","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.addActivityModal,callback:function(e){t.addActivityModal=e},expression:"addActivityModal"}},[a("template",{slot:"modal-header"},[a("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.addActivityModal=!t.addActivityModal,t.singleEditId=[]}}}),t._v(" "),a("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Add Activity")])]),t._v(" "),t.addActivityModal?a("add-activity-modal",{attrs:{id:t.batchEditIds[0],schema:t.schema},on:{refresh:function(e){t.addActivityModal=!t.addActivityModal}}}):t._e(),t._v(" "),a("template",{slot:"modal-footer"},[a("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.addActivityModal=!t.addActivityModal,t.singleEditId=[]}}},[t._v("Close")])])],2)],1):a("div",[a("loading",{attrs:{display:!t.schema,type:"loadPage"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("i",{staticClass:"hotbox-icon hotbox-icon-search-2"})])}],!1,null,null,null));e.default=A.exports}}]);