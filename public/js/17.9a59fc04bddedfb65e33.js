(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"+V9g":function(t,e,i){var a=i("EZ3F");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,n);a.locals&&(t.exports=a.locals)},"0x1k":function(t,e,i){"use strict";var a=i("+V9g");i.n(a).a},C73q:function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",(function(){return l}));var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,s(e).apply(this,arguments))}var i,a,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),i=e,(a=[{key:"resource",value:function(){return"admin/grow/transfers"}},{key:"primaryKey",value:function(){return"id"}}])&&n(i.prototype,a),l&&n(i,l),e}(i("YA5Z").a)},EZ3F:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,"\n[data-v-3082953d] .grid-table > tbody > tr > td:last-of-type {\n    width: 1%;\n    white-space: nowrap;\n}\n",""])},Xprl:function(t,e,i){"use strict";var a=i("oRXJ");i.n(a).a},awfZ:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,"\n#page-wrap[data-v-b8d415a8] { width: 800px; margin: 0 auto;\n}\ntable[data-v-b8d415a8] { border-collapse: collapse;\n}\ntable td[data-v-b8d415a8], table th[data-v-b8d415a8] { border: 1px solid black; padding: 5px;\n}\n#header[data-v-b8d415a8] { height: 30px; width: 100%; margin: 20px 0; background: #222; text-align: center; color: white; font: bold 15px Helvetica, Sans-Serif; -webkit-text-decoration: uppercase; text-decoration: uppercase; letter-spacing: 20px; padding: 8px 0px;\n}\n#address[data-v-b8d415a8] { width: 250px; height: 150px; float: left; font-weight: bold;}\n#address span[data-v-b8d415a8] { display:block;\n}\n#customer[data-v-b8d415a8] { overflow: hidden;\n}\n#logo[data-v-b8d415a8] { text-align: right; float: right; position: relative; margin-top: 25px; margin-bottom: 25px; border: 1px solid #fff; width: 50px;}\n#image[data-v-b8d415a8] {max-width: 100%; max-height: 100%; display: block;}\n#customer-title[data-v-b8d415a8] { font-weight: bold; float: left;\n}\n#customer-title span[data-v-b8d415a8] { display:block;\n}\n#meta[data-v-b8d415a8] { margin-top: 1px; width: 300px; float: right;\n}\n#meta td[data-v-b8d415a8] { text-align: right;\n}\n#meta td.meta-head[data-v-b8d415a8] { text-align: left; background: #eee;\n}\n#meta td div[data-v-b8d415a8] { width: 100%; height: 20px; text-align: right;\n}\n#items[data-v-b8d415a8] { clear: both; width: 100%; margin: 30px 0 0 0; border: 1px solid black;\n}\n#items th[data-v-b8d415a8] { background: #eee;\n}\n#items tr.item-row td[data-v-b8d415a8] { border: 0; vertical-align: top;\n}\n#items td.descriptor[data-v-b8d415a8] { width: 250px;\n}\n#items td.cost[data-v-b8d415a8] { text-align: right;\n}\n#items td.qty[data-v-b8d415a8] { text-align: right;\n}\n#items td.price[data-v-b8d415a8] { text-align: right;\n}\n#items td.item-name[data-v-b8d415a8] { width: 225px;\n}\n#items td.descriptor div[data-v-b8d415a8], #items td.item-name div[data-v-b8d415a8] { width: 100%;\n}\n#items td.total-line[data-v-b8d415a8] { border-right: 0; text-align: right;\n}\n#items td.total-value[data-v-b8d415a8] { border-left: 0; padding: 10px; text-align: right;}\n#items td.balance[data-v-b8d415a8] { background: #eee; text-align: right;}\n#items td.blank[data-v-b8d415a8] { border: 0;\n}\n#terms[data-v-b8d415a8] { text-align: center; margin: 20px 0 0 0;\n}\n#terms h5[data-v-b8d415a8] { text-transform: uppercase; font: 13px Helvetica, Sans-Serif; letter-spacing: 10px; border-bottom: 1px solid black; padding: 0 0 8px 0; margin: 0 0 8px 0;\n}\n#terms div[data-v-b8d415a8] { width: 100%; text-align: center;}\n\n",""])},lzmu:function(t,e,i){"use strict";i.r(e);var a=i("o0o1"),n=i.n(a),r=i("C73q"),s=i("N0hl");i("mYgU"),i("MCLT");function o(t,e,i,a,n,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(a,n)}var l,d,c={name:"TransferInvoice",props:{item:{type:Object,default:{}}},data:function(){return{location_id:null,location:null,isLoading:!1,numberToPrint:1,isDownloading:!1}},mounted:(l=n.a.mark((function t(){var e=this;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isLoading=!0,this.location_id=this.$store.state.user.location.id,axios.get("/api/v1/admin/auth/location/"+this.location_id).then((function(t){e.location=t.data,e.d=new s.Printd,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$announcer({status:500,data:{message:t.message}})}));case 3:case"end":return t.stop()}}),t,this)})),d=function(){var t=this,e=arguments;return new Promise((function(i,a){var n=l.apply(t,e);function r(t){o(n,i,a,r,s,"next",t)}function s(t){o(n,i,a,r,s,"throw",t)}r(void 0)}))},function(){return d.apply(this,arguments)}),methods:{print:function(){var t=this;this.$emit("downloadingInvoice",!0);var e={data:"<style>@media print {\n                    .pagebreak {\n                        clear: both;\n                        page-break-after: always;\n                    }\n                }\n                #page-wrap { width: 800px; margin: 0 auto; }\n\n                table { border-collapse: collapse; }\n                table td, table th { border: 1px solid black; padding: 5px; }\n\n                #header { height: 30px; width: 100%; margin: 20px 0; background: #222; text-align: center; color: white; font: bold 15px Helvetica, Sans-Serif; text-decoration: uppercase; letter-spacing: 20px; padding: 8px 0px; }\n\n                #address { width: 250px; height: 150px; float: left; font-weight: bold;}\n                #address span { display:block; }\n                #customer { overflow: hidden; }\n\n                #logo { text-align: right; float: right; position: relative; margin-top: 25px; margin-bottom: 25px; border: 1px solid #fff; width: 50px;}\n                #image {max-width: 100%; max-height: 100%; display: block;}\n\n                #customer-title { font-weight: bold; float: left; }\n                #customer-title span { display:block; }\n\n                #meta { margin-top: 1px; width: 300px; float: right; }\n                #meta td { text-align: right;  }\n                #meta td.meta-head { text-align: left; background: #eee; }\n                #meta td div { width: 100%; height: 20px; text-align: right; }\n\n                #items { clear: both; width: 100%; margin: 30px 0 0 0; border: 1px solid black; }\n                #items th { background: #eee; }\n                #items tr.item-row td { border: 0; vertical-align: top; }\n                #items td.descriptor { width: 250px; }\n                #items td.cost { text-align: right; }\n                #items td.qty { text-align: right; }\n                #items td.price { text-align: right; }\n                #items td.item-name { width: 225px; }\n                #items td.descriptor div, #items td.item-name div { width: 100%; }\n                #items td.total-line { border-right: 0; text-align: right; }\n                #items td.total-value { border-left: 0; padding: 10px; text-align: right;}\n                /* #items td.total-value div { height: 20px; background: none; text-align: right;} */\n                #items td.balance { background: #eee; text-align: right;}\n                #items td.blank { border: 0; }\n\n                #terms { text-align: center; margin: 20px 0 0 0; }\n                #terms h5 { text-transform: uppercase; font: 13px Helvetica, Sans-Serif; letter-spacing: 10px; border-bottom: 1px solid black; padding: 0 0 8px 0; margin: 0 0 8px 0; }\n                #terms div { width: 100%; text-align: center;}</style>"+document.getElementById("page-wrap").outerHTML.toString()};this.isDownloading=!0,axios({url:"/api/v1/admin/grow/transfers/"+this.item.id+"/invoice/export",method:"POST",responseType:"blob",data:e}).then((function(e){t.isDownloading=!1,t.$emit("downloadingInvoice",!1),t.downloadFile(e)})).catch((function(e){t.isDownloading=!1,t.$emit("downloadingInvoice",!1),t.$announcer({status:500,data:{message:e.message}})}))}}},u=(i("Xprl"),i("KHd+")),h=Object(u.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.location?i("div",{staticClass:"col-12"},[i("form",{staticClass:"modal-form",on:{submit:function(e){return e.preventDefault(),t.print()}}},[i("fieldset",[t.item?i("div",{staticClass:"form-group row gutters mt-3 mb-2"},[i("div",{attrs:{id:"page-wrap"}},[i("div",{attrs:{id:"header"}},[t._v("INVOICE")]),t._v(" "),i("div",{attrs:{id:"identity"}},[i("div",[t._v("Payable To")]),t._v(" "),t.location?i("div",{attrs:{id:"address"}},[i("span",[t._v(t._s(t.location.name))]),t._v(" "),t.location.address.address1?i("span",[t._v(t._s(t.location.address.address1))]):t._e(),t._v(" "),t.location.address.address2?i("span",[t._v(t._s(t.location.address.address2))]):t._e(),t._v(" "),i("span",[t._v(t._s(t.location.address.city)+", "+t._s(t.location.address.region)+" "+t._s(t.location.address.zip))]),t._v(" "),t.location.address.phone?i("span",[t._v(t._s(t.location.address.phone))]):t._e(),t._v(" "),t.location.licensenum?i("span",[t._v("License: "+t._s(t.location.licensenum))]):t._e()]):t._e()]),t._v(" "),i("div",{staticStyle:{clear:"both"}}),t._v(" "),t.item.receiver?i("div",{attrs:{id:"customer"}},[i("div",[t._v("Order From")]),t._v(" "),i("div",{attrs:{id:"customer-title"}},[i("span",[t._v(t._s(t.item.receiver.name))]),t._v(" "),t.item.receiver.address1?i("span",[t._v(t._s(t.item.receiver.address1))]):t._e(),t._v(" "),t.item.receiver.address2?i("span",[t._v(t._s(t.item.receiveraddress2))]):t._e(),t._v(" "),i("span",[t._v(t._s(t.item.receiver.city)+", "+t._s(t.item.receiver.region)+" "+t._s(t.item.receiver.zip))]),t._v(" "),t.item.receiver.phone?i("span",[t._v(t._s(t.item.receiver.phone))]):t._e()]),t._v(" "),i("table",{attrs:{id:"meta"}},[i("tr",[i("td",{staticClass:"meta-head"},[t._v("Order #")]),t._v(" "),i("td",[i("div",[t._v(t._s(t.item.manifest_number))])])]),t._v(" "),i("tr",[i("td",{staticClass:"meta-head"},[t._v("Date")]),t._v(" "),i("td",[i("div",{attrs:{id:"date"}},[t._v(t._s(t._f("formattedLocalDate")(t.item.created_at)))])])]),t._v(" "),i("tr",[i("td",{staticClass:"meta-head"},[t._v("Amount Due")]),t._v(" "),i("td",[i("div",{staticClass:"due"},[t._v("$"+t._s(t._f("dollar")(t.item.transfersale_total)))])])])])]):t._e(),t._v(" "),i("table",{attrs:{id:"items"}},[t._m(0),t._v(" "),t._l(t.item.packages,(function(e){return i("tr",{staticClass:"item-row"},[i("td",{staticClass:"item-name"},[i("div",[t._v(t._s(e.label))])]),t._v(" "),i("td",{staticClass:"descriptor"},[i("div",[t._v(t._s(e.item.name))]),i("div",[t._v(t._s(t._f("ucwords")(e.item.category_type)))])]),t._v(" "),i("td",{staticClass:"cost"},[i("div",[t._v(t._s(t._f("dollar")(e.received_price/e.quantity,4)))])]),t._v(" "),i("td",{staticClass:"qty"},[i("div",[t._v(t._s(e.quantity)+" ("+t._s(e.unit_of_measure)+")")])]),t._v(" "),i("td",{staticClass:"price"},[i("span",[t._v("$"+t._s(t._f("dollar")(e.received_price)))])])])})),t._v(" "),i("tr",[i("td",{staticClass:"blank",attrs:{colspan:"2"}}),t._v(" "),i("td",{staticClass:"total-line",attrs:{colspan:"2"}},[t._v("Subtotal")]),t._v(" "),i("td",{staticClass:"total-value"},[i("div",{attrs:{id:"subtotal"}},[t._v("$"+t._s(t._f("dollar")(t.item.transfersale_total-t.item.transfersale_fee)))])])]),t._v(" "),i("tr",[i("td",{staticClass:"blank",attrs:{colspan:"2"}}),t._v(" "),i("td",{staticClass:"total-line",attrs:{colspan:"2"}},[t._v("Service Fee")]),t._v(" "),i("td",{staticClass:"total-value"},[i("div",{attrs:{id:"subtotal"}},[t._v("$"+t._s(t._f("dollar")(t.item.transfersale_fee)))])])]),t._v(" "),i("tr",[i("td",{staticClass:"blank",attrs:{colspan:"2"}}),t._v(" "),i("td",{staticClass:"total-line",attrs:{colspan:"2"}},[t._v("Total")]),t._v(" "),i("td",{staticClass:"total-value"},[i("div",{attrs:{id:"total"}},[t._v("$"+t._s(t._f("dollar")(t.item.transfersale_total)))])])]),t._v(" "),i("tr",[i("td",{staticClass:"blank",attrs:{colspan:"2"}}),t._v(" "),i("td",{staticClass:"total-line",attrs:{colspan:"2"}},[t._v("Amount Paid")]),t._v(" "),i("td",{staticClass:"total-value"},[i("div",{attrs:{id:"paid"}},[t._v("$"+t._s(t._f("dollar")("confirmed"!==t.item.status?"0.00":t.item.transfersale_total)))])])]),t._v(" "),i("tr",[i("td",{staticClass:"blank",attrs:{colspan:"2"}}),t._v(" "),i("td",{staticClass:"total-line balance",attrs:{colspan:"2"}},[t._v("Balance Due")]),t._v(" "),i("td",{staticClass:"total-value balance"},[i("div",{staticClass:"due"},[t._v("$"+t._s(t._f("dollar")("confirmed"===t.item.status?"0.00":t.item.transfersale_total)))])])])],2),t._v(" "),t._m(1)])]):t._e(),t._v(" "),t.item?i("div",{staticClass:"col-12 text-center mb-3"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[i("span",{staticClass:"btn-label"},[i("spinner",{staticClass:"float-left",attrs:{isProcessing:t.isDownloading,isFullScreen:!1,isLine:!0,spinnerWidth:25}}),i("i",{staticClass:"hotbox-icon hotbox-icon-download-file"})],1),t._v(" "+t._s(t.isDownloading?"Downloading":"Download"))])]):t._e()])])]):i("div",[i("loading",{attrs:{display:!t.location,type:"loadModal"}})],1)}),[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("Item")]),t._v(" "),i("th",[t._v("Description")]),t._v(" "),i("th",[t._v("Unit Cost")]),t._v(" "),i("th",[t._v("Quantity")]),t._v(" "),i("th",[t._v("Price")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"terms"}},[e("h5",[this._v("Terms")]),this._v(" "),e("div",[this._v("NET 30 Days. Finance Charge of 1.5% will be made on unpaid balances after 30 days.")])])}],!1,null,"b8d415a8",null).exports,m=i("LvDl"),v=i.n(m);function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e,i,a,n,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(a,n)}var _,b={props:{module:{type:String,default:"outgoing"},model:{type:String,default:"transfer"},filters:{type:Object,default:function(){}}},data:function(){return{isLoading:!1,isDownloading:!1,shouldReload:!1,gridData:null,gridSearch:null,gridPage:1,gridColumns:null,gridFilters:null,invoiceData:null,transferInvoicePreviewModal:!1}},components:{TransferInvoice:h},mounted:function(){this.gridSearch=this.$route.query.search||null,this.regulatoryAgent=this.$store.getters.getAgent,this.schema&&(this.setFilters(this.$route.params.focus),this.gridColumns=this.schema.meta.fields),this.restoreGridSettings()},methods:{fetchGrid:(_=function(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var r=t.apply(e,i);function s(t){f(r,a,n,s,o,"next",t)}function o(t){f(r,a,n,s,o,"throw",t)}s(void 0)}))}}(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.schema&&this.gridFilters){t.next=4;break}return t.abrupt("return",!1);case 4:if(1!=this.isLoading){t.next=6;break}return t.abrupt("return",!1);case 6:return this.$store.commit(this.module+"/setSearch",{gridPage:null,gridFilters:null,options:{merge:!0}}),this.$store.commit(this.module+"/setSearch",{gridPage:this.gridPage,gridFilters:this.gridFilters,options:{merge:!0}}),this.isLoading=!0,t.next=11,(new r.a).setFilters(this.gridFilters.filter).params({search:this.gridSearch}).orderBy((this.gridFilters.orderDesc?"-":"")+this.gridFilters.sortBy).limit(this.gridFilters.pageLimit).page(this.gridPage).get();case 11:this.gridData=t.sent,this.mergeGridData(),this.isLoading=!1;case 14:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)}),searchGrid:v.a.debounce((function(t){this.gridPage=1,this.fetchGrid()}),500),setFilters:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.schema)return!1;this.gridFilters={pageLimit:20,sortBy:Object.keys(this.schema.filters).find((function(e){return"daterange"===t.schema.filters[e].type}))||"rank",orderDesc:!0,filter:Object.assign.apply(Object,[{}].concat(p(Object.keys(this.schema.filters).map((function(t){return g({},t,["all"])}))),[this.filters]))}},renderRowBg:function(t,e){return t&&"unpaid"==t.status?"table-warning":null},confirmDelete:function(t){var e=this;this.$swal.fire({title:"Are you sure?",text:"This will Cancel the transfer, and rollback any receiving requests and the package assignments.",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, Cancel Transfer"}).then((function(i){i.value&&(e.isLoading=!0,new r.a({id:t}).delete().then((function(t){e.isLoading=!1,e.$store.dispatch(e.module+"/setSchemas",e.model.toLowerCase()),e.$announcer(t),e.fetchGrid()})).catch((function(t){e.isLoading=!1,e.$announcer(t.response)})))}))},updateStatus:function(t,e){var i=this;this.isLoading=!0,axios.put("/api/v1/"+this.schema.meta.resource+"/"+t+"/modify",{id:t,status:e}).then((function(t){i.isLoading=!1,i.$store.dispatch(i.module+"/setSchemas",i.model.toLowerCase()),i.$announcer(t),i.fetchGrid()})).catch((function(t){i.isLoading=!1,i.$announcer(t.response)}))},downloadExport:function(t){var e=this;this.isDownloading=!0,axios({url:(new r.a).setFilters(this.gridFilters.filter).custom(this.schema.meta.resource+"/export/"+t).getUrl(),method:"GET",responseType:"blob"}).then((function(t){e.isDownloading=!1,e.downloadFile(t)})).catch((function(t){e.isDownloading=!1,e.$announcer(t.response)}))},downloadInvoice:function(t){var e=this;this.invoiceData=t,this.$nextTick((function(){e.$refs.invoiceMaker.print()}))},downloadingInvoice:function(t){this.isDownloading=t},openTransferInvoicePreviewModal:function(){this.transferInvoicePreviewModal=!0},transferInvoicePreviewAction:function(t){this.transferInvoicePreviewModal=!1},rowToggle:function(t){var e=this;t.item.changed?this.$swal.fire({title:"Changes Not Saved",text:"Do you want to save changes?",type:"warning",showCancelButton:!0,confirmButtonText:"Save Changes",cancelButtonText:"Discard Changes"}).then((function(i){i.value?e.$refs.editForm._save(!0):(t.item.changed=!1,t.toggleDetails())})):t.toggleDetails()},rowChange:function(t){t.item.changed=!0},rowReset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=this.gridData.data.findIndex((function(t){return t.id==e.id}));e.archived_at?this.gridData.data.splice(i,1):this.gridData.data.splice(i,1,Object.assign(this.gridData.data[i],e))}t.item.changed=!1},scrollIntoView:function(t){if(this.scrollIntoViewId&&this.scrollIntoViewId===t){var e=document.getElementById(this.model.toLowerCase()+"_table__row_"+this.scrollIntoViewId);e&&(e.scrollIntoView({behavior:"smooth",block:"start"}),this.scrollIntoViewId=null)}},restoreGridSettings:function(){var t=this.$store.state[this.module].search;t&&(t.gridSearch&&(this.gridSearch=t.gridSearch),t.gridPage&&(this.gridPage=t.gridPage),t.gridFilters&&(this.gridFilters=t.gridFilters),t.gridColumns&&(this.gridColumns=t.gridColumns))},mergeGridData:function(){var t=this;this.$store.state[this.module].search&&this.$store.state[this.module].search.gridData&&Array.isArray(this.gridData.data)&&this.$store.state[this.module].search.gridData.forEach((function(e,i){var a=t.gridData.data.findIndex((function(t){return t.id===e.id}));a>-1&&t.$set(t.gridData.data[a],"_showDetails",!0),0===i&&(t.scrollIntoViewId=e.id)}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},columnsVisible:function(){return this.gridColumns?this.gridColumns.filter((function(t){return!0===t.toggle||!t.hasOwnProperty("toggle")})):[]}},watch:{gridData:{handler:function(t,e){var i=t.data.filter((function(t){return t._showDetails})).map((function(t){return{id:t.id,_showDetails:t._showDetails}}));this.$store.commit(this.module+"/setSearch",{gridData:i,options:{merge:!0}})},deep:!0},gridColumns:{handler:function(){this.$store.commit(this.module+"/setSearch",{gridColumns:this.gridColumns,options:{merge:!0}})},deep:!0},gridSearch:function(){this.$store.commit(this.module+"/setSearch",{gridSearch:this.gridSearch,options:{merge:!0}})},gridFilters:{handler:function(t,e){this.gridPage=1,this.gridFilters&&this.fetchGrid()},deep:!0},gridPage:function(t,e){this.gridFilters&&this.fetchGrid()},schema:{handler:function(t,e){!e&&t?this.setFilters():v.a.isEqual(t.filters,e.filters)?1==this.shouldReload&&(this.fetchGrid(),this.shouldReload=!1):this.setFilters(),t&&!this.gridColumns&&(this.gridColumns=t.meta.fields)},deep:!0}}},w=(i("0x1k"),Object(u.a)(b,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.schema?i("div",{staticClass:"col-12"},[i("form",[i("div",{staticClass:"table-filter-row"},[i("div",{staticClass:"filter-search",class:{active:t.gridSearch}},[i("div",{staticClass:"input-group"},[t._m(0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.gridSearch,expression:"gridSearch"}],staticClass:"form-control border-left-0",attrs:{type:"text",placeholder:t.schema.lang.searchPrompt||"Search Grid"},domProps:{value:t.gridSearch},on:{input:[function(e){e.target.composing||(t.gridSearch=e.target.value)},t.searchGrid],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchGrid(e))}}})])]),t._v(" "),t.gridFilters?i("div",{staticClass:"filters"},[t.gridData?i("filter-more",{attrs:{meta:t.gridData.meta,schema:t.schema,gridFilters:t.gridFilters,columns:t.gridColumns,isDownloading:t.isDownloading},on:{"update:gridFilters":function(e){t.gridFilters=e},"update:grid-filters":function(e){t.gridFilters=e},"update:columns":function(e){t.gridColumns=e},downloadExport:t.downloadExport}}):t._e(),t._v(" "),t._l(t.schema.filters,(function(e,a){return"wherein"==e.type?i("filter-in",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()})),t._v(" "),t._l(t.schema.filters,(function(e,a){return"daterange"==e.type?i("filter-date",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()}))],2):t._e()])]),t._v(" "),i("loading",{attrs:{display:t.isLoading,type:"loadGrid"}}),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},[t.schema&&t.gridFilters?i("b-table",{staticClass:"grid-table",attrs:{striped:"",hover:"",id:t.model.toLowerCase()+"_table","primary-key":"id",items:t.gridData?t.gridData.data:[],fields:t.columnsVisible,busy:t.isLoading,"show-empty":!0,"sort-by":t.gridFilters.sortBy,"sort-desc":t.gridFilters.orderDesc,"no-local-sorting":!0,"no-local-filtering":!0,"per-page":0,tbodyTrClass:t.renderRowBg,"tbody-transition-props":{name:"hb-list-fade"},responsive:"md",stacked:"sm"},on:{"update:busy":function(e){t.isLoading=e},"update:sortBy":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.gridFilters,"orderDesc",e)},"update:sort-desc":function(e){return t.$set(t.gridFilters,"orderDesc",e)}},scopedSlots:t._u([t._l(t.schema.meta.fields,(function(e,a){return{key:"head(field.key)",fn:function(a){return[i("em",[e.icon?i("i",{class:e.icon}):t._e(),t._v(" "),e.description?i("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.description,expression:"field.description",modifiers:{hover:!0}}],staticClass:"hotbox-icon hotbox-icon-c-question",attrs:{title:e.name}}):t._e(),t._v(" "),i("span",[t._v(t._s(a.label))])])]}}})),{key:"cell(created_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(updated_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(received_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(manifest_number)",fn:function(e){return[t._v("\n                "+t._s(e.value)),i("br"),t._v(" "),i("span",{staticClass:"small"},[t._v(t._s(t._f("renderValue")(e.item.type,t.schema.form.type.values)))])]}},{key:"cell(receiver)",fn:function(e){return[e.item.receiver?i("span",[t._v("\n                    "+t._s(e.item.receiver.name)+" "+t._s(e.item.receiver.licensenum)),i("br"),t._v(" "),i("span",{staticClass:"small"},[t._v(t._s(e.item.receiver.city))])]):i("span",[t._v("--")])]}},{key:"cell(transporter_name)",fn:function(e){return[e.item.transporter_name?i("span",[t._v("\n                    "+t._s(e.value)),i("br"),t._v(" "),i("span",{staticClass:"small"},[t._v("Lic: "+t._s(e.item.transporter_licensenum))])]):i("span",[t._v("--")])]}},{key:"cell(packages_count)",fn:function(e){return[t._v("\n                "+t._s(e.item.packages.length||0)+"\n            ")]}},{key:"cell(status)",fn:function(e){return[i("i",{staticClass:"float-right mr-2 mt-1",class:{"ti-angle-double-down":!e.detailsShowing,"ti-angle-double-up":e.detailsShowing},on:{click:e.toggleDetails}}),t._v("\n                "+t._s(t._f("ucwords")(e.value||"confirmed"))+"\n            ")]}},{key:"cell(actions)",fn:function(e){return[i("div",{staticClass:"dropdown"},[i("a",{attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t.isDownloading&&t.invoiceData===e.item?i("spinner",{staticClass:"float-left",attrs:{isProcessing:t.isDownloading&&t.invoiceData===e.item,isFullScreen:!1,isLine:!0,spinnerWidth:25}}):i("i",{staticClass:"ti-more-alt"})],1),t._v(" "),i("div",{staticClass:"dropdown-menu tight dropdown-menu-right"},["external"==e.item.type?i("a",{staticClass:"dropdown-item action-primary",attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.downloadInvoice(e.item)}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-square-download"}),t._v(" Download Invoice")]):t._e(),t._v(" "),"unpaid"==e.item.status?i("a",{staticClass:"dropdown-item action-success",attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.updateStatus(e.item.id,"confirmed")}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-s-check"}),t._v(" Mark as Paid")]):t._e(),t._v(" "),i("a",{staticClass:"dropdown-item action-danger",attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-trash-round"}),t._v(" Delete and Unlink")])])])]}},{key:"row-details",fn:function(e){return[i("div",{staticClass:"card card-stats px-3 justify-content-center"},[i("div",{staticClass:"card-header"}),t._v(" "),i("div",{staticClass:"card-body"},[i("h5",{staticClass:"mt-2"},[t._v("Packages Manifest")]),t._v(" "),i("ul",t._l(e.item.packages,(function(e,a){return i("li",{staticClass:"d-flex justify-content-between align-items-center position-relative px-2 mb-3"},[i("div",{},[t._v("\n                                    "+t._s((e.item||{}).name||"Misc Item")),i("br"),t._v(" "),i("span",{staticClass:"small"},[i("i",{staticClass:"hotbox-icon hotbox-icon-tag-content"}),t._v(" "+t._s(e.label))])]),t._v(" "),i("div",{staticClass:"ml-auto text-right"},[t._v("\n                                    "+t._s(e.quantity)+"/"+t._s(e.unit_of_measure)),i("br"),t._v(" "),e.received_price>0?i("span",{staticClass:"small"},[t._v("$"+t._s(t._f("dollar")(e.received_price)))]):t._e()])])})),0),t._v(" "),e.item.transfersale_total>0?i("div",{staticClass:"col-12 text-right mt-1 mb-3",staticStyle:{"border-top":"1px solid #E6E6E6"}},[e.item.transfersale_fee>0?i("span",{},[t._v("Service Fee: $"+t._s(t._f("dollar")(e.item.transfersale_fee))),i("br")]):t._e(),t._v(" "),i("b",[t._v("Total Billed: $"+t._s(t._f("dollar")(e.item.transfersale_total)))])]):t._e()])])]}},t.gridData?{key:"table-caption",fn:function(){return[t.gridData.data.length>0?i("div",[t.gridData.meta?i("span",[t._v("\n                        Showing "+t._s(t.gridData.meta.per_page*(t.gridPage-1)+1)+" to "+t._s(t.gridData.meta.per_page*t.gridPage<t.gridData.meta.total?t.gridData.meta.per_page*t.gridPage:t.gridData.meta.total)+" of "+t._s(t.gridData.meta.total)+" "+t._s(t.schema.lang.items?t.schema.lang.items:"Records")+"\n                    ")]):i("span",[t._v("Showing All "+t._s(t.schema.lang.items?t.schema.lang.items:"Records"))]),t._v(" "),i("div",{staticClass:"table-pager-footer"},[t.gridData.meta.total>0?i("b-pagination",{attrs:{"total-rows":t.gridData.meta.total,"per-page":t.gridData.meta.per_page,"aria-controls":"users_table"},model:{value:t.gridPage,callback:function(e){t.gridPage=e},expression:"gridPage"}}):t._e()],1)]):t._e()]},proxy:!0}:null,{key:"empty",fn:function(){return[t.isLoading?i("div",{staticClass:"h-100"},[t._v(" ")]):i("div",[i("img",{attrs:{src:"/images/logo.png",alt:"No Results",width:"75"}}),t._v(" "),i("h4",[t._v("Hmm, There are currently no Results.")])])]},proxy:!0}],null,!0)}):t._e()],1),t._v(" "),i("b-modal",{ref:"transferInvoicePreviewModal",attrs:{centered:"",static:!0,size:"lg","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.transferInvoicePreviewModal,callback:function(e){t.transferInvoicePreviewModal=e},expression:"transferInvoicePreviewModal"}},[i("template",{slot:"modal-header"},[i("i",{staticClass:"modal-top-close fal ti-close",on:{click:t.transferInvoicePreviewAction}}),t._v(" "),i("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Invoice Preview")])]),t._v(" "),i("div",{staticClass:"justify-content-center"},[i("div",[i("TransferInvoice",{ref:"invoiceMaker",attrs:{item:t.invoiceData},on:{downloadingInvoice:function(e){return t.downloadingInvoice(e)}}})],1)]),t._v(" "),i("template",{slot:"modal-footer"},[i("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:t.transferInvoicePreviewAction}},[t._v("Close")])])],2)],1):i("div",[i("loading",{attrs:{display:!t.schema,type:"loadPage"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("i",{staticClass:"hotbox-icon hotbox-icon-search-2"})])}],!1,null,"3082953d",null));e.default=w.exports},oRXJ:function(t,e,i){var a=i("awfZ");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,n);a.locals&&(t.exports=a.locals)}}]);