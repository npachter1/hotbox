(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0BXy":function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return c}));var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,s(t).apply(this,arguments))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(t,e),n=t,(i=[{key:"resource",value:function(){return"admin/grow/items"}},{key:"primaryKey",value:function(){return"id"}}])&&a(n.prototype,i),c&&a(n,c),t}(n("YA5Z").a)},KBmp:function(e,t,n){"use strict";n.r(t);var i=n("0BXy"),a=n("LvDl"),o=n.n(a),s={props:{id:{type:[Number,String],default:0},model:{type:String,default:"Item"},module:{type:String,default:"warehouse"}},data:function(){return{item:null,isSyncing:null,itemState:"save"}},components:{},mounted:function(){var e=this;this.isLoading=!0,this.id?i.a.find(this.id).then((function(t){e.item=new i.a(t).withDefaults(e.schema),e.isLoading=!1})).catch((function(t){e.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}})})):(this.item=(new i.a).withDefaults(this.schema),this.isLoading=!1)},methods:{autoSave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===t&&!this.id)return!1;this.$validator.validateAll().then((function(n){n?t?e._save(!0):o.a.debounce((function(){e._save()}),2e3)():1==t?e.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}}):e.$validator.reset()}))},_save:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.itemState="saving..",this.item.save().then((function(n){t&&(e.$announcer({status:200,data:{message:"Your "+e.model+" data has been Saved!"}}),n.schema&&e.$store.commit(e.module+"/setSchema",{data:n.schema,key:e.model.toLowerCase()+"Schema"}),e.$router.push({name:e.model.toLowerCase()})),e.itemState="saved"})).catch((function(t){e.$announcer(t.response),e.itemState="resave"}))},syncMetrcItems:function(){var e=this;this.isSyncing=!0,axios.get("/api/v1/admin/dispensary/categories/syncMetrc").then((function(t){e.isSyncing=!1,t.data.grow_schema&&e.$store.commit(e.module+"/setSchema",{data:t.data.grow_schema,key:e.model.toLowerCase()+"Schema"}),e.$announcer(t)})).catch((function(t){e.isSyncing=!1,e.$announcer(t.response)}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}},watch:{item:{handler:function(e,t){this.itemState=t?"save changes":e.id?"save":"create"},deep:!0}}},r=n("KHd+"),c=Object(r.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.item&&e.schema?n("div",{staticClass:"col-12"},[n("form",{on:{change:function(t){return e.autoSave()}}},[n("fieldset",[n("div",{staticClass:"col-12"},[e.item.id?n("h3",{staticClass:"mb-4"},[e._v("Edit "+e._s(e.item.name))]):n("h3",[e._v("Add a new Product:")]),e._v(" "),n("div",{staticClass:"row"},e._l(e.schema.form,(function(t,i){var a;return-1!==(t.scope||[]).indexOf(e.$store.getters.getAgent)?n("div",{staticClass:"float-left",class:(a={},a[t.container?[t.container]:"col-12"]=!0,a)},[n("div",{staticClass:"form-group-list"},["boolean"==t.type?n("form-boolean",{attrs:{declared:e.item[i],schema:t},on:{input:function(t){e.item[i]=t}}}):e._e(),e._v(" "),"text"==t.type?n("form-text",{attrs:{schema:t},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e(),e._v(" "),"number"==t.type?n("form-number",{attrs:{schema:t},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e(),e._v(" "),"textarea"==t.type?n("form-textarea",{attrs:{schema:t,rows:t.rows||3},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e(),e._v(" "),"select"==t.type?n("form-select",{attrs:{schema:t,scopeData:e.item.country},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}},[n("template",{slot:"text-right"},["metrc_category_id"==t.name?n("a",{staticClass:"float-right",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.syncMetrcItems(t)}}},[n("spinner",{staticClass:"float-left",attrs:{isProcessing:e.isSyncing,isFullScreen:!1,isLine:!0,spinnerWidth:25}}),e._v(" "),e.isSyncing?e._e():n("i",{staticClass:"hotbox-icon hotbox-icon-refresh-69"}),e._v(" Sync Metrc Categories\n                                ")],1):e._e()])],2):e._e(),e._v(" "),"simpleselect"==t.type?n("form-simpleselect",{attrs:{schema:t,isDisabled:!(!e.item.id||"type"!=i)},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e(),e._v(" "),"multiselect"==t.type?n("form-multiselect",{attrs:{schema:t},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e(),e._v(" "),"datetime"==t.type?n("form-datetime",{attrs:{schema:t},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e(),e._v(" "),"image"==t.type?n("form-file",{attrs:{schema:t,type:"image",resource:e.model.toLowerCase(),view:t.view||"profile"},on:{input:function(t){e.item[i]=t}},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e(),e._v(" "),"simpleobject"==t.type?n("form-simpleobject",{attrs:{formData:e.item,schema:t},model:{value:e.item[i],callback:function(t){e.$set(e.item,i,t)},expression:"item[ele]"}}):e._e()],1)]):e._e()})),0),e._v(" "),n("div",{staticClass:"col-12 clearfix mt-3"},[n("div",{staticClass:"drsection-content"},[n("auto-save",{attrs:{type:"save",state:e.itemState},on:{autoSave:function(t){return e.autoSave(!0)}}}),e._v(" "),n("a",{staticClass:"btn btn-sm btn-light",on:{click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"default",void 0,t.key,void 0)?null:e.$router.go(-1)}}},[e._v("Return.")])],1)])])])])]):n("div",[n("loading",{attrs:{display:!e.schema||!e.item,type:"loadPage"}})],1)}),[],!1,null,null,null);t.default=c.exports}}]);