(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0dD9":function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,"/*\n * The MIT License\n * Copyright (c) 2012 Matias Meno <m@tias.me>\n */\n@-webkit-keyframes passing-through {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    transform: translateY(40px); }\n  30%, 70% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    transform: translateY(0px); }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(-40px);\n    transform: translateY(-40px); } }\n@keyframes passing-through {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    transform: translateY(40px); }\n  30%, 70% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    transform: translateY(0px); }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(-40px);\n    transform: translateY(-40px); } }\n@-webkit-keyframes slide-in {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    transform: translateY(40px); }\n  30% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    transform: translateY(0px); } }\n@keyframes slide-in {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(40px);\n    transform: translateY(40px); }\n  30% {\n    opacity: 1;\n    -webkit-transform: translateY(0px);\n    transform: translateY(0px); } }\n@-webkit-keyframes pulse {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1); }\n  10% {\n    -webkit-transform: scale(1.1);\n    transform: scale(1.1); }\n  20% {\n    -webkit-transform: scale(1);\n    transform: scale(1); } }\n@keyframes pulse {\n  0% {\n    -webkit-transform: scale(1);\n    transform: scale(1); }\n  10% {\n    -webkit-transform: scale(1.1);\n    transform: scale(1.1); }\n  20% {\n    -webkit-transform: scale(1);\n    transform: scale(1); } }\n.dropzone, .dropzone * {\n  box-sizing: border-box; }\n\n.dropzone {\n  min-height: 150px;\n  border: 2px solid rgba(0, 0, 0, 0.3);\n  background: white;\n  padding: 20px 20px; }\n  .dropzone.dz-clickable {\n    cursor: pointer; }\n    .dropzone.dz-clickable * {\n      cursor: default; }\n    .dropzone.dz-clickable .dz-message, .dropzone.dz-clickable .dz-message * {\n      cursor: pointer; }\n  .dropzone.dz-started .dz-message {\n    display: none; }\n  .dropzone.dz-drag-hover {\n    border-style: solid; }\n    .dropzone.dz-drag-hover .dz-message {\n      opacity: 0.5; }\n  .dropzone .dz-message {\n    text-align: center;\n    margin: 2em 0; }\n  .dropzone .dz-preview {\n    position: relative;\n    display: inline-block;\n    vertical-align: top;\n    margin: 16px;\n    min-height: 100px; }\n    .dropzone .dz-preview:hover {\n      z-index: 1000; }\n      .dropzone .dz-preview:hover .dz-details {\n        opacity: 1; }\n    .dropzone .dz-preview.dz-file-preview .dz-image {\n      border-radius: 20px;\n      background: #999;\n      background: -webkit-gradient(linear, left top, left bottom, from(#eee), to(#ddd));\n      background: linear-gradient(to bottom, #eee, #ddd); }\n    .dropzone .dz-preview.dz-file-preview .dz-details {\n      opacity: 1; }\n    .dropzone .dz-preview.dz-image-preview {\n      background: white; }\n      .dropzone .dz-preview.dz-image-preview .dz-details {\n        -webkit-transition: opacity 0.2s linear;\n        transition: opacity 0.2s linear; }\n    .dropzone .dz-preview .dz-remove {\n      font-size: 14px;\n      text-align: center;\n      display: block;\n      cursor: pointer;\n      border: none; }\n      .dropzone .dz-preview .dz-remove:hover {\n        text-decoration: underline; }\n    .dropzone .dz-preview:hover .dz-details {\n      opacity: 1; }\n    .dropzone .dz-preview .dz-details {\n      z-index: 20;\n      position: absolute;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      font-size: 13px;\n      min-width: 100%;\n      max-width: 100%;\n      padding: 2em 1em;\n      text-align: center;\n      color: rgba(0, 0, 0, 0.9);\n      line-height: 150%; }\n      .dropzone .dz-preview .dz-details .dz-size {\n        margin-bottom: 1em;\n        font-size: 16px; }\n      .dropzone .dz-preview .dz-details .dz-filename {\n        white-space: nowrap; }\n        .dropzone .dz-preview .dz-details .dz-filename:hover span {\n          border: 1px solid rgba(200, 200, 200, 0.8);\n          background-color: rgba(255, 255, 255, 0.8); }\n        .dropzone .dz-preview .dz-details .dz-filename:not(:hover) {\n          overflow: hidden;\n          text-overflow: ellipsis; }\n          .dropzone .dz-preview .dz-details .dz-filename:not(:hover) span {\n            border: 1px solid transparent; }\n      .dropzone .dz-preview .dz-details .dz-filename span, .dropzone .dz-preview .dz-details .dz-size span {\n        background-color: rgba(255, 255, 255, 0.4);\n        padding: 0 0.4em;\n        border-radius: 3px; }\n    .dropzone .dz-preview:hover .dz-image img {\n      -webkit-transform: scale(1.05, 1.05);\n      transform: scale(1.05, 1.05);\n      -webkit-filter: blur(8px);\n      filter: blur(8px); }\n    .dropzone .dz-preview .dz-image {\n      border-radius: 20px;\n      overflow: hidden;\n      width: 120px;\n      height: 120px;\n      position: relative;\n      display: block;\n      z-index: 10; }\n      .dropzone .dz-preview .dz-image img {\n        display: block; }\n    .dropzone .dz-preview.dz-success .dz-success-mark {\n      -webkit-animation: passing-through 3s cubic-bezier(0.77, 0, 0.175, 1);\n      animation: passing-through 3s cubic-bezier(0.77, 0, 0.175, 1); }\n    .dropzone .dz-preview.dz-error .dz-error-mark {\n      opacity: 1;\n      -webkit-animation: slide-in 3s cubic-bezier(0.77, 0, 0.175, 1);\n      animation: slide-in 3s cubic-bezier(0.77, 0, 0.175, 1); }\n    .dropzone .dz-preview .dz-success-mark, .dropzone .dz-preview .dz-error-mark {\n      pointer-events: none;\n      opacity: 0;\n      z-index: 500;\n      position: absolute;\n      display: block;\n      top: 50%;\n      left: 50%;\n      margin-left: -27px;\n      margin-top: -27px; }\n      .dropzone .dz-preview .dz-success-mark svg, .dropzone .dz-preview .dz-error-mark svg {\n        display: block;\n        width: 54px;\n        height: 54px; }\n    .dropzone .dz-preview.dz-processing .dz-progress {\n      opacity: 1;\n      -webkit-transition: all 0.2s linear;\n      transition: all 0.2s linear; }\n    .dropzone .dz-preview.dz-complete .dz-progress {\n      opacity: 0;\n      -webkit-transition: opacity 0.4s ease-in;\n      transition: opacity 0.4s ease-in; }\n    .dropzone .dz-preview:not(.dz-processing) .dz-progress {\n      -webkit-animation: pulse 6s ease infinite;\n      animation: pulse 6s ease infinite; }\n    .dropzone .dz-preview .dz-progress {\n      opacity: 1;\n      z-index: 1000;\n      pointer-events: none;\n      position: absolute;\n      height: 16px;\n      left: 50%;\n      top: 50%;\n      margin-top: -8px;\n      width: 80px;\n      margin-left: -40px;\n      background: rgba(255, 255, 255, 0.9);\n      -webkit-transform: scale(1);\n      border-radius: 8px;\n      overflow: hidden; }\n      .dropzone .dz-preview .dz-progress .dz-upload {\n        background: #333;\n        background: -webkit-gradient(linear, left top, left bottom, from(#666), to(#444));\n        background: linear-gradient(to bottom, #666, #444);\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        width: 0;\n        -webkit-transition: width 300ms ease-in-out;\n        transition: width 300ms ease-in-out; }\n    .dropzone .dz-preview.dz-error .dz-error-message {\n      display: block; }\n    .dropzone .dz-preview.dz-error:hover .dz-error-message {\n      opacity: 1;\n      pointer-events: auto; }\n    .dropzone .dz-preview .dz-error-message {\n      pointer-events: none;\n      z-index: 1000;\n      position: absolute;\n      display: block;\n      display: none;\n      opacity: 0;\n      -webkit-transition: opacity 0.3s ease;\n      transition: opacity 0.3s ease;\n      border-radius: 8px;\n      font-size: 13px;\n      top: 130px;\n      left: -10px;\n      width: 140px;\n      background: #be2626;\n      background: -webkit-gradient(linear, left top, left bottom, from(#be2626), to(#a92222));\n      background: linear-gradient(to bottom, #be2626, #a92222);\n      padding: 0.5em 1.2em;\n      color: white; }\n      .dropzone .dz-preview .dz-error-message:after {\n        content: '';\n        position: absolute;\n        top: -6px;\n        left: 64px;\n        width: 0;\n        height: 0;\n        border-left: 6px solid transparent;\n        border-right: 6px solid transparent;\n        border-bottom: 6px solid #be2626; }\n.vue-dropzone{border:2px solid #e5e5e5;font-family:Arial,sans-serif;letter-spacing:.2px;color:#777;-webkit-transition:.2s linear;transition:.2s linear}.vue-dropzone:hover{background-color:#f6f6f6}.vue-dropzone>i{color:#ccc}.vue-dropzone>.dz-preview .dz-image{border-radius:0;width:100%;height:100%}.vue-dropzone>.dz-preview .dz-image img:not([src]){width:200px;height:200px}.vue-dropzone>.dz-preview .dz-image:hover img{-webkit-transform:none;transform:none;-webkit-filter:none}.vue-dropzone>.dz-preview .dz-details{bottom:0;top:0;color:#fff;background-color:rgba(33,150,243,.8);-webkit-transition:opacity .2s linear;transition:opacity .2s linear;text-align:left}.vue-dropzone>.dz-preview .dz-details .dz-filename{overflow:hidden}.vue-dropzone>.dz-preview .dz-details .dz-filename span,.vue-dropzone>.dz-preview .dz-details .dz-size span{background-color:transparent}.vue-dropzone>.dz-preview .dz-details .dz-filename:not(:hover) span{border:none}.vue-dropzone>.dz-preview .dz-details .dz-filename:hover span{background-color:transparent;border:none}.vue-dropzone>.dz-preview .dz-progress .dz-upload{background:#ccc}.vue-dropzone>.dz-preview .dz-remove{position:absolute;z-index:30;color:#fff;margin-left:15px;padding:10px;top:inherit;bottom:15px;border:2px #fff solid;text-decoration:none;text-transform:uppercase;font-size:.8rem;font-weight:800;letter-spacing:1.1px;opacity:0}.vue-dropzone>.dz-preview:hover .dz-remove{opacity:1}.vue-dropzone>.dz-preview .dz-error-mark,.vue-dropzone>.dz-preview .dz-success-mark{margin-left:auto;margin-top:auto;width:100%;top:35%;left:0}.vue-dropzone>.dz-preview .dz-error-mark svg,.vue-dropzone>.dz-preview .dz-success-mark svg{margin-left:auto;margin-right:auto}.vue-dropzone>.dz-preview .dz-error-message{margin-left:auto;margin-right:auto;left:0;width:100%;text-align:center}.vue-dropzone>.dz-preview .dz-error-message:after{display:none}",""])},"1F9i":function(t,e,i){var a=i("JdLT");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(t.exports=a.locals)},"5pIZ":function(t,e,i){"use strict";var a=i("H9w+");i.n(a).a},"6cuc":function(t,e,i){"use strict";var a=i("1F9i");i.n(a).a},"83d4":function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",(function(){return c}));var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,r(e).apply(this,arguments))}var i,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),i=e,(a=[{key:"resource",value:function(){return"admin/auth/users"}},{key:"primaryKey",value:function(){return"id"}}])&&s(i.prototype,a),c&&s(i,c),e}(i("YA5Z").a)},A0QY:function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",(function(){return c}));var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,r(e).apply(this,arguments))}var i,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),i=e,(a=[{key:"resource",value:function(){return"admin/auth/task"}},{key:"primaryKey",value:function(){return"id"}}])&&s(i.prototype,a),c&&s(i,c),e}(i("YA5Z").a)},E6vf:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,"\n.btn-create-new {\n    margin-top: 0;\n}\n",""])},FnUm:function(t,e,i){var a=i("E6vf");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(t.exports=a.locals)},FyIX:function(t,e,i){"use strict";i.r(e);i("Hj/Q");var a=i("A0QY"),s=i("LvDl"),n=i.n(s),r={props:{id:{type:[Number,String],default:null},users:{default:null},locations:{default:null},location:{type:Object,default:null},model:{type:String,default:"Task"},module:{type:String,default:"auth"}},data:function(){return{item:{},itemState:"save",isFormDisabled:!0,isProcessing:!1}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},dropzoneOptions:function(){return{url:"/api/v1/admin/asset/task/file",thumbnailWidth:150,maxFilesize:2,headers:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content}}},route:function(){return this.id?"/api/v1/admin/auth/task/":"/api/v1/admin/auth/task/store"},isFieldDisabled:function(){return!(!this.item||!this.schema)&&(!!this.item.created_by&&this.item.created_by.id!==this.$store.state.user.id)}},watch:{item:{handler:function(t,e){this.itemState=e?"save changes":t.id?"save":"create"},deep:!0}},mounted:function(){var t=this;this.isLoading=!0,this.id?a.a.find(this.id).then((function(e){e.schema&&t.$store.commit(t.module+"/setSchema",{data:e.schema,key:t.model.toLowerCase()+"Schema"}),t.item=new a.a(e).withDefaults(t.schema),t.isLoading=!1})).catch((function(e){t.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}})})):(this.item=(new a.a).withDefaults(this.schema),this.isLoading=!1)},methods:{autoSave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===e&&!this.id)return!1;this.$validator.validateAll().then((function(i){i?e?t._save(!0):n.a.debounce((function(){t._save()}),2e3)():1==e?t.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}}):t.$validator.reset()}))},_save:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.itemState="saving..",this.item.save().then((function(i){e&&(t.$announcer({status:200,data:{message:"Your "+t.model+" data has been Saved!"}}),i.schema&&t.$store.commit(t.module+"/setSchema",{data:i.schema,key:t.model.toLowerCase()+"Schema"}),t.$router.push({name:t.model.toLowerCase()})),t.itemState="saved"})).catch((function(e){t.$announcer(e.response),t.itemState="resave"}))},initForm:function(){var t=this;this.isFormDisabled=!1,this.$nextTick((function(){return t.$refs.nameInput.focus()}))},startProcessing:function(){this.isProcessing=!0},stopProcessing:function(){this.isProcessing=!1},handleFileChange:function(t,e){var i={name:t.name,url:e.uri};this.item.attachments||(this.item.attachments=[]),this.item.attachments.push(i)},getOptionsArray:function(){return this.id?Object.values(this.schema.form.users.values):Object.values(this.schema.form.location_users.values)}}},o=(i("6cuc"),i("KHd+")),c=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item&&t.schema?i("div",{staticClass:"col-12"},[i("h3",{staticClass:"item-title"},[t._v(t._s(t.item.name))]),t._v(" "),t.item.created_at?i("span",{staticClass:"description"},[t._v("\n    Created "+t._s(t._f("localDate")(t.item.created_at,"MM/DD/YYYY LTS"))+"\n  ")]):t._e(),t._v(" "),t.item.updated_at?i("span",{staticClass:"description"},[t._v("\n    Last updated "+t._s(t._f("localDate")(t.item.updated_at,"MM/DD/YYYY LTS"))+"\n  ")]):t._e(),t._v(" "),t.item.location?i("span",{staticClass:"description"},[t._v("\n    For: "+t._s(t.item.location.name)+"\n  ")]):t._e(),t._v(" "),i("form",{staticClass:"mt-2",attrs:{autocomplete:"off"}},[i("fieldset",[i("div",{staticClass:"form-row"},[i("div",{staticClass:"col-12 col-md-6"},[i("label",{attrs:{for:"item-name"}},[t._v("Name")]),t._v(" "),i("div",{staticClass:"form-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"item.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"nameInput",staticClass:"form-control",class:{input:!0,"text-danger":t.errors.has("name")},attrs:{id:"item-name","aria-describedby":"addon-right addon-left",name:"name",type:"text",placeholder:"",disabled:t.isFieldDisabled},domProps:{value:t.item.name},on:{focus:function(t){return t.target.select()},input:function(e){e.target.composing||t.$set(t.item,"name",e.target.value)}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("name")))])])]),t._v(" "),i("div",{staticClass:"col-2"},[i("label",{attrs:{for:"item-due_date"}},[t._v("Due Date")]),t._v(" "),i("div",{staticClass:"form-group"},[i("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"item-due_date",name:"due_date","bootstrap-styling":!0,"input-class":"form-datepicker","disabled-picker":t.isFieldDisabled},model:{value:t.item.due_date,callback:function(e){t.$set(t.item,"due_date",e)},expression:"item.due_date"}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("due_date"),expression:"errors.has('due_date')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("due_date")))])],1)]),t._v(" "),i("div",{staticClass:"col-2"},[i("label",{attrs:{for:"item-status"}},[t._v("Status")]),t._v(" "),i("div",{staticClass:"form-group"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.item.status,expression:"item.status"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-status",name:"status"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.item,"status",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v("Select a Status")]),t._v(" "),t.isFieldDisabled?t._e():i("option",{attrs:{value:"new"}},[t._v("New")]),t._v(" "),i("option",{attrs:{value:"started"}},[t._v("Started")]),t._v(" "),i("option",{attrs:{value:"completed"}},[t._v("Completed")]),t._v(" "),t.isFieldDisabled?t._e():i("option",{attrs:{value:"cancelled"}},[t._v("Cancelled")])]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("status"),expression:"errors.has('status')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("status")))])])]),t._v(" "),i("div",{staticClass:"col-2"},[i("label",{attrs:{for:"item-priority"}},[t._v("Priority")]),t._v(" "),i("div",{staticClass:"form-group"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.item.priority,expression:"item.priority"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"item-priority",name:"priority",disabled:t.isFieldDisabled},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.item,"priority",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v("Select a Priority")]),t._v(" "),i("option",{attrs:{value:"1"}},[t._v("Low")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("Medium")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("High")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("Urgent")])]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("priority"),expression:"errors.has('priority')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("priority")))])])])]),t._v(" "),i("div",{staticClass:"form-row"},[i("div",{staticClass:"col-12 col-md-12"},[i("label",{attrs:{for:"item-description"}},[t._v("Description")]),t._v(" "),i("div",{staticClass:"form-group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.description,expression:"item.description"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"descriptionInput",staticClass:"form-control",class:{input:!0,"text-danger":t.errors.has("description")},attrs:{id:"item-description","aria-describedby":"addon-right addon-left",name:"description",placeholder:"Please enter detailed instructions needed to complete the task.",disabled:t.isFieldDisabled,rows:"10"},domProps:{value:t.item.description},on:{focus:function(t){return t.target.select()},input:function(e){e.target.composing||t.$set(t.item,"description",e.target.value)}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("description"),expression:"errors.has('description')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("description")))])])]),t._v(" "),t.schema?i("div",{staticClass:"col-12",staticStyle:{clear:"both"}},[i("label",{attrs:{for:"item-assignees"}},[t._v("Assigned To")]),t._v(" "),i("div",{staticClass:"form-group"},[i("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"assignees","deselect-label":"Remove Assignee",placeholder:"Click to Select",searchable:!0,"allow-empty":!0,label:"name","track-by":"user_id",disabled:t.isFieldDisabled,multiple:!0,options:t.getOptionsArray()},model:{value:t.item.assignees,callback:function(e){t.$set(t.item,"assignees",e)},expression:"item.assignees"}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("assignees"),expression:"errors.has('assignees')"}],staticClass:"form-text text-muted text-danger"},[t._v(t._s(t.errors.first("assignees")))])],1)]):t._e(),t._v(" "),i("hr"),t._v(" "),t.item.attachments?i("label",[t._v("Attachments")]):t._e(),t._v(" "),t._l(t.item.attachments,(function(e){return i("div",{staticClass:"col-12 mt-2"},[i("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.name))])])})),t._v(" "),i("div",{staticClass:"col-12 mt-2"},[i("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:t.dropzoneOptions},on:{"vdropzone-success":t.handleFileChange}})],1)],2),t._v(" "),i("div",{staticClass:"col-12 clearfix mt-3"},[i("div",{staticClass:"drsection-content"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.autoSave(!0)}}}),t._v(" "),i("a",{staticClass:"btn btn-sm btn-light",on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"default",void 0,e.key,void 0)?null:t.$router.go(-1)}}},[t._v("Return.")])],1)])])])]):i("div",[i("loading",{attrs:{display:!t.schema||!t.item,type:"loadPage"}})],1)}),[],!1,null,null,null);e.default=c.exports},"H9w+":function(t,e,i){var a=i("lj6E");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(t.exports=a.locals)},"Hj/Q":function(t,e,i){var a=i("0dD9");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(t.exports=a.locals)},Ig7b:function(t,e,i){"use strict";i.r(e);var a=i("o0o1"),s=i.n(a),n=i("o28V"),r=i("K0/I"),o=i("yxfT"),c=i("LvDl"),l=i.n(c);function d(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e,i,a,s,n,r){try{var o=t[n](r),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,s)}var m,h,f={props:{model:{type:String,default:"Locations"},module:{type:String,default:"auth"}},data:function(){return{isLoading:!1,isDownloading:!1,gridData:null,gridSearch:null,gridPage:1,gridColumns:null,gridFilters:null,editModal:!1,editRef:0,editTitle:"Location Management",editType:"location"}},components:{LocationProfile:r.default,EditModal:n.a},mounted:function(){this.gridSearch=this.$route.query.search||null,this.schema&&(this.setFilters(this.$route.params.focus),this.gridColumns=this.schema.meta.fields)},methods:{fetchGrid:(m=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.schema){t.next=2;break}return t.abrupt("return",!1);case 2:return this.isLoading=!0,t.next=5,(new o.a).setFilters(this.gridFilters.filter).params({search:this.gridSearch}).orderBy((this.gridFilters.orderDesc?"-":"")+this.gridFilters.sortBy).limit(this.gridFilters.pageLimit).page(this.gridPage).get();case 5:this.gridData=t.sent,this.isLoading=!1;case 7:case"end":return t.stop()}}),t,this)})),h=function(){var t=this,e=arguments;return new Promise((function(i,a){var s=m.apply(t,e);function n(t){u(s,i,a,n,r,"next",t)}function r(t){u(s,i,a,n,r,"throw",t)}n(void 0)}))},function(){return h.apply(this,arguments)}),searchGrid:l.a.debounce((function(t){this.gridPage=1,this.fetchGrid()}),500),setFilters:function(){var t=this;if(!this.schema)return!1;this.gridFilters={pageLimit:50,sortBy:Object.keys(this.schema.filters).find((function(e){return"daterange"===t.schema.filters[e].type}))||"updated_at",orderDesc:!1,filter:Object.assign.apply(Object,[{}].concat(d(Object.keys(this.schema.filters).map((function(e){return i={},a=e,s=t.schema.filters[e].values.map((function(t){return t.id})),a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i;var i,a,s})))))}},rowColor:function(t,e){if(!t)return null;if(t.id==this.$store.state.user.location.id)return"table-default";switch(t.status){case"registered":case"held":return"table-warning";case"denied":case"requested":return"table-danger";case"activated":return"table-success";default:return null}},confirmDelete:function(t){var e=this;this.$swal.fire({title:"Are you sure?",text:"This will Delete this "+this.model+" row.",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete row"}).then((function(i){i.value&&(e.isLoading=!0,new o.a({id:t}).delete().then((function(t){e.isLoading=!1,e.$announcer(t),e.fetchGrid()})).catch((function(t){e.isLoading=!1,e.$announcer(t.response)})))}))},downloadExport:function(t){var e=this;this.isDownloading=!0,axios({url:(new o.a).setFilters(this.gridFilters.filter).custom(this.schema.meta.resource+"/export/"+t).getUrl(),method:"GET",responseType:"blob"}).then((function(t){e.isDownloading=!1,e.downloadFile(t)})).catch((function(t){e.isDownloading=!1,e.$announcer(t.response)}))},jumpToLocation:function(t){var e=this;axios.get("/api/v1/admin/auth/locations/change/"+t).then((function(i){e.$store.dispatch("resetAuthLocation",{scope:"user,sections,agg",route:e.$route,reset:!0}),e.$router.push({name:"location"}),i.data.message="You are now logged into Location "+t,e.$announcer(i)})).catch((function(t){e.$announcer(t.response)}))},loadEditModal:function(t,e){this.editRef=t,this.editTitle="Manage "+e+" - Location "+t+" Account",this.editModal=!this.editModal},refreshEditModal:function(){this.fetchGrid(),this.editModal=!this.editModal},updateDataRow:function(t,e){this.gridData.data.map((function(i){return i.id==t?e:i})),this.editModal=!1,this.fetchGrid()}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},columnsVisible:function(){return this.gridColumns?this.gridColumns.filter((function(t){return!0===t.toggle||!t.hasOwnProperty("toggle")})):[]}},watch:{gridFilters:{handler:function(t,e){this.gridPage=1,this.gridFilters&&this.fetchGrid()},deep:!0},gridPage:function(t,e){this.gridFilters&&this.fetchGrid()},schema:{handler:function(t,e){!e&&t?this.setFilters():l.a.isEqual(t.filters,e.filters)?1==this.shouldReload&&(this.fetchGrid(),this.shouldReload=!1):this.setFilters(),t&&!this.gridColumns&&(this.gridColumns=t.meta.fields)},deep:!0}}},p=i("KHd+"),v=Object(p.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.schema?i("div",{staticClass:"col-12"},[i("form",[i("div",{staticClass:"table-filter-row"},[i("div",{staticClass:"filter-search"},[i("div",{staticClass:"input-group"},[t._m(0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.gridSearch,expression:"gridSearch"}],staticClass:"form-control border-left-0",attrs:{type:"text",placeholder:t.schema.lang.searchPrompt||"Search Grid"},domProps:{value:t.gridSearch},on:{input:[function(e){e.target.composing||(t.gridSearch=e.target.value)},t.searchGrid],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchGrid(e))}}})])]),t._v(" "),t.gridFilters?i("div",{staticClass:"filters"},[t.gridData?i("filter-more",{attrs:{meta:t.gridData.meta,schema:t.schema,gridFilters:t.gridFilters,columns:t.gridColumns,isDownloading:t.isDownloading},on:{"update:gridFilters":function(e){t.gridFilters=e},"update:grid-filters":function(e){t.gridFilters=e},"update:columns":function(e){t.gridColumns=e},downloadExport:t.downloadExport}}):t._e(),t._v(" "),t._l(t.schema.filters,(function(e,a){return"wherein"==e.type?i("filter-in",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()})),t._v(" "),t._l(t.schema.filters,(function(e,a){return"daterange"==e.type?i("filter-date",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()}))],2):t._e()])]),t._v(" "),i("loading",{attrs:{display:t.isLoading,type:"loadGrid"}}),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},[t.schema&&t.gridFilters?i("b-table",{attrs:{striped:"",hover:"",id:t.model.toLowerCase()+"_table","primary-key":"id",items:t.gridData?t.gridData.data:[],fields:t.columnsVisible,busy:t.isLoading,"show-empty":!0,"sort-by":t.gridFilters.sortBy,"sort-desc":t.gridFilters.orderDesc,"no-local-sorting":!0,"no-local-filtering":!0,"per-page":0,tbodyTrClass:t.rowColor,responsive:"md",stacked:"sm"},on:{"update:busy":function(e){t.isLoading=e},"update:sortBy":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.gridFilters,"orderDesc",e)},"update:sort-desc":function(e){return t.$set(t.gridFilters,"orderDesc",e)}},scopedSlots:t._u([t._l(t.schema.meta.fields,(function(e,a){return{key:"head(field.key)",fn:function(a){return[i("em",[e.icon?i("i",{class:e.icon}):t._e(),t._v(" "),e.description?i("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.description,expression:"field.description",modifiers:{hover:!0}}],staticClass:"hotbox-icon hotbox-icon-c-question",attrs:{title:e.name}}):t._e(),t._v(" "),"batch_ids"==e.key?i("span",[i("label",{staticClass:"custom-control custom-checkbox"},[i("input",{staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:t.isAllInBatch},on:{click:t.toggleBatchAll}}),i("span",{staticClass:"custom-control-indicator"})])]):i("span",[t._v(t._s(a.label))])])]}}})),{key:"cell(thumb)",fn:function(t){return[i("img",{staticClass:"responsive",attrs:{src:t.item.thumb?t.item.thumb:"/images/none.jpg",width:"65"}})]}},{key:"cell(name)",fn:function(e){return[t._v("\n                "+t._s(e.value)),i("br"),t._v(" "),i("span",{staticClass:"small"},[t._v("Status: "+t._s(e.item.status))])]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(activated_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(settings)",fn:function(e){return[t._v("\n                Contact Email: "+t._s(e.item.settings?e.item.settings.communication_email:"n/a")+"\n            ")]}},{key:"cell(balance)",fn:function(e){return[t._v("\n                $"+t._s(t._f("dollar")(e.value))+"\n            ")]}},{key:"cell(actions)",fn:function(e){return[e.item.id!=t.$store.state.user.location.id?i("i",{staticClass:"float-right mt-0",class:{"ti-angle-double-down":!e.detailsShowing,"ti-angle-double-up":e.detailsShowing},on:{click:function(t){return t.preventDefault(),e.toggleDetails(t)}}}):t._e(),t._v(" "),i("i",{staticClass:"hotbox-icon hotbox-icon-preferences float-right mr-2",on:{click:function(i){return t.loadEditModal(e.item.id,e.item.name)}}}),t._v(" "),e.item.id!=t.$store.state.user.location.id?i("i",{staticClass:"hotbox-icon hotbox-icon-key-26 float-right mr-2",on:{click:function(i){return t.jumpToLocation(e.item.id)}}}):t._e()]}},{key:"row-details",fn:function(e){return[e.item.settings&&t.schema.form.settings?i("div",{staticClass:"col-12"},t._l(t.schema.form.settings.sections,(function(a,s){return i("div",{staticClass:"mt-2"},[i("h6",[t._v(t._s(a.title))]),t._v(" "),t._l(a.properties,(function(a,s){return e.item.settings[s]?i("div",{staticClass:"col-12 row"},[i("div",{staticClass:"col-sm-4 small"},[t._v(t._s(a.title))]),t._v(" "),i("div",{staticClass:"col-sm-7 small"},[t._v(t._s(e.item.settings[s]))])]):t._e()}))],2)})),0):t._e()]}},t.gridData?{key:"table-caption",fn:function(){return[t.gridData.data.length>0?i("div",[t.gridData.meta?i("span",[t._v("\n                        Showing "+t._s(t.gridData.meta.per_page*(t.gridPage-1)+1)+" to "+t._s(t.gridData.meta.per_page*t.gridPage<t.gridData.meta.total?t.gridData.meta.per_page*t.gridPage:t.gridData.meta.total)+" of "+t._s(t.gridData.meta.total)+" "+t._s(t.schema.lang.items?t.schema.lang.items:"Records")+"\n                    ")]):i("span",[t._v("Showing All "+t._s(t.schema.lang.items?t.schema.lang.items:"Records"))]),t._v(" "),i("div",{staticClass:"table-pager-footer"},[t.gridData.meta.total>0?i("b-pagination",{attrs:{"total-rows":t.gridData.meta.total,"per-page":t.gridData.meta.per_page,"aria-controls":"users_table"},model:{value:t.gridPage,callback:function(e){t.gridPage=e},expression:"gridPage"}}):t._e()],1)]):t._e()]},proxy:!0}:null,{key:"empty",fn:function(){return[t.isLoading?i("div",{staticClass:"h-100"},[t._v("Â ")]):i("div",[i("img",{attrs:{src:"/images/logo.png",alt:"No Results",width:"115"}}),t._v(" "),i("h4",[t._v("Hmm, There are currently no Results.")])])]},proxy:!0}],null,!0)}):t._e()],1),t._v(" "),i("b-modal",{ref:"editModal",attrs:{centered:"","no-enforce-focus":!0,size:"lg","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[i("template",{slot:"modal-header"},[i("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.editModal=!t.editModal}}}),t._v(" "),i("h5",{staticClass:"w-100 mb-0 text-center"},[t._v(t._s(t.editTitle))])]),t._v(" "),t.editModal?i("edit-modal",{attrs:{id:t.editRef,type:t.editType,schema:t.schema},on:{refresh:t.refreshEditModal}}):t._e(),t._v(" "),i("template",{slot:"modal-footer"},[i("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.editModal=!t.editModal}}},[t._v("Close")])])],2)],1):i("div",[i("loading",{attrs:{display:!t.schema,type:"loadPage"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("i",{staticClass:"hotbox-icon hotbox-icon-search-2"})])}],!1,null,null,null);e.default=v.exports},JdLT:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,"\n.item-title {\n  margin-bottom: 0;\n}\n.vdp-datepicker__calendar {\n  left: 0;\n}\n",""])},"K0/I":function(t,e,i){"use strict";i.r(e);var a=i("YZah"),s=i("LvDl"),n=i.n(s),r={props:{model:{type:String,default:"Location"},module:{type:String,default:"auth"},locationRef:{type:Object,default:null}},data:function(){return{item:null,itemState:"save",apiToken:null,refreshingToken:!1}},components:{},mounted:function(){this.schema&&this.loadProfile()},methods:{autoSave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$validator.validateAll().then((function(i){i?e?t._save(!0):n.a.debounce((function(){t._save()}),2e3)():1==e&&t.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}})}))},_save:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.itemState="saving..",this.item.settings.is_medical=!this.item.licensenum.includes("R")&&!this.item.licensenum.includes("r"),this.item.settings.is_producer=!!this.item.licensenum.startsWith("403"),this.item.settings.is_processor=!!this.item.licensenum.startsWith("404"),this.item.save().then((function(i){e&&(t.$store.dispatch("resetAuthLocation",{scope:"user,agg",reset:!1}),t.$emit("updateLocation",t.item),t.$announcer({status:200,data:{message:"Your Item Settings have been Saved!"}})),t.itemState="saved"})).catch((function(e){t.$announcer(e.response),t.itemState="resave"}))},getToken:function(){var t=this;this.refreshingToken=!0,axios.post("/api/v1/admin/auth/newToken",{}).then((function(e){t.refreshingToken=!1,t.apiToken=e.data.api_token,t.$announcer(e)})).catch((function(e){t.refreshingToken=!1,t.$announcer(e.response)}))},loadProfile:function(){var t=this;return a.a.find(this.$store.state.disp.location).then((function(e){t.item=new a.a(e).withDefaults(t.schema),t.isLoading=!1})).catch((function(e){t.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}})})),!0}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}},watch:{schema:function(t,e){t&&this.loadProfile()},item:{handler:function(t,e){this.itemState=e?"save changes":t.id?"save":"create"},deep:!0}}},o=i("KHd+"),c=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item&&t.schema?i("div",{staticClass:"col-12"},[i("form",{on:{change:function(e){return t.autoSave()}}},[i("fieldset",[i("form-sectionalobject",{staticClass:"form-group-list mb-4",attrs:{formData:t.item.settings,schema:t.schema.form.settings,disabled:!t.$store.getters.userCan("Manage Location"),scoped:t.item.type},model:{value:t.item.settings,callback:function(e){t.$set(t.item,"settings",e)},expression:"item.settings"}}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"drsection-content"},[i("form-text",{attrs:{schema:t.schema.form.name},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}}),t._v(" "),i("form-text",{attrs:{schema:t.schema.form.licensenum},model:{value:t.item.licensenum,callback:function(e){t.$set(t.item,"licensenum",e)},expression:"item.licensenum"}}),t._v(" "),i("form-search",{attrs:{defaultOption:t.$store.state.user.location.address,schema:t.schema.form.addressbook_id},model:{value:t.item.addressbook_id,callback:function(e){t.$set(t.item,"addressbook_id",e)},expression:"item.addressbook_id"}})],1),t._v(" "),t.$store.getters.userCan("manage-server")?i("div",{staticClass:"drsection-header"},[i("h4",[t._v("HotBox Admin Account Overrides for "+t._s(t.item.name)+":")])]):t._e(),t._v(" "),t.$store.getters.userCan("manage-server")?i("div",{staticClass:"drsection-content"},[t.$store.getters.userCan("manage-server")?i("form-number",{staticClass:"col-12 mt-2 mb-3",attrs:{schema:t.schema.form.admin_campaign_sms_limit},model:{value:t.item.settings.campaign_sms_limit,callback:function(e){t.$set(t.item.settings,"campaign_sms_limit",e)},expression:"item.settings.campaign_sms_limit"}}):t._e()],1):t._e(),t._v(" "),i("div",{staticClass:"col-12"},[i("div",{staticClass:"drsection-content"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.autoSave(!0)}}})],1)]),t._v(" "),i("div",{staticClass:"col-12 mt-3 mb-2"},[t.item.is_demo?i("div",{staticClass:"block-announce warning"},[t._m(1),t._v(" "),i("p",[t._v("Heya, You are in Demo Mode.  No Outside communications will be sent.")])]):t._e(),t._v(" "),i("div",{staticClass:"block-announce info mt-2 mb-3"},[t._m(2),t._v(" "),i("p",{staticClass:"text-center"},[t.apiToken?t._e():i("a",{staticClass:"btn btn-md btn-light text-center",on:{click:t.getToken}},[i("spinner",{staticClass:"float-left",attrs:{isProcessing:t.refreshingToken,isFullScreen:!1,isLine:!0,spinnerWidth:25}}),t._v(" Get a Fresh Token")],1)]),t._v(" "),t.apiToken?i("blockquote",[t._v(t._s(t.apiToken)+" "),i("i",{class:{"hotbox-icon hotbox-icon-refresh-69":!t.refreshingToken,"hotbox-icon hotbox-icon-hourglass":t.refreshingToken},on:{click:t.getToken}})]):t._e(),t._v(" "),i("p",{staticClass:"text-center"},[t._v("This token will grant access (based on your "),i("b",[t._v(t._s(t.$store.state.user.location.name))]),t._v(" credentials) to our API endpoints, which may be "),i("a",{attrs:{href:"",target:"_blank"}},[t._v("reviewed here")])])])])],1)])]):i("div",[i("loading",{attrs:{display:!t.item||!t.schema,type:"loadPage"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"drsection-header"},[e("h4",[this._v("General Settings")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("i",{staticClass:"hotbox-icon hotbox-icon-presentation show-yellow"}),this._v(" You are now in Demo Mode..")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("i",{staticClass:"hotbox-icon hotbox-icon-key-26"}),this._v(" Your API Access Token:")])}],!1,null,null,null);e.default=c.exports},KCoV:function(t,e,i){"use strict";i.r(e);var a=i("o0o1"),s=i.n(a),n=i("83d4"),r=i("LvDl"),o=i.n(r),c={props:{model:{type:String,default:"User"},module:{type:String,default:"auth"},id:{type:[Number,String],default:""},type:{type:String,default:"edit"}},data:function(){return{item:null,schema:null,tab:this.type,itemState:"update",isLoading:!1,isDownloading:!1,resetState:"reset",sendState:"send",viewPINTab:!1,resetForm:{id:this.id,password:null,password_confirmation:null}}},components:{},mounted:function(){var t=this;this.isLoading=!0,n.a.find(this.id).then((function(e){t.schema=e.schema,t.item=new n.a(e).withDefaults(t.schema),t.isLoading=!1})).catch((function(e){t.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}}),t.$emit("refresh")}))},methods:{autoSave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===e&&!this.id)return!1;this.$validator.validateAll().then((function(i){i?e?t._save(!0):o.a.debounce((function(){t._save()}),500)():1==e&&t.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}})}))},_save:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.itemState="saving..",this.item.save().then((function(i){e&&(t.$announcer({status:200,data:{message:t.model+" has been Saved!"}}),i.schema&&t.$store.commit(t.module+"/setSchema",{data:i.schema,key:t.model.toLowerCase()+"Schema"}),t.$emit("refresh")),t.itemState="update (saved)"})).catch((function(e){t.$announcer(e.response),t.itemState="(re)update"}))},downloadExportFile:function(t,e){var i=this;this.isDownloading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/"+t+"/export/"+e,{responseType:"arraybuffer"}).then((function(t){i.isDownloading=!1,i.downloadFile(t)})).catch((function(t){i.isDownloading=!1,i.$announcer(t.response)}))},hasPermissions:function(t,e){var i=this;this.viewPINTab=!1,axios.post("/api/v1/"+this.schema.meta.resource+"/"+t+"/permissions",{id:t,permission:e}).then((function(t){i.viewPINTab=!0})).catch((function(t){i.viewPINTab=!1}))},isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()},updatePassword:function(){var t=this;this.resetState="resetting..",axios.post("/api/v1/"+this.schema.meta.resource+"/"+this.id+"/change-password",this.resetForm).then((function(e){t.resetState="resetted",t.$announcer(e)})).catch((function(e){t.resetState="reset",t.$announcer(e.response)}))},updatePIN:function(){var t=this;this.resetState="resetting..",axios.post("/api/v1/"+this.schema.meta.resource+"/"+this.id+"/change-pin",this.resetForm).then((function(e){t.resetState="resetted",t.$announcer(e)})).catch((function(e){t.resetState="reset",t.$announcer(e.response)}))},sendActivation:function(){var t=this;this.sendState="preparing..",axios.post("/api/v1/"+this.schema.meta.resource+"/"+this.id+"/send-activation",{id:this.id}).then((function(e){t.sendState="sending",t.$announcer(e)})).catch((function(e){t.sendState="send",t.$announcer(e.response)}))}},computed:{},watch:{item:{handler:function(t,e){this.itemState=e?"update changes":t.id?"update":"create"},deep:!0}}},l=i("KHd+"),d=Object(l.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item&&t.schema?i("div",{staticClass:"col-12"},[i("div",{staticClass:"nav-tabs-header mb-4"},[i("ul",{staticClass:"nav nav-tabs nav-tabs-custom"},[i("li",{staticClass:"nav-link",class:{active:"edit"==t.tab}},[i("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tab="edit"}}},[t._v("Profile")])]),t._v(" "),i("li",{staticClass:"nav-link",class:{active:"password"==t.tab}},[i("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tab="password"}}},[i("i",{staticClass:"fal fa-key"}),t._v(" Password")])]),t._v(" "),i("li",{staticClass:"nav-link",class:{active:"pin"==t.tab},on:{click:function(e){return t.hasPermissions(t.item.id,"Store Admin Update")}}},[i("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tab="pin"}}},[i("i",{staticClass:"fal fa-key"}),t._v(" PIN")])])])]),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},["edit"==t.tab?i("div",{},[i("form",{staticClass:"col-12 modal-form",on:{change:function(e){return t.autoSave()}}},[i("fieldset",[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"col-sm-5 text-center float-left"},[i("img",{staticClass:"responsive",attrs:{src:t.item.avatar?t.item.avatar:t.schema.model.avatar,width:"85%"}})]),t._v(" "),i("div",{staticClass:"col-sm-7 float-left"},[i("h3",[t._v(t._s(t.item.name))]),t._v(" "),i("a",{staticClass:"d-block mb-2",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.downloadExportFile(t.item.id,"pdf")}}},[t.isDownloading?i("i",{staticClass:"far fa-circle-notch fa-spin"}):t._e(),t._v(" "),i("i",{staticClass:"far fa-file-pdf"}),t._v(" Download Profile")]),t._v(" "),i("span",{staticClass:"small"},[t._v("Created on: "+t._s(t._f("localDate")(t.item.created_at)))]),i("br"),t._v(" "),i("span",{staticClass:"small"},[t._v("Last Updated on: "+t._s(t._f("localDate")(t.item.updated_at)))])])]),t._v(" "),t._l(t.schema.form,(function(e,a){return i("div",{staticClass:"mt-4 clearfix"},["object"==e.type?i("div",{staticClass:"form-group-list"},t._l(e.sections,(function(e,s){return i("div",[i("h5",{staticClass:"mb-2"},[t._v("Settings - "+t._s(e.title))]),t._v(" "),t._l(e.properties,(function(e,s){return i("p",{staticClass:"mt-1"},["text"==e.type?i("form-text",{attrs:{schema:e},model:{value:t.item[a][s],callback:function(e){t.$set(t.item[a],s,e)},expression:"item[ele][pname]"}}):t._e(),t._v(" "),"datetime"==e.type?i("form-datetime",{attrs:{schema:e},model:{value:t.item[a][s],callback:function(e){t.$set(t.item[a],s,e)},expression:"item[ele][pname]"}}):t._e()],1)}))],2)})),0):i("div",{staticClass:"form-group-list"},["boolean"==e.type?i("form-boolean",{attrs:{declared:t.item[a],schema:e},on:{input:function(e){t.item[a]=e}}}):t._e(),t._v(" "),"text"==e.type?i("form-text",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"select"==e.type?i("form-select",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"multiselect"==e.type?i("form-multiselect",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"checklist"==e.type?i("form-checklist",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"status"==e.name&&"pending_activation"==t.item.status?i("a",{staticClass:"float-right",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.sendActivation()}}},[i("i",{class:{"ti-email":"send"==t.sendState,"far fa-circle-notch fa-spin":"preparing.."==t.sendState,"far fa-check-circle show-green":"sending"==t.sendState}}),t._v(" "+t._s(t._f("ucwords")(t.sendState))+" Activation Link Email Â»\n                    ")]):t._e()],1)])})),t._v(" "),i("div",{staticClass:"col-12 mt-4"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.autoSave(!0)}}})],1)],2)])]):t._e()]),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},["password"==t.tab?i("div",{},[t.$store.getters.userCan("Employees Update")||t.item.role_ids==t.item.id?i("div",[i("form",{staticClass:"col-12 modal-form",on:{submit:function(e){return e.preventDefault(),t.updatePassword()}}},[i("fieldset",[i("h5",{staticClass:"box-title m-b-20"},[t._v("Change User Password")]),t._v(" "),i("form-password",{staticClass:"col-12 col-sm-12",attrs:{schema:t.schema.form.password},on:{confirm:function(e){t.resetForm.password_confirmation=e}},model:{value:t.resetForm.password,callback:function(e){t.$set(t.resetForm,"password",e)},expression:"resetForm.password"}}),t._v(" "),i("div",{staticClass:"form-group text-center mt-3 mb-4"},[i("button",{staticClass:"btn btn-info btn-md waves-effect waves-light",attrs:{type:"submit"}},[i("i",{class:{"far fa-circle-notch fa-spin":"resetting"==t.resetState,"far fa-check-circle show-green":"resetted"==t.resetState}}),t._v(" "+t._s(t._f("ucwords")(t.resetState))+" Password\n                        ")])])],1)])]):i("div",{staticClass:"col-12 text-center mt-3 mb-4"},[i("h5",[t._v("Were Sorry, You do not have permission to change this users password.")])])]):t._e()]),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},["pin"==t.tab?i("div",{},[t.$store.getters.userCan("Store Admin Update")&&t.viewPINTab?i("div",[i("form",{staticClass:"col-12 modal-form",on:{submit:function(e){return e.preventDefault(),t.updatePIN()}}},[i("fieldset",[i("h5",{staticClass:"box-title m-b-20"},[t._v("Change Administrative User PIN")]),t._v(" "),i("form-password",{staticClass:"col-12 col-sm-12",attrs:{schema:t.schema.form.pincode},on:{confirm:function(e){t.resetForm.pincode_confirmation=e}},model:{value:t.resetForm.pincode,callback:function(e){t.$set(t.resetForm,"pincode",e)},expression:"resetForm.pincode"}}),t._v(" "),i("div",{staticClass:"form-group text-center mt-3 mb-4"},[i("button",{staticClass:"btn btn-round btn-info waves-effect waves-light",attrs:{type:"submit"}},[i("i",{class:{"far fa-circle-notch fa-spin":"resetting"==t.resetState,"far fa-check-circle show-green":"resetted"==t.resetState}}),t._v(" "+t._s(t._f("ucwords")(t.resetState))+" PIN\n                        ")])])],1)])]):i("div",{staticClass:"col-12 text-center mt-3 mb-4"},[i("h5",[t._v("This user account does not have the correct permissions to be given an adminstrative PIN.")])])]):t._e()])],1):i("div",{staticClass:"no-content-block"},[i("loading",{attrs:{display:!t.item||!t.schema,type:"loadModal"}})],1)}),[],!1,null,null,null).exports;function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e,i,a,s,n,r){try{var o=t[n](r),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,s)}function f(t){return function(){var e=this,i=arguments;return new Promise((function(a,s){var n=t.apply(e,i);function r(t){h(n,a,s,r,o,"next",t)}function o(t){h(n,a,s,r,o,"throw",t)}r(void 0)}))}}var p,v={props:{model:{type:String,default:"User"},module:{type:String,default:"auth"},filters:{type:Object,default:function(){}}},data:function(){return{isLoading:!1,isDownloading:!1,shouldReload:!1,gridData:null,gridSearch:null,gridPage:1,gridColumns:null,gridFilters:null,gridArchive:!1,editModal:!!this.$route.params.showProfile&&this.$route.params.showProfile,editRef:this.$route.params.profileId?this.$route.params.profileId:0,editType:"edit"}},components:{EditModal:d},mounted:function(){this.gridSearch=this.$route.query.search||null,this.schema&&(this.setFilters(this.$store.state.disp.location),this.gridColumns=this.schema.meta.fields)},methods:{fetchGrid:(p=f(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.schema&&this.gridFilters){t.next=4;break}return t.abrupt("return",!1);case 4:if(1!=this.isLoading){t.next=6;break}return t.abrupt("return",!1);case 6:return this.isLoading=!0,t.next=9,(new n.a).setFilters(this.gridFilters.filter).params({search:this.gridSearch,archived:this.gridArchive?1:0}).orderBy((this.gridFilters.orderDesc?"-":"")+this.gridFilters.sortBy).limit(this.gridFilters.pageLimit).page(this.gridPage).get();case 9:this.gridData=t.sent,this.isLoading=!1;case 11:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)}),searchGrid:o.a.debounce((function(t){this.gridPage=1,this.fetchGrid()}),500),setFilters:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.schema)return!1;this.gridFilters={pageLimit:50,sortBy:Object.keys(this.schema.filters).find((function(e){return"daterange"===t.schema.filters[e].type}))||"created_at",orderDesc:!1,filter:Object.assign.apply(Object,[{}].concat(m(Object.keys(this.schema.filters).map((function(t){return u({},t,["all"])}))),[this.filters]))}},parseStatus:function(t){var e=this.schema.form.status.values.find((function(e){return e.id==t}));return e?e.name:t},loadModal:function(t,e){this.editRef=t,this.editType=e,this.editModal=!0},refreshFromModal:function(t){this.editModal=!this.editModal,this.shouldReload=!0},renderRoleList:function(t){return t?t.map((function(t){return t.name})).join(", "):"n/a"},confirmDelete:function(t){var e=this;this.$swal.fire({title:"Are you sure?",text:"This will Archive this User",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, Archive User"}).then(function(){var i=f(s.a.mark((function i(a){return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!a.value){i.next=10;break}return e.isLoading=!0,i.next=4,e.requirePin("Please Enter an Admin PIN to archive this User");case 4:if(!1!==i.sent){i.next=8;break}return e.isLoading=!1,i.abrupt("return",!1);case 8:return new n.a({id:t}).delete().then((function(t){e.isLoading=!1,e.$store.dispatch(e.module+"/setSchemas",e.model.toLowerCase()),e.$announcer(t),e.fetchGrid()})).catch((function(t){e.isLoading=!1,e.$announcer(t.response)})),i.abrupt("return",!0);case 10:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}())},unArchive:function(t){var e=this;this.isLoading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/"+t+"/unarchive").then((function(t){e.isLoading=!1,e.$store.dispatch(e.module+"/setSchemas",e.model.toLowerCase()),e.$announcer(t),e.fetchGrid()})).catch((function(t){e.isLoading=!1,e.$announcer(t.response)}))},downloadExport:function(t){var e=this;this.isDownloading=!0,axios({url:(new n.a).setFilters(this.gridFilters.filter).custom(this.schema.meta.resource+"/export/"+t).getUrl(),method:"GET",responseType:"blob"}).then((function(t){e.isDownloading=!1,e.downloadFile(t)})).catch((function(t){e.isDownloading=!1,e.$announcer(t.response)}))},renderRowBg:function(t,e){return t?{"grid-table-rows":!0,"is-archived":"archived"===t.status}:null},alertDisabledArchive:function(){this.$swal.fire({text:"User Already Archived.",title:"Archiving Unavailable",type:"warning",confirmButtonText:"OK"})}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},columnsVisible:function(){return this.gridColumns?this.gridColumns.filter((function(t){return!0===t.toggle||!t.hasOwnProperty("toggle")})):[]},gridFocus:function(){return this.$store.state[this.module].focus}},watch:{gridFilters:{handler:function(t,e){this.gridPage=1,this.gridFilters&&this.fetchGrid()},deep:!0},gridPage:function(t,e){this.gridFilters&&this.fetchGrid()},schema:{handler:function(t,e){!e&&t?this.setFilters():o.a.isEqual(t.filters,e.filters)?1==this.shouldReload&&(this.fetchGrid(),this.shouldReload=!1):this.setFilters(this.gridFilters.filter.location_id[0]),t&&!this.gridColumns&&(this.gridColumns=t.meta.fields)},deep:!0},gridFocus:function(t,e){t&&this.gridFilters&&!o.a.isEqual(t,e)&&("all"!=t&&"all"!=e&&(this.gridSearch=null),this.gridFilters&&(this.gridFilters.filter.type=[t]))},gridArchive:function(t,e){this.gridFilters&&this.fetchGrid()}}},g=Object(l.a)(v,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.schema?i("div",{staticClass:"col-12"},[i("form",[i("div",{staticClass:"table-filter-row"},[i("div",{staticClass:"filter-search",class:{active:t.gridSearch}},[i("div",{staticClass:"input-group"},[t._m(0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.gridSearch,expression:"gridSearch"}],staticClass:"form-control border-left-0",attrs:{type:"text",placeholder:t.schema.lang.searchPrompt||"Search Grid"},domProps:{value:t.gridSearch},on:{input:[function(e){e.target.composing||(t.gridSearch=e.target.value)},t.searchGrid],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchGrid(e))}}})])]),t._v(" "),t.gridFilters?i("div",{staticClass:"filters"},[t.gridData?i("filter-more",{attrs:{meta:t.gridData.meta,schema:t.schema,gridFilters:t.gridFilters,columns:t.gridColumns,isDownloading:t.isDownloading},on:{"update:gridFilters":function(e){t.gridFilters=e},"update:grid-filters":function(e){t.gridFilters=e},"update:columns":function(e){t.gridColumns=e},downloadExport:t.downloadExport}}):t._e(),t._v(" "),t._l(t.schema.filters,(function(e,a){return"wherein"==e.type?i("filter-in",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()})),t._v(" "),t._l(t.schema.filters,(function(e,a){return"tabular"==e.type?i("filter-tabs",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()}))],2):t._e()])]),t._v(" "),i("loading",{attrs:{display:t.isLoading,type:"loadGrid"}}),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},[t.schema&&t.gridFilters?i("b-table",{attrs:{striped:"",hover:"",id:"users_table","primary-key":"id",items:t.gridData?t.gridData.data:[],fields:t.columnsVisible,busy:t.isLoading,"show-empty":!0,"sort-by":t.gridFilters.sortBy,"sort-desc":t.gridFilters.orderDesc,"no-local-sorting":!0,"no-local-filtering":!0,"per-page":0,tbodyTrClass:t.renderRowBg,responsive:"md",stacked:"sm"},on:{"update:busy":function(e){t.isLoading=e},"update:sortBy":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.gridFilters,"orderDesc",e)},"update:sort-desc":function(e){return t.$set(t.gridFilters,"orderDesc",e)}},scopedSlots:t._u([t._l(t.schema.meta.fields,(function(e,a){return{key:"head(field.key)",fn:function(a){return[i("em",[e.icon?i("i",{class:e.icon}):t._e(),t._v(" "),e.description?i("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.description,expression:"field.description",modifiers:{hover:!0}}],staticClass:"hotbox-icon hotbox-icon-c-question",attrs:{title:e.name}}):t._e(),t._v(" \n                "+t._s(a.label)+"\n              ")])]}}})),{key:"cell(avatar)",fn:function(e){return[i("img",{staticClass:"responsive",attrs:{src:e.item.avatar?e.item.avatar:t.schema.model.avatar,width:"65"}})]}},{key:"cell(email)",fn:function(e){return[t._v("\n                "+t._s(e.value)),i("br"),t._v(" "),i("span",{staticClass:"small"},[i("b",[t._v("As "+t._s(t._f("renderValue")(e.item.type,t.schema.form.type.values))+" \n                "),i("i",{staticClass:"float-right",class:{"show-green":"activated"==e.item.status,"show-red":"denied"==e.item.status,"show-orange":"pending_activation"==e.item.status}},[t._v("\n                    ("+t._s(t._f("renderValue")(e.item.status,t.schema.form.status.values))+")\n                ")])])])]}},{key:"cell(name)",fn:function(e){return[t._v("\n                "+t._s(e.value)),i("br"),t._v(" "),i("span",{staticClass:"small"},[t._v("Roles: "+t._s(t.renderRoleList(e.item.roles)))])]}},{key:"cell(settings)",fn:function(e){return[e.item.settings?i("span",[t._v("\n                Contact: "+t._s(e.item.settings.contact_email)+" "+t._s(e.item.settings.contact_phone)),i("br"),t._v(" "),"staff"==e.item.type?i("span",{staticClass:"small"},[t._v("Employee Lic: "+t._s(e.item.settings.employee_licensenum)+", Hired on: "+t._s(t._f("localDate")(e.item.settings.employee_hired_on)))]):t._e()]):i("span",[i("a",{attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.loadModal(e.item.id,"edit")}}},[t._v("Add Employee/Staff Settings Â»")])])]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(updated_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(actions)",fn:function(e){return[t.$store.getters.userCan("Staff Update")||t.$store.state.user.id==e.item.id?i("div",{staticClass:"dropdown"},[i("a",{attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"ti-more-alt"})]),t._v(" "),i("div",{staticClass:"dropdown-menu tight dropdown-menu-right"},[i("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.loadModal(e.item.id,"edit")}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-pencil"}),t._v(" Manage User Profile")]),t._v(" "),i("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.loadModal(e.item.id,"password")}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-key-26"}),t._v(" Change Password")]),t._v(" "),"archived"===e.item.status?i("a",{staticClass:"dropdown-item action-danger",on:{click:function(i){return t.unArchive(e.item.id)}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-redo-81"}),t._v(" UnArchive User")]):i("a",{staticClass:"dropdown-item action-danger",on:{click:function(i){return t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-trash-round"}),t._v(" Archive User")])])]):t._e()]}},t.gridData?{key:"table-caption",fn:function(){return[t.gridData.data.length>0?i("div",{staticClass:"paginate-foot"},[t.gridData.meta?i("span",[t._v("\n                        Showing "+t._s(t.gridData.meta.per_page*(t.gridPage-1)+1)+" to "+t._s(t.gridData.meta.per_page*t.gridPage<t.gridData.meta.total?t.gridData.meta.per_page*t.gridPage:t.gridData.meta.total)+" of "+t._s(t.gridData.meta.total)+" "+t._s(t.schema.lang.items?t.schema.lang.items:"Records")+"\n                        "),i("form-boolean",{staticClass:"mt-1",attrs:{declared:t.gridArchive,schema:{name:"archived",title:"Include Archived Items"}},on:{input:function(e){t.gridArchive=e}}})],1):i("span",[t._v("Showing All "+t._s(t.schema.lang.items?t.schema.lang.items:"Records"))]),t._v(" "),i("div",{staticClass:"table-pager-footer"},[t.gridData.meta.total>0?i("b-pagination",{attrs:{"total-rows":t.gridData.meta.total,"per-page":t.gridData.meta.per_page,"aria-controls":"users_table"},model:{value:t.gridPage,callback:function(e){t.gridPage=e},expression:"gridPage"}}):t._e()],1)]):t._e()]},proxy:!0}:null,{key:"empty",fn:function(){return[t.isLoading?i("div",{staticClass:"h-100"},[t._v("Â ")]):i("div",[i("form-boolean",{staticClass:"mt-1",attrs:{declared:t.gridArchive,schema:{name:"archived",title:"Include Archived Items"}},on:{input:function(e){t.gridArchive=e}}}),t._v(" "),i("img",{attrs:{src:"/images/logo.png",alt:"No Results",width:"115"}}),t._v(" "),i("h4",[t._v("Hmm, There are currently no Results.")])],1)]},proxy:!0}],null,!0)}):t._e()],1),t._v(" "),i("b-modal",{ref:"editModal",attrs:{centered:"",size:"lg","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[i("template",{slot:"modal-header"},[i("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.editModal=!t.editModal}}}),t._v(" "),i("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Staff Management")])]),t._v(" "),t.editModal?i("edit-modal",{attrs:{id:t.editRef,type:t.editType},on:{refresh:t.refreshFromModal}}):t._e(),t._v(" "),i("template",{slot:"modal-footer"},[i("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.editModal=!t.editModal}}},[t._v("Close")])])],2)],1):i("div",[i("loading",{attrs:{display:!t.schema,type:"loadPage"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("i",{staticClass:"hotbox-icon hotbox-icon-search-3"})])}],!1,null,null,null);e.default=g.exports},N9eg:function(t,e,i){"use strict";i.r(e);var a=i("YZah"),s=i("LvDl"),n=i.n(s),r={props:{model:{type:String,default:"Location"},module:{type:String,default:"auth"}},components:{},data:function(){return{item:null,itemState:"save",migrationType:"btdb",dbConnected:!1,locationsFound:[],foundOtherLocations:[],licensenum:null,isProcessing:!1,isSending:!1}},mounted:function(){this.schema&&this.loadProfile()},methods:{autoSave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.parseHost(),this.$validator.validateAll().then((function(i){i?e?t._save(!0):n.a.debounce((function(){t._save()}),2e3)():1==e&&t.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}})}))},_save:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.itemState="saving..",this.item.save().then((function(i){e&&(t.$store.dispatch("resetAuthLocation",{scope:"user,agg",reset:!1}),t.$emit("updateLocation",t.item),t.$announcer({status:200,data:{message:"Your Item Settings have been Saved!"}})),t.itemState="saved",t.dbLinkFormfilledOut&&!t.isProcessing&&(t.$announcer({data:{message:"Testing Connection.  This may take a moment..."}}),t.testConnection())})).catch((function(e){t.$announcer(e.response),t.itemState="resave"}))},loadProfile:function(){var t=this;return a.a.find(this.$store.state.disp.location).then((function(e){t.item=new a.a(e).withDefaults(t.schema),t.isLoading=!1})).catch((function(e){t.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}})})),!0},parseHost:function(){var t=this.item.migration_settings.btdb_host;t&&t.indexOf(":")>-1&&!this.item.migration_settings.btdb_port&&(this.item.migration_settings.btdb_host=t.substr(0,t.indexOf(":")),this.item.migration_settings.btdb_port=t.substr(t.indexOf(":")+1))},testConnection:function(){var t=this;this.isProcessing=!0,axios.get("/api/v1/admin/auth/testMigrationConnection/"+this.migrationType).then((function(e){e.data.db_connected?(t.dbConnected=!0,t.licensenum=e.data.licensenum,t.locationsFound=e.data.found_locations||[],1==t.locationsFound.length&&(t.item.migration_settings.btdb_location_id=t.locationsFound[0].id),e.data.other_locations&&e.data.other_locations.length>0&&(t.foundOtherLocations=e.data.other_locations||[])):t.dbConnected=!1,t.isProcessing=!1})).catch((function(e){t.dbConnected=!1,t.locationsFound=[],t.isProcessing=!1,t.$announcer(e.response)}))},startMigration:function(){var t=this;this.isSending=!0,axios.post("/api/v1/admin/auth/startMigration/"+this.migrationType,{location:this.item}).then((function(e){t.isSending=!1,t.$announcer(e),t.$router.push("/admin/dashboard")})).catch((function(e){t.isSending=!1,t.$announcer(e.response)}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},isReady:function(){return!!(this.item||{}).migration_settings&&!!(this.dbConnected&&this.locationsFound.length&&this.item.migration_settings.backfill&&this.item.migration_settings.btdb_location_id)},dbLinkFormfilledOut:function(){return this.item.migration_settings.btdb_host&&this.item.migration_settings.btdb_port&&this.item.migration_settings.btdb_dbname&&this.item.migration_settings.btdb_schema&&this.item.migration_settings.btdb_username&&this.item.migration_settings.btdb_password}},watch:{schema:function(t,e){t&&this.loadProfile()},item:{handler:function(t,e){this.itemState=e?"save changes":t.id?"save":"create"},deep:!0}}},o=(i("5pIZ"),i("KHd+")),c=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item&&t.schema?i("div",[i("form",{on:{change:function(e){return t.autoSave()}}},[i("div",{staticClass:"drsection-header"},[i("h5",[t._v("Step 1: Choose Link Source\n                    "),t.dbConnected?i("span",{staticClass:"float-right small"},[i("i",{staticClass:"hotbox-icon hotbox-icon-g-check show-green"}),t._v(" "+t._s(t._f("renderValue")(t.migrationType,t.schema.form.migration_prompt.values))+" Confirmed.")]):t._e()])]),t._v(" "),i("transition",{attrs:{name:"hb-slide"}},[t.dbConnected?t._e():i("div",[i("div",{staticClass:"drsection-content mb-0"},[i("form-select",{attrs:{schema:t.schema.form.migration_prompt},model:{value:t.migrationType,callback:function(e){t.migrationType=e},expression:"migrationType"}})],1),t._v(" "),i("transition",{attrs:{name:"hb-slide"}},[t.dbConnected?t._e():i("form-sectionalobject",{staticClass:"form-group-list mb-4",attrs:{formData:t.item,schema:t.schema.form.migration_settings,scoped:t.migrationType},model:{value:t.item.migration_settings,callback:function(e){t.$set(t.item,"migration_settings",e)},expression:"item.migration_settings"}})],1),t._v(" "),i("div",{staticClass:"col-12 text-center"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.autoSave(!0)}}}),t._v(" "),i("button",{staticClass:"btn btn-md btn-info",on:{click:function(e){return e.preventDefault(),t.testConnection()}}},[i("spinner",{staticClass:"float-left",attrs:{isProcessing:t.isProcessing,isFullScreen:!1,isLine:!0,spinnerWidth:25}}),t._v("\n                     Test Connection & Continue")],1)],1)],1)]),t._v(" "),i("div",{staticClass:"drsection-header"},[i("h5",[t._v("Step 2: Confirm Options "),t.isReady?i("span",{staticClass:"float-right small"},[i("i",{staticClass:"hotbox-icon hotbox-icon-g-check show-green"}),t._v(" Options Confirmed.")]):t._e()])]),t._v(" "),t.locationsFound.length?i("div",{staticClass:"form-group migration-options ml-3 mt-2 mb-3"},[i("div",{staticClass:"form-group col-12 mb-1 mt-1"},[i("label",[i("strong",[t._v("License Number:")]),t._v(" "+t._s(t.licensenum))])]),t._v(" "),i("form-select",{staticClass:"col-sm-6 mt-2 mb-2",attrs:{schema:Object.assign({},t.schema.form.migration_location_id,{values:t.locationsFound})},model:{value:t.item.migration_settings.btdb_location_id,callback:function(e){t.$set(t.item.migration_settings,"btdb_location_id",e)},expression:"item.migration_settings.btdb_location_id"}}),t._v(" "),t.foundOtherLocations?i("form-multiselect",{staticClass:"col-sm-6 mt-2 mb-3",attrs:{schema:Object.assign({},t.schema.form.migration_associated_licensenums,{values:t.foundOtherLocations})},model:{value:t.item.migration_settings.btdb_associated_licensenums,callback:function(e){t.$set(t.item.migration_settings,"btdb_associated_licensenums",e)},expression:"item.migration_settings.btdb_associated_licensenums"}}):t._e(),t._v(" "),i("form-datetime",{staticClass:"col-12 col-sm-4 mt-3 mb-4",attrs:{schema:t.schema.form.migration_backfill_date},model:{value:t.item.migration_settings.backfill,callback:function(e){t.$set(t.item.migration_settings,"backfill",e)},expression:"item.migration_settings.backfill"}})],1):t._e(),t._v(" "),t.dbConnected&&!t.locationsFound.length?i("h5",{staticClass:"w-100 text-center"},[t._v("Location Not Found")]):t._e(),t._v(" "),t._m(0),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[t.dbConnected?i("button",{staticClass:"btn btn-lg btn-primary",attrs:{disabled:!t.isReady},on:{click:function(e){return e.preventDefault(),t.startMigration()}}},[i("spinner",{staticClass:"float-left",attrs:{isProcessing:t.isSending,isFullScreen:!1,isLine:!0,spinnerWidth:25}}),t._v("\n                     Start Migration\n                ")],1):t._e()]),t._v(" "),t.schema.lang.migrate_comment?i("div",{staticClass:"col-12 d-flex justify-content-center"},[i("div",{staticClass:"col-sm-10 text-center mt-4 mb-4"},[i("div",{staticClass:"block-announce info"},[t._m(1),t._v(" "),i("p",[t._v(t._s(t.schema.lang.migrate_comment))])])])]):t._e()],1)]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"drsection-header mt-2"},[e("h5",{staticClass:"mt-2"},[this._v("Step 3: Start Migration Process..")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("i",{staticClass:"hotbox-icon hotbox-icon-f-comment"}),this._v(" A Comment on Migrating..")])}],!1,null,null,null);e.default=c.exports},SQkT:function(t,e,i){"use strict";i.r(e);var a=i("o0o1"),s=i.n(a),n=i("swh3");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c={props:{module:{type:String,default:"auth"},model:{type:String,default:"Addressbook"},schema:{type:Object,default:function(){}},ids:{type:Array,default:function(){}},focus:{type:String,default:"edit"}},data:function(){return{tab:this.focus,batch:null,batch_ids:this.ids,batchSortBy:null,batchSortDesc:!1,batchState:"update",isLoading:!1}},components:{},mounted:function(){this.getBatchData()},methods:{getBatchData:function(){var t=this;this.isLoading=!0,axios.get("/api/v1/"+this.schema.meta.resource+"/batch?batch_ids="+this.batch_ids.join(",")).then((function(e){t.batch=e.data,t.isLoading=!1})).catch((function(e){t.isLoading=!1,t.$announcer(e.response),t.$emit("refresh")}))},saveBatchData:function(t){var e=this;this.$validator.validateAll().then((function(i){if(i){e.batchState="saving..";var a=null;a="data"==t?e.batch.map((function(t){return Object.keys(t).reduce((function(i,a){return-1!==Object.keys(e.batchFields).indexOf(a)||"id"==a?function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},i,o({},a,t[a])):i}),{})})):e.batch_ids,axios.post("/api/v1/"+e.schema.meta.resource+"/batch/"+e.tab,{batch:a}).then((function(t){t.data.schema&&e.$store.commit(e.module+"/setSchema",{data:t.data.schema,key:e.model.toLowerCase()+"Schema"}),e.batchState="saved",e.$announcer(t),e.$emit("refresh")})).catch((function(t){e.batchState="(re)update",e.$announcer(t.response)}))}else e.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}})}))},batchSort:function(t){this.batchSortBy=t,this.batchSortDesc=!this.batchSortDesc,this.sorter(this.batch,this.batchSortDesc,this.batchSortBy)},batchOverride:function(t,e){this.batch=this.batch.map((function(i){return i[t]=e,i}))},toggleBatchId:function(t,e){e.target.checked?-1===this.batch_ids.indexOf(t)&&this.batch_ids.push(t):this.batch_ids.splice(this.batch_ids.indexOf(t),1)}},computed:{batchFields:function(){var t=this;return Object.keys(this.schema.form).filter((function(e){return!0===t.schema.form[e].batchable})).reduce((function(e,i){return e[i]=t.schema.form[i],e[i].override=null,e}),{})}},watch:{batch:{handler:function(t,e){this.batchState=e?"update changes":"update"},deep:!0},batch_ids:function(){this.$emit("update:ids",this.batch_ids)}}},l=i("KHd+"),d=Object(l.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.schema&&t.batch?i("div",{staticClass:"col-12"},[i("form",{staticClass:"modal-form"},[i("fieldset",[t.batch&&t.schema?i("div",{staticClass:"col-12"},[i("div",{staticClass:"nav-tabs-header mb-4"},[i("ul",{staticClass:"nav nav-tabs nav-tabs-custom"},[i("li",{staticClass:"nav-link",class:{active:"edit"==t.tab}},[i("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tab="edit"}}},[t._v("Batch Edit")])]),t._v(" "),i("li",{staticClass:"nav-link",class:{active:"archive"==t.tab}},[i("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tab="archive"}}},[t._v("Batch Archive")])])])]),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},["edit"==t.tab?i("div",[i("table",{staticClass:"table b-table",attrs:{role:"table"}},[i("thead",[i("tr",[i("th",{attrs:{valign:"top"}},[t._v("Item")]),t._v(" "),t._l(t.batchFields,(function(e,a){return i("th",[i("span",{staticClass:"small"},[t._v("Override "+t._s(e.title))]),t._v(" "),i("i",{staticClass:"float-right",class:{"fas fa-sort show-opaque":t.batchSortBy!=a,"fas fa-sort-amount-down":t.batchSortBy==a&&!1===t.batchSortDesc,"fas fa-sort-amount-up":t.batchSortBy==a&&!0===t.batchSortDesc},on:{click:function(e){return t.batchSort(a)}}}),i("br"),t._v(" "),"boolean"==e.type?i("form-boolean",{attrs:{declared:t.batchFields[a].override,schema:e,skipValidation:!0,hideLabel:!0},on:{input:function(e){t.batchFields[a].override=e,t.batchOverride(a,e)}}}):t._e(),t._v(" "),"text"==e.type?i("form-text",{attrs:{schema:e,hideLabel:!0,skipValidation:!0},on:{input:function(e){return t.batchOverride(a,t.batchFields[a].override)}},model:{value:t.batchFields[a].override,callback:function(e){t.$set(t.batchFields[a],"override",e)},expression:"batchFields[fkey].override"}}):t._e(),t._v(" "),"select"==e.type?i("form-simpleselect",{attrs:{schema:e,hideLabel:!0,skipValidation:!0},on:{input:function(e){return t.batchOverride(a,t.batchFields[a].override)}},model:{value:t.batchFields[a].override,callback:function(e){t.$set(t.batchFields[a],"override",e)},expression:"batchFields[fkey].override"}}):t._e()],1)}))],2)]),t._v(" "),i("tbody",t._l(t.batch,(function(e,a){return i("tr",[i("td",[t._v(t._s(e.name)),i("br"),i("span",{staticClass:"small"},[t._v(t._s(e.address1)),i("br"),t._v(t._s(e.city)+", "+t._s(e.region)+" "+t._s(e.country))])]),t._v(" "),t._l(t.batchFields,(function(a,s){return i("td",["boolean"==a.type?i("form-boolean",{attrs:{declared:e[s],schema:a,hideLabel:!0},on:{input:function(t){e[s]=t}}}):t._e(),t._v(" "),"text"==a.type?i("form-text",{attrs:{schema:a,hideLabel:!0},model:{value:e[s],callback:function(i){t.$set(e,s,i)},expression:"item[fkey]"}}):t._e(),t._v(" "),"select"==a.type?i("form-simpleselect",{attrs:{schema:a,hideLabel:!0},model:{value:e[s],callback:function(i){t.$set(e,s,i)},expression:"item[fkey]"}}):t._e()],1)}))],2)})),0)]),t._v(" "),i("div",{staticClass:"col-12 clearfix mt-2 text-center"},[i("auto-save",{attrs:{type:"save",state:t.batchState},on:{autoSave:function(e){return t.saveBatchData("data")}}}),t._v(" "),i("a",{staticClass:"btn btn-md btn-light",class:{"btn-light":"update"==t.batchState,"btn-warning":"update"!=t.batchState},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"default",void 0,e.key,void 0)?null:t.getBatchData()}}},[t._v("Restore.")])],1)]):t._e()]),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},["archive"==t.tab?i("div",[i("div",{staticClass:"block-announce warning mt-4 mb-4"},[i("p",{staticClass:"title"},[i("i",{staticClass:"fal fa-megaphone show-yellow"}),t._v(" Are you Sure?..")]),t._v(" "),i("p",[t._v("This will remove from any view or report, but would still be used if linked to anything.  Please confirm these are the addresses you would like to archive.")])]),t._v(" "),i("table",{staticClass:"table b-table table-striped",attrs:{role:"table"}},[i("thead",[i("tr",[i("th",{attrs:{width:"90%"}},[t._v("Item")]),t._v(" "),i("th",{attrs:{width:"10%"}},[t._v("Confirm")])])]),t._v(" "),i("tbody",t._l(t.batch,(function(e,a){return i("tr",{class:{"table-success":t.inSet(e.id,t.batch_ids)}},[i("td",{attrs:{width:"90%"}},[t._v(t._s(e.name)+" - "+t._s(e.address1)+" - "+t._s(e.city)+", "+t._s(e.region)+" "+t._s(e.country))]),t._v(" "),i("td",{attrs:{width:"10%",valign:"top"}},[i("label",{staticClass:"custom-control custom-checkbox"},[i("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",disabled:!1},domProps:{checked:t.inSet(e.id,t.batch_ids)},on:{click:function(i){return t.toggleBatchId(e.id,i)}}}),i("span",{staticClass:"custom-control-indicator"})])])])})),0)]),t._v(" "),i("div",{staticClass:"col-12 clearfix mt-2 text-center"},[i("auto-save",{attrs:{type:"save",state:t.batchState},on:{autoSave:function(e){return t.saveBatchData("list")}}}),t._v(" "),i("a",{staticClass:"btn btn-md btn-light",class:{"btn-light":"update"==t.batchState,"btn-warning":"update"!=t.batchState},on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"default",void 0,e.key,void 0)?null:t.$emit("refresh")}}},[t._v("Cancel.")])],1)]):t._e()])],1):i("div",{staticClass:"no-content-block"},[i("loading",{attrs:{display:!0,type:"loadModal"}})],1)])])]):i("div",{staticClass:"no-content-block"},[i("loading",{attrs:{display:!t.schema,type:"loadModal"}})],1)}),[],!1,null,null,null).exports,u=i("LvDl"),m=i.n(u);function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e,i,a,s,n,r){try{var o=t[n](r),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,s)}var v,g,b={props:{model:{type:String,default:"Addressbook"},module:{type:String,default:"auth"},filters:{type:Object,default:function(){}}},data:function(){return{isLoading:!1,isDownloading:!1,shouldReload:!1,gridData:null,gridSearch:null,gridPage:1,gridColumns:null,gridFilters:null,batchEditModal:!1,batchEditFocus:"edit",batchEditIds:[]}},components:{BatchEditModal:d},mounted:function(){this.gridSearch=this.$route.query.search||null,this.schema&&(this.setFilters(this.$route.params.focus),this.gridColumns=this.schema.meta.fields),this.restoreGridSettings()},methods:{fetchGrid:(v=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.schema&&this.gridFilters){t.next=4;break}return t.abrupt("return",!1);case 4:if(1!=this.isLoading){t.next=6;break}return t.abrupt("return",!1);case 6:return this.$store.commit(this.module+"/setSearch",{gridPage:null,gridFilters:null,options:{merge:!0}}),this.$store.commit(this.module+"/setSearch",{gridPage:this.gridPage,gridFilters:this.gridFilters,options:{merge:!0}}),this.isLoading=!0,t.next=11,(new n.a).setFilters(this.gridFilters.filter).params({search:this.gridSearch}).orderBy((this.gridFilters.orderDesc?"-":"")+this.gridFilters.sortBy).limit(this.gridFilters.pageLimit).page(this.gridPage).get();case 11:this.gridData=t.sent,this.mergeGridData(),this.isLoading=!1;case 14:case"end":return t.stop()}}),t,this)})),g=function(){var t=this,e=arguments;return new Promise((function(i,a){var s=v.apply(t,e);function n(t){p(s,i,a,n,r,"next",t)}function r(t){p(s,i,a,n,r,"throw",t)}n(void 0)}))},function(){return g.apply(this,arguments)}),searchGrid:m.a.debounce((function(t){this.gridPage=1,this.fetchGrid()}),500),setFilters:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.schema)return!1;this.gridFilters={pageLimit:50,sortBy:Object.keys(this.schema.filters).find((function(e){return"daterange"===t.schema.filters[e].type}))||"updated_at",orderDesc:!1,filter:Object.assign.apply(Object,[{}].concat(f(Object.keys(this.schema.filters).map((function(e){return h({},e,t.schema.filters[e].values.map((function(t){return t.id})))}))),[this.filters]))}},renderRowBg:function(t,e){return t&&this.inSet(t.id,this.batchEditIds)?"table-success":null},toggleBatchAll:function(t){t.target.checked?this.batchEditIds=this.gridData.data.map((function(t){return t.id})):this.batchEditIds=[]},toggleBatchId:function(t,e){e.target.checked?-1===this.batchEditIds.indexOf(t)&&this.batchEditIds.push(t):this.batchEditIds.splice(this.batchEditIds.indexOf(t),1)},confirmDelete:function(t){var e=this;this.$swal.fire({title:"Are you sure?",text:"This will Delete this "+this.model+" row.",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete row"}).then((function(i){i.value&&(e.isLoading=!0,new n.a({id:t}).delete().then((function(t){e.isLoading=!1,e.$store.dispatch(e.module+"/setSchemas",e.model.toLowerCase()),e.$announcer(t),e.fetchGrid()})).catch((function(t){e.isLoading=!1,e.$announcer(t.response)})))}))},downloadExport:function(t){var e=this;this.isDownloading=!0,axios({url:(new n.a).setFilters(this.gridFilters.filter).custom(this.schema.meta.resource+"/export/"+t).getUrl(),method:"GET",responseType:"blob"}).then((function(t){e.isDownloading=!1,e.downloadFile(t)})).catch((function(t){e.isDownloading=!1,e.$announcer(t.response)}))},refreshFromModal:function(t){this.batchEditModal=!this.batchEditModal,this.shouldReload=!0},restoreGridSettings:function(){var t=this.$store.state[this.module].search;t&&(t.gridSearch&&(this.gridSearch=t.gridSearch),t.gridPage&&(this.gridPage=t.gridPage),t.gridFilters&&(this.gridFilters=t.gridFilters),t.gridColumns&&(this.gridColumns=t.gridColumns))},mergeGridData:function(){var t=this;this.$store.state[this.module].search&&this.$store.state[this.module].search.gridData&&Array.isArray(this.gridData.data)&&this.$store.state[this.module].search.gridData.forEach((function(e){var i=t.gridData.data.findIndex((function(t){return t.id===e.id}));i>-1&&t.$set(t.gridData.data[i],"_showDetails",!0)}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},columnsVisible:function(){return this.gridColumns?this.gridColumns.filter((function(t){return!0===t.toggle||!t.hasOwnProperty("toggle")})):[]},isAllInBatch:function(){return!!this.gridData&&this.batchEditIds.length==this.gridData.data.length}},watch:{gridData:{handler:function(t,e){var i=t.data.filter((function(t){return t._showDetails})).map((function(t){return{id:t.id,_showDetails:t._showDetails}}));this.$store.commit(this.module+"/setSearch",{gridData:i,options:{merge:!0}})},deep:!0},gridColumns:{handler:function(){this.$store.commit(this.module+"/setSearch",{gridColumns:this.gridColumns,options:{merge:!0}})},deep:!0},gridFilters:{handler:function(t,e){this.gridFilters&&(e&&!this.isLoading&&(this.gridPage=1),this.fetchGrid())},deep:!0},gridPage:function(t,e){this.gridFilters&&this.fetchGrid()},gridSearch:function(){this.$store.commit(this.module+"/setSearch",{gridSearch:this.gridSearch,options:{merge:!0}})},schema:{handler:function(t,e){!e&&t?this.setFilters():m.a.isEqual(t.filters,e.filters)?1==this.shouldReload&&(this.fetchGrid(),this.shouldReload=!1):this.setFilters(),t&&!this.gridColumns&&(this.gridColumns=t.meta.fields)},deep:!0}}},_=Object(l.a)(b,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.schema?i("div",{staticClass:"col-12"},[i("form",[i("div",{staticClass:"table-filter-row"},[i("div",{staticClass:"filter-search",class:{active:t.gridSearch}},[i("div",{staticClass:"input-group"},[t._m(0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.gridSearch,expression:"gridSearch"}],staticClass:"form-control border-left-0",attrs:{type:"text",placeholder:t.schema.lang.searchPrompt||"Search Grid"},domProps:{value:t.gridSearch},on:{input:[function(e){e.target.composing||(t.gridSearch=e.target.value)},t.searchGrid],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchGrid(e))}}})])]),t._v(" "),t.gridFilters?i("div",{staticClass:"filters"},[t.gridData?i("filter-more",{attrs:{meta:t.gridData.meta,schema:t.schema,gridFilters:t.gridFilters,columns:t.gridColumns,isDownloading:t.isDownloading},on:{"update:gridFilters":function(e){t.gridFilters=e},"update:grid-filters":function(e){t.gridFilters=e},"update:columns":function(e){t.gridColumns=e},downloadExport:t.downloadExport}}):t._e(),t._v(" "),t._l(t.schema.filters,(function(e,a){return"wherein"==e.type?i("filter-in",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()})),t._v(" "),t._l(t.schema.filters,(function(e,a){return"daterange"==e.type?i("filter-date",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()}))],2):t._e()])]),t._v(" "),i("loading",{attrs:{display:t.isLoading,type:"loadGrid"}}),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},[t.schema&&t.gridFilters?i("b-table",{attrs:{striped:"",hover:"",id:t.model.toLowerCase()+"_table","primary-key":"id",items:t.gridData?t.gridData.data:[],fields:t.columnsVisible,busy:t.isLoading,"show-empty":!0,"sort-by":t.gridFilters.sortBy,"sort-desc":t.gridFilters.orderDesc,"no-local-sorting":!0,"no-local-filtering":!0,"per-page":0,tbodyTrClass:t.renderRowBg,responsive:"md",stacked:"sm"},on:{"update:busy":function(e){t.isLoading=e},"update:sortBy":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.gridFilters,"orderDesc",e)},"update:sort-desc":function(e){return t.$set(t.gridFilters,"orderDesc",e)}},scopedSlots:t._u([t._l(t.schema.meta.fields,(function(e,a){return{key:"head(field.key)",fn:function(a){return[i("em",[e.icon?i("i",{class:e.icon}):t._e(),t._v(" "),e.description?i("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.description,expression:"field.description",modifiers:{hover:!0}}],staticClass:"hotbox-icon hotbox-icon-c-question",attrs:{title:e.name}}):t._e(),t._v(" "),"batch_ids"==e.key?i("span",[i("label",{staticClass:"custom-control custom-checkbox"},[i("input",{staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:t.isAllInBatch},on:{click:t.toggleBatchAll}}),i("span",{staticClass:"custom-control-indicator"})])]):i("span",[t._v(t._s(a.label))])])]}}})),{key:"cell(batch_ids)",fn:function(e){return[i("label",{staticClass:"custom-control custom-checkbox"},[i("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",disabled:!1},domProps:{checked:t.inSet(e.item.id,t.batchEditIds)},on:{click:function(i){return t.toggleBatchId(e.item.id,i)}}}),i("span",{staticClass:"custom-control-indicator"})])]}},{key:"cell(updated_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(actions)",fn:function(e){return[i("div",{staticClass:"dropdown"},[i("a",{attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"ti-more-alt"})]),t._v(" "),i("div",{staticClass:"dropdown-menu tight dropdown-menu-right"},[i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:t.model.toLowerCase()+"_edit",params:{id:e.item.id}},tag:"a"}},[i("i",{staticClass:"hotbox-icon hotbox-icon-pencil"}),t._v(" Edit "+t._s(t._f("ucwords")(t.model)))]),t._v(" "),i("a",{staticClass:"dropdown-item action-danger",on:{click:function(i){return t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-trash-round"}),t._v(" Delete "+t._s(t._f("ucwords")(t.model)))])],1)]),t._v(" "),e.item.contact_notes?i("i",{staticClass:"float-right mt-2",class:{"ti-angle-double-down":!e.detailsShowing,"ti-angle-double-up":e.detailsShowing},on:{click:function(t){return t.preventDefault(),e.toggleDetails(t)}}}):t._e()]}},{key:"row-details",fn:function(e){return[i("div",{staticClass:"block-announce info"},[i("p",{staticClass:"title"},[t._v("Contact Notes")]),t._v(" "),i("p",[t._v(t._s(e.item.contact_notes))])])]}},t.gridData?{key:"table-caption",fn:function(){return[t.gridData.data.length>0?i("div",[t.gridData.meta?i("span",[t._v("\n                        Showing "+t._s(t.gridData.meta.per_page*(t.gridPage-1)+1)+" to "+t._s(t.gridData.meta.per_page*t.gridPage<t.gridData.meta.total?t.gridData.meta.per_page*t.gridPage:t.gridData.meta.total)+" of "+t._s(t.gridData.meta.total)+" "+t._s(t.schema.lang.items?t.schema.lang.items:"Records")+"\n                    ")]):i("span",[t._v("Showing All "+t._s(t.schema.lang.items?t.schema.lang.items:"Records"))]),t._v(" "),i("div",{staticClass:"table-pager-footer"},[t.gridData.meta.total>0?i("b-pagination",{attrs:{"total-rows":t.gridData.meta.total,"per-page":t.gridData.meta.per_page,"aria-controls":"users_table"},model:{value:t.gridPage,callback:function(e){t.gridPage=e},expression:"gridPage"}}):t._e()],1)]):t._e()]},proxy:!0}:null,{key:"empty",fn:function(){return[t.isLoading?i("div",{staticClass:"h-100"},[t._v("Â ")]):i("div",[i("img",{attrs:{src:"/images/logo.png",alt:"No Results",width:"115"}}),t._v(" "),i("h4",[t._v("Hmm, There are currently no Results.")])])]},proxy:!0}],null,!0)}):t._e()],1),t._v(" "),i("div",{staticClass:"col-12 batch-block"},[i("i",{staticClass:"batch-icon"}),t._v(" With Selected: \n        "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.batchEditFocus,expression:"batchEditFocus"}],staticClass:"batch-sel",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.batchEditFocus=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"edit"}},[t._v("Bulk Edit")]),t._v(" "),i("option",{attrs:{value:"archive"}},[t._v("Archive")])]),t._v(" "),i("button",{staticClass:"btn btn-sm",class:{"btn-light":t.batchEditIds.length<=0,"btn-warning":t.batchEditIds.length>0},attrs:{disabled:!(t.batchEditIds.length>0)},on:{click:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"default",void 0,e.key,void 0))return null;t.batchEditModal=!t.batchEditModal}}},[t._v("Batch It!")])]),t._v(" "),i("b-modal",{ref:"batchEditModal",attrs:{centered:"",size:"lg","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.batchEditModal,callback:function(e){t.batchEditModal=e},expression:"batchEditModal"}},[i("template",{slot:"modal-header"},[i("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.batchEditModal=!t.batchEditModal}}}),t._v(" "),i("h5",{staticClass:"w-100 mb-0 text-center"},[t._v("Modify Batch of ("+t._s(t.batchEditIds.length)+") Items")])]),t._v(" "),t.batchEditModal?i("batch-edit-modal",{attrs:{focus:t.batchEditFocus,ids:t.batchEditIds,schema:t.schema},on:{"update:ids":function(e){t.batchEditIds=e},refresh:t.refreshFromModal}}):t._e(),t._v(" "),i("template",{slot:"modal-footer"},[i("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.batchEditModal=!t.batchEditModal}}},[t._v("Close")])])],2)],1):i("div",[i("loading",{attrs:{display:!t.schema,type:"loadPage"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("i",{staticClass:"hotbox-icon hotbox-icon-search-2"})])}],!1,null,null,null);e.default=_.exports},W72Y:function(t,e,i){"use strict";i.r(e);var a=i("o0o1"),s=i.n(a),n=i("A0QY"),r=i("LvDl"),o=i.n(r);function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t,e,i,a,s,n,r){try{var o=t[n](r),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,s)}var u,m,h={props:{model:{type:String,default:"Task"},module:{type:String,default:"auth"},filters:{type:Object,default:function(){}}},data:function(){return{isLoading:!1,isDownloading:!1,shouldReload:!1,gridData:null,gridSearch:null,gridPage:1,gridColumns:null,gridFilters:null,isSyncing:!1}},mounted:function(){this.gridSearch=this.$route.query.search||null,this.schema&&(this.setFilters(this.$route.params.focus),this.gridColumns=this.schema.meta.fields),this.restoreGridSettings()},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]},columnsVisible:function(){return this.gridColumns?this.gridColumns.filter((function(t){return!0===t.toggle||!t.hasOwnProperty("toggle")})):[]}},watch:{gridData:{handler:function(t,e){var i=t.data.filter((function(t){return t._showDetails})).map((function(t){return{id:t.id,_showDetails:t._showDetails}}));this.$store.commit(this.module+"/setSearch",{gridData:i,options:{merge:!0}})},deep:!0},gridFilters:{handler:function(t,e){this.gridFilters&&(e&&!this.isLoading&&(this.gridPage=1),this.fetchGrid())},deep:!0},gridPage:function(t,e){this.gridFilters&&this.fetchGrid()},schema:{handler:function(t,e){!e&&t?this.setFilters():o.a.isEqual(t.filters,e.filters)?1==this.shouldReload&&(this.fetchGrid(),this.shouldReload=!1):this.setFilters(),t&&!this.gridColumns&&(this.gridColumns=t.meta.fields)},deep:!0}},methods:{fetchGrid:(u=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.schema&&this.gridFilters){t.next=4;break}return t.abrupt("return",!1);case 4:if(1!=this.isLoading){t.next=6;break}return t.abrupt("return",!1);case 6:return this.$store.commit(this.module+"/setSearch",{gridPage:this.gridPage,options:{merge:!0}}),this.isLoading=!0,t.next=10,(new n.a).setFilters(this.gridFilters.filter).params({search:this.gridSearch}).orderBy((this.gridFilters.orderDesc?"-":"")+this.gridFilters.sortBy).limit(this.gridFilters.pageLimit).page(this.gridPage).get();case 10:this.gridData=t.sent,this.mergeGridData(),this.isLoading=!1;case 13:case"end":return t.stop()}}),t,this)})),m=function(){var t=this,e=arguments;return new Promise((function(i,a){var s=u.apply(t,e);function n(t){d(s,i,a,n,r,"next",t)}function r(t){d(s,i,a,n,r,"throw",t)}n(void 0)}))},function(){return m.apply(this,arguments)}),searchGrid:o.a.debounce((function(t){this.gridPage=1,this.fetchGrid()}),500),setFilters:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.schema)return!1;this.gridFilters={pageLimit:50,sortBy:Object.keys(this.schema.filters).find((function(e){return"daterange"===t.schema.filters[e].type}))||"updated_at",orderDesc:!1,filter:Object.assign.apply(Object,[{}].concat(l(Object.keys(this.schema.filters).map((function(e){return c({},e,t.schema.filters[e].values.map((function(t){return t.id})))}))),[this.filters]))}},renderAssigneeList:function(t){return t?t.map((function(t){return t.name})).join("<BR>"):"n/a"},confirmDelete:function(t){var e=this;this.$swal.fire({title:"Are you sure?",text:"This will Delete this "+this.model+" row.",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete row"}).then((function(i){i.value&&(e.isLoading=!0,new n.a({id:t}).delete().then((function(t){e.isLoading=!1,e.$store.dispatch(e.module+"/setSchemas",e.model.toLowerCase()),e.$announcer(t),e.fetchGrid()})).catch((function(t){e.isLoading=!1,e.$announcer(t.response)})))}))},downloadExport:function(t){var e=this;this.isDownloading=!0,axios({url:(new n.a).setFilters(this.gridFilters.filter).custom(this.schema.meta.resource+"/export/"+t).getUrl(),method:"GET",responseType:"blob"}).then((function(t){e.isDownloading=!1,e.downloadFile(t)})).catch((function(t){e.isDownloading=!1,e.$announcer(t.response)}))},restoreGridSettings:function(){this.$store.state[this.module].search&&this.$store.state[this.module].search.gridPage&&(this.gridPage=this.$store.state[this.module].search.gridPage,this.$store.commit(this.module+"/setSearch",{gridPage:null,options:{merge:!0}}))},mergeGridData:function(){var t=this;this.$store.state[this.module].search&&this.$store.state[this.module].search.gridData&&Array.isArray(this.gridData.data)&&this.$store.state[this.module].search.gridData.forEach((function(e){var i=t.gridData.data.findIndex((function(t){return t.id===e.id}));i>-1&&t.$set(t.gridData.data[i],"_showDetails",!0)}))}}},f=(i("nraX"),i("KHd+")),p=Object(f.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.schema?i("div",{staticClass:"col-12"},[i("form",[i("div",{staticClass:"table-filter-row"},[i("div",{staticClass:"filter-search",class:{active:t.gridSearch}},[i("div",{staticClass:"input-group"},[t._m(0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.gridSearch,expression:"gridSearch"}],staticClass:"form-control border-left-0",attrs:{type:"text",placeholder:t.schema.lang.searchPrompt||"Search Grid"},domProps:{value:t.gridSearch},on:{input:[function(e){e.target.composing||(t.gridSearch=e.target.value)},t.searchGrid],keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.searchGrid(e))}}})])]),t._v(" "),t.gridFilters?i("div",{staticClass:"filters"},[t.gridData?i("filter-more",{attrs:{meta:t.gridData.meta,schema:t.schema,gridFilters:t.gridFilters,columns:t.gridColumns,isDownloading:t.isDownloading},on:{"update:gridFilters":function(e){t.gridFilters=e},"update:grid-filters":function(e){t.gridFilters=e},"update:columns":function(e){t.gridColumns=e},downloadExport:t.downloadExport}}):t._e(),t._v(" "),t._l(t.schema.filters,(function(e,a){return"wherein"==e.type?i("filter-in",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()})),t._v(" "),t._l(t.schema.filters,(function(e,a){return"tabular"==e.type?i("filter-tabs",{key:a,attrs:{schema:e,filter:t.gridFilters.filter[a]},on:{update:function(e){t.gridFilters.filter[a]=e}}}):t._e()}))],2):t._e()])]),t._v(" "),i("loading",{attrs:{display:t.isLoading,type:"loadGrid"}}),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},[t.schema&&t.gridFilters?i("b-table",{attrs:{striped:"",hover:"",id:"tasks_table","primary-key":"id",items:t.gridData?t.gridData.data:[],fields:t.columnsVisible,busy:t.isLoading,"show-empty":!0,"sort-by":t.gridFilters.sortBy,"sort-desc":t.gridFilters.orderDesc,"no-local-sorting":!0,"no-local-filtering":!0,"per-page":0,tbodyTrClass:"grid-table-rows",responsive:"md",stacked:"sm"},on:{"update:busy":function(e){t.isLoading=e},"update:sortBy":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.gridFilters,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.gridFilters,"orderDesc",e)},"update:sort-desc":function(e){return t.$set(t.gridFilters,"orderDesc",e)}},scopedSlots:t._u([{key:"cell(due_date)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(created_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(updated_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("localDate")(e.value))+"\n            ")]}},{key:"cell(location_id)",fn:function(e){return[t._v("\n                "+t._s(e.item.location.name)+"\n            ")]}},{key:"cell(priority)",fn:function(e){return[t._v("\n                "+t._s(e.item.priority_name)+"\n            ")]}},{key:"cell(assignees)",fn:function(e){return t._l(e.item.assignees,(function(e){return i("span",[t._v("\n                 "+t._s(e.name)),i("br")])}))}},{key:"cell(actions)",fn:function(e){return[i("div",{staticClass:"dropdown"},[i("a",{attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"ti-more-alt"})]),t._v(" "),i("div",{staticClass:"dropdown-menu tight dropdown-menu-right"},[i("router-link",{staticClass:"dropdown-item",attrs:{to:{name:t.model.toLowerCase()+"_edit",params:{id:e.item.id}},tag:"a"}},[i("i",{staticClass:"hotbox-icon hotbox-icon-pencil"}),t._v(" Manage "+t._s(t._f("ucwords")(t.model)))]),t._v(" "),e.item.created_by.id===t.$store.state.user.id?i("a",{staticClass:"dropdown-item action-danger",attrs:{href:""},on:{click:function(i){return i.preventDefault(),t.confirmDelete(e.item.id)}}},[i("i",{staticClass:"hotbox-icon hotbox-icon-trash-round"}),t._v(" Archive "+t._s(t._f("ucwords")(t.model)))]):t._e()],1)])]}},t.gridData?{key:"table-caption",fn:function(){return[t.gridData.data.length>0?i("div",{staticClass:"paginate-foot"},[t.gridData.meta?i("span",[t._v("\n                        Showing "+t._s(t.gridData.meta.per_page*(t.gridPage-1)+1)+" to "+t._s(t.gridData.meta.per_page*t.gridPage<t.gridData.meta.total?t.gridData.meta.per_page*t.gridPage:t.gridData.meta.total)+" of "+t._s(t.gridData.meta.total)+" "+t._s(t.schema.lang.items?t.schema.lang.items:"Records")+"\n                    ")]):i("span",[t._v("Showing All "+t._s(t.schema.lang.items?t.schema.lang.items:"Records"))]),t._v(" "),i("div",{staticClass:"table-pager-footer"},[t.gridData.meta.total>0?i("b-pagination",{attrs:{"total-rows":t.gridData.meta.total,"per-page":t.gridData.meta.per_page,"aria-controls":"tasks_table"},model:{value:t.gridPage,callback:function(e){t.gridPage=e},expression:"gridPage"}}):t._e()],1)]):t._e()]},proxy:!0}:null,{key:"empty",fn:function(){return[t.isLoading?i("div",{staticClass:"h-100"},[t._v("Â ")]):i("div",[i("img",{attrs:{src:"/images/logo.png",alt:"No Results",width:"115"}}),t._v(" "),i("h4",[t._v("Hmm, There are currently no Results.")])])]},proxy:!0}],null,!0)}):t._e()],1)],1):i("div",[i("loading",{attrs:{display:!t.schema,type:"loadPage"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("i",{staticClass:"hotbox-icon hotbox-icon-search-3"})])}],!1,null,null,null);e.default=p.exports},XgQO:function(t,e,i){"use strict";i.r(e);var a=i("o28V"),s={props:{module:{type:String,default:"auth"}},data:function(){return{editModal:!1,editRef:null}},components:{EditModal:a.a},mounted:function(){},methods:{loadEditModal:function(t){this.editRef=t,this.editModal=!this.editModal}},computed:{section:function(){return this.$store.state.sections[this.$store.state.disp.section]},isEditPage:function(){return-1!==this.$route.name.indexOf("_")&&-1===this.$route.name.indexOf("_index")},indexView:function(){var t=this.isEditPage?this.$route.name.substr(0,this.$route.name.indexOf("_")):this.$route.name;return this.section&&this.section.views?this.section.views.find((function(e){return e.name==t})):null}},watch:{$route:function(t,e){}}},n=i("KHd+"),r=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row gutters"},[t.section?i("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-12"},[i("div",{staticClass:"card top-blue-bdr"},[i("div",{staticClass:"card-header"},[t.indexView?i("div",{staticClass:"w-100 mb-2"},[t.indexView.with_add&&!t.isEditPage?i("router-link",{staticClass:"float-right mt-0 mb-3 mr-4",attrs:{to:{name:t.indexView.name+"_create"},tag:"a"}},[i("span",{staticClass:"btn-label"},[i("i",{staticClass:"hotbox-icon hotbox-icon-e-add"})]),t._v(" New "+t._s(t.indexView.name)+"\n                    ")]):t._e(),t._v(" "),t.$store.getters.userCan("Store Admin Update")&&"location"==t.indexView.name?i("router-link",{staticClass:"float-right mr-2 btn btn-sm btn-round btn-primary",attrs:{to:{name:"migration"},tag:"a"}},[t._v("Migrate to Hotbox")]):t._e(),t._v(" "),t.$store.getters.userCan("Staff Update")&&"location"==t.indexView.name?i("a",{staticClass:"float-right mr-2 btn btn-sm btn-round btn-light",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.loadEditModal(t.$store.state.disp.location)}}},[t._v("Manage Location Personnel Â»")]):t._e(),t._v(" "),"location"==t.$route.name?i("h5",[i("i",{class:t.indexView.icon}),t._v(" For "+t._s(t.$store.state.user.location.name))]):t._e()],1):t._e(),t._v(" "),t.$route.name==t.section.module?i("div",[i("h5",[t._v(t._s(t.section.name)+" Menu")]),t._v(" "),i("div",{staticClass:"row justify-content-center"},t._l(t.section.views,(function(e,a){return i("div",{staticClass:"card card-stats col-sm-3 mx-3 mt-2"},[i("div",{staticClass:"statistics"},[i("div",{staticClass:"info"},[i("div",{staticClass:"icon icon-primary",staticStyle:{"font-size":"2em"}},[i("i",{class:e.icon||"hotbox-icon hotbox-icon-c-pulse"})]),t._v(" "),i("h6",{staticClass:"stats-title"},[i("router-link",{attrs:{to:{name:e.name,params:{}},tag:"a"}},[t._v(t._s(e.title)+" Â»")])],1)])])])})),0)]):t._e()]),t._v(" "),i("div",{staticClass:"card-body"},[t.indexView?i("div",[t.$store.getters.userCan(t.indexView.can_view)?i("router-view"):t._e()],1):t._e(),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"stats"},[t.isEditPage?t.indexView?i("router-link",{staticClass:"head-link",attrs:{to:{name:t.indexView.name},tag:"a"}},[i("i",{staticClass:"ti-angle-left"}),t._v(" Back to "+t._s(t.indexView.title||t.indexView.tabname)+" Index")]):t._e():i("router-link",{attrs:{to:{name:"location_index"},tag:"a"}},[i("i",{staticClass:"ti-angle-left"}),t._v(" Back to Dashboard")])],1)])]),t._v(" "),i("b-modal",{ref:"editModal",attrs:{centered:"","no-enforce-focus":!0,size:"lg","header-bg-variant":"light","header-text-variant":"primary"},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[i("template",{slot:"modal-header"},[i("i",{staticClass:"modal-top-close fal ti-close",on:{click:function(e){t.editModal=!t.editModal}}}),t._v(" "),i("h5",{staticClass:"w-100 mb-0 text-center"},[t._v(t._s(t.$store.state.user.location.name)+" Manager")])]),t._v(" "),t.editModal?i("edit-modal",{attrs:{id:t.editRef,type:"links"},on:{refresh:function(e){t.editModal=!t.editModal}}}):t._e(),t._v(" "),i("template",{slot:"modal-footer"},[i("span",{staticClass:"btn-label btn-sm btn-light float-right",on:{click:function(e){t.editModal=!t.editModal}}},[t._v("Close")])])],2)],1):i("div",{staticClass:"col-12 text-center mt-4"})])}),[],!1,null,null,null);e.default=r.exports},YZah:function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",(function(){return c}));var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,r(e).apply(this,arguments))}var i,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),i=e,(a=[{key:"resource",value:function(){return"admin/auth/location"}},{key:"primaryKey",value:function(){return"id"}}])&&s(i.prototype,a),c&&s(i,c),e}(i("YA5Z").a)},kOcM:function(t,e,i){"use strict";i.r(e);var a=i("o0o1"),s=i.n(a),n=i("83d4");function r(t,e,i,a,s,n,r){try{var o=t[n](r),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,s)}var o,c,l={props:{model:{type:String,default:"User"},module:{type:String,default:"auth"}},data:function(){return{id:0,item:null,itemState:"create"}},components:{},mounted:(o=s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLoading=!0,this.schema){t.next=4;break}return t.next=4,this.$store.dispatch(this.module+"/setSchemas",this.model.toLowerCase());case 4:this.item=(new n.a).withDefaults(this.schema),this.isLoading=!1;case 6:case"end":return t.stop()}}),t,this)})),c=function(){var t=this,e=arguments;return new Promise((function(i,a){var s=o.apply(t,e);function n(t){r(s,i,a,n,c,"next",t)}function c(t){r(s,i,a,n,c,"throw",t)}n(void 0)}))},function(){return c.apply(this,arguments)}),methods:{createItem:function(){var t=this;this.$validator.validateAll().then((function(e){e?(t.itemState="saving..",t.item.save().then((function(e){t.$announcer({status:200,data:{message:"Your "+t.model+" data has been Saved!"}}),e.schema&&t.$store.commit(t.module+"/setSchema",{data:e.schema,key:t.model.toLowerCase()+"Schema"}),t.itemState="created",t.$router.push({name:"user"})})).catch((function(e){t.$announcer(e.response),t.itemState="resave"}))):t.$announcer({status:422,data:{message:"Missing / Invalid input - Please check form above and try again."}})}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}},watch:{}},d=i("KHd+"),u=Object(d.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item&&t.schema?i("div",{staticClass:"col-12"},[i("form",{on:{submit:function(e){return t.createItem()}}},[i("fieldset",[t._m(0),t._v(" "),i("div",{staticClass:"form-group-list mt-4"},[t._m(1),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.email,expression:"item.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"val-danger-input":t.errors.has("email")},attrs:{type:"text",name:"email",placeholder:"User Email"},domProps:{value:t.item.email},on:{input:function(e){e.target.composing||t.$set(t.item,"email",e.target.value)}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("email"),expression:"errors.has('email')"}],staticClass:"form-text text-muted val-danger-text"},[t._v(t._s(t.errors.first("email")))])]),t._v(" "),i("div",{staticClass:"form-group-list mt-4"},[t._m(2),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.password,expression:"item.password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"password",staticClass:"form-control",class:{"val-danger-input":t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"New Password"},domProps:{value:t.item.password},on:{input:function(e){e.target.composing||t.$set(t.item,"password",e.target.value)}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password"),expression:"errors.has('password')"}],staticClass:"form-text text-muted val-danger-text"},[t._v(t._s(t.errors.first("password")))])]),t._v(" "),i("div",{staticClass:"form-group-list mt-4 mb-4"},[t._m(3),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.item.password_confirmation,expression:"item.password_confirmation"},{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],staticClass:"form-control",class:{"val-danger-input":t.errors.has("password")},attrs:{type:"password",name:"password_confirmation",placeholder:"Confirm New Password*","data-vv-as":"password"},domProps:{value:t.item.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.item,"password_confirmation",e.target.value)}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("password_confirmation"),expression:"errors.has('password_confirmation')"}],staticClass:"form-text text-muted val-danger-text"},[t._v(t._s(t.errors.first("password_confirmation")))])]),t._v(" "),t._l(t.schema.form,(function(e,a){return i("div",{staticClass:"form-group-list mt-4 clearfix"},["boolean"==e.type?i("form-boolean",{attrs:{declared:t.item[a],schema:e},on:{input:function(e){t.item[a]=e}}}):t._e(),t._v(" "),"text"==e.type?i("form-text",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"select"==e.type?i("form-select",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"multiselect"==e.type?i("form-multiselect",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"checklist"==e.type?i("form-checklist",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"pending_activation"==t.item.status&&"status"==e.name?i("div",{staticClass:"block-announce warning"},[t._m(4,!0),t._v(" "),i("p",[t._v("Upon creation, we will email your user an activation link.  Once clicked, they may login with their credentials above.")])]):t._e()],1)})),t._v(" "),i("div",{staticClass:"col-12 clearfix mt-4"},[i("div",{staticClass:"drsection-content"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.createItem()}}}),t._v(" "),i("a",{staticClass:"btn btn-sm btn-light",on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"default",void 0,e.key,void 0)?null:t.$router.go(-1)}}},[t._v("Return.")])],1)])],2)])]):i("div",[i("loading",{attrs:{display:!t.schema||!t.item,type:"loadAll"}})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",[this._v("\n                Add a new Staff Member"),e("br"),this._v(" "),e("span",{staticClass:"small"},[this._v("Location User")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"email"}},[this._v("User Email (used as username/login) "),e("span",{staticClass:"show-red small"},[this._v(" *(Required)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"password"}},[this._v("Users Password (they, or you, can change this at any point) "),e("span",{staticClass:"show-red small"},[this._v(" *(Required)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"password"}},[this._v("Confirm above Password "),e("span",{staticClass:"show-red small"},[this._v(" *(Required)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("i",{staticClass:"fal fa-envelope-open-text"}),this._v(" User will have to Activate.")])}],!1,null,null,null);e.default=u.exports},lj6E:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,"\n.migration-options .vdp-datepicker__calendar {\n    left: 0px;\n}\n    \n",""])},nraX:function(t,e,i){"use strict";var a=i("FnUm");i.n(a).a},o28V:function(t,e,i){"use strict";var a=i("o0o1"),s=i.n(a),n=i("yxfT");function r(t,e,i,a,s,n,r){try{var o=t[n](r),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,s)}var o,c,l={props:{model:{type:String,default:"Locations"},module:{type:String,default:"auth"},id:{type:[String,Number],default:null},type:{type:String,default:"location"}},data:function(){return{item:null,tab:this.type,itemState:"update",isLoading:!1,isDownloading:!1,subSel:null,chargeSel:null,form:{update_status:null,update_message:null,update_subscription:null,update_subscription_plan:null,update_subscription_coupon:null,update_subscription_quantity:0,update_subscription_trialdays:0,update_subscription_action:"update",update_transaction:null,update_transaction_amount:0,update_transaction_descriptor:null,update_balance_amount:0,update_balance_descriptor:null,update_user_ids:[],update_app_ids:[]}}},components:{},mounted:(o=s.a.mark((function t(){var e=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.$store.dispatch(this.module+"/setSchemas",this.model.toLowerCase());case 3:n.a.find(this.id).then((function(t){e.item=new n.a(t),e.form.update_status=e.item.status,e.isLoading=!1})).catch((function(t){e.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}}),e.$emit("refresh")}));case 4:case"end":return t.stop()}}),t,this)})),c=function(){var t=this,e=arguments;return new Promise((function(i,a){var s=o.apply(t,e);function n(t){r(s,i,a,n,c,"next",t)}function c(t){r(s,i,a,n,c,"throw",t)}n(void 0)}))},function(){return c.apply(this,arguments)}),methods:{autoSave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"status",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update";this.$swal.fire({title:"Please Confirm Modification",input:"password",inputValue:null,inputAttributes:{maxlength:4,autocapitalize:"off",autocorrect:"off"},inputPlaceholder:"Input AdminPin",type:"warning",showCancelButton:!0,confirmButtonText:"Proceed.",inputValidator:function(e){return new Promise((function(i){axios.post("/api/v1/admin/auth/pin",{location_id:t.item.id,pin:e}).then((function(e){t.$announcer(e),i()})).catch((function(e){t.$announcer(e.response),i("The PIN you have entered is not valid.")}))}))}}).then((function(a){a.value&&t.$validator.validateAll().then((function(a){a?(t.itemState="saving..",t.form.update_subscription_action=i,axios.post("/api/v1/admin/auth/modify/"+t.item.id+"/"+e,t.form).then((function(e){t.itemState="saved",t.$store.dispatch(t.module+"/setSchemas",t.model.toLowerCase()),t.$emit("refresh"),t.$announcer(e)})).catch((function(e){t.itemState="resave",t.$announcer(e.response)}))):t.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}})}))}))},toggleLink:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"update_user_ids";e&&this.form[i]?-1===this.form[i].indexOf(t)&&this.form[i].push(t):this.form[i].splice(this.form[i].indexOf(t),1)}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}},watch:{"form.update_subscription":function(t,e){var i=this;t&&this.item&&(this.subSel=this.item.services.find((function(t){return t.id==i.form.update_subscription}))),this.subSel&&(this.form.update_subscription_plan=this.subSel.stripe_plan,this.form.update_subscription_quantity=this.subSel.quantity||0,this.form.update_subscription_coupon=this.subSel.stripe_coupon,this.form.update_subscription_trialdays=this.subSel.trial_ends_at?this.$moment.utc(this.subSel.trial_ends_at).diff(this.$moment.utc(),"days"):null)},"form.update_transaction":function(t,e){var i=this;t&&this.item&&(this.chargeSel=this.item.transactions.find((function(t){return t.id==i.form.update_transaction})))},"item.users":function(t,e){t&&(this.form.update_user_ids=this.item.users.map((function(t){return t.id})))},"item.apps":function(t,e){t&&(this.form.update_app_ids=this.item.apps.map((function(t){return t.id})))}}},d=i("KHd+"),u=Object(d.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item&&t.schema?i("div",{staticClass:"col-12"},[i("form",{staticClass:"modal-form"},[i("fieldset",[i("div",{staticClass:"nav-tabs-header mb-4"},[i("ul",{staticClass:"nav nav-tabs nav-tabs-custom"},[i("li",{staticClass:"nav-link",class:{active:"location"==t.tab}},[i("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tab="location"}}},[i("i",{staticClass:"fal fa-hotel"}),t._v(" Status")])]),t._v(" "),i("li",{staticClass:"nav-link",class:{active:"links"==t.tab}},[i("a",{attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tab="links"}}},[i("i",{staticClass:"fal fa-link"}),t._v(" Links")])])])]),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},["location"==t.tab?i("div",{},[i("form-simpleselect",{attrs:{schema:t.schema.form.status},model:{value:t.form.update_status,callback:function(e){t.$set(t.form,"update_status",e)},expression:"form.update_status"}}),t._v(" "),t.form.update_status!=t.item.status?i("form-textarea",{attrs:{schema:{name:"update_message",title:"Provide an (optional) Client Message"}},model:{value:t.form.update_message,callback:function(e){t.$set(t.form,"update_message",e)},expression:"form.update_message"}}):t._e(),t._v(" "),i("div",{staticClass:"d-sm-flex mt-2 mb-3 justify-content-center"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.autoSave("status")}}})],1)],1):t._e()]),t._v(" "),i("transition",{attrs:{name:"bo-slide"}},["links"==t.tab?i("div",{},[i("div",{staticClass:"col-12 mt-0 mb-3"},[i("h3",[t._v("User Access to this location:")]),t._v(" "),t._l(t.item.users_to_link,(function(e,a){return i("form-boolean",{key:a,attrs:{declared:t.inSet(e.id,t.form.update_user_ids),schema:{name:"link_user_"+e.id,title:e.email}},on:{input:function(i){t.toggleLink(e.id,i,"update_user_ids")}}})}))],2),t._v(" "),i("div",{staticClass:"d-sm-flex mt-2 mt-2 mb-3 justify-content-center"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.autoSave("links")}}})],1)]):t._e()])],1)])]):i("div",{staticClass:"no-content-block"},[i("loading",{attrs:{display:!t.item||!t.schema,type:"loadModal"}})],1)}),[],!1,null,null,null);e.a=u.exports},swh3:function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",(function(){return c}));var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,r(e).apply(this,arguments))}var i,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),i=e,(a=[{key:"resource",value:function(){return"admin/auth/addressbook"}},{key:"primaryKey",value:function(){return"id"}}])&&s(i.prototype,a),c&&s(i,c),e}(i("YA5Z").a)},wSZ4:function(t,e,i){"use strict";i.r(e);var a=i("swh3"),s=i("LvDl"),n=i.n(s),r={props:{id:{type:[Number,String],default:0},model:{type:String,default:"Addressbook"},module:{type:String,default:"auth"}},data:function(){return{item:null,itemState:"save"}},components:{},mounted:function(){var t=this;this.isLoading=!0,this.id?a.a.find(this.id).then((function(e){t.item=new a.a(e).withDefaults(t.schema),t.isLoading=!1})).catch((function(e){t.$announcer({status:400,data:{message:"We had a hiccup fetching the data - Please try again later."}})})):(this.item=(new a.a).withDefaults(this.schema),this.isLoading=!1)},methods:{autoSave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!1===e&&!this.id)return!1;this.$validator.validateAll().then((function(i){i?e?t._save(!0):n.a.debounce((function(){t._save()}),2e3)():1==e?t.$announcer({status:422,data:{message:"Whoops, Please check and correct inputs in order to continue."}}):t.$validator.reset()}))},_save:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.itemState="saving..",this.item.save().then((function(i){e&&(t.$announcer({status:200,data:{message:"Your "+t.model+" data has been Saved!"}}),i.schema&&t.$store.commit(t.module+"/setSchema",{data:i.schema,key:t.model.toLowerCase()+"Schema"}),t.$router.push({name:t.model.toLowerCase()})),t.itemState="saved"})).catch((function(e){t.$announcer(e.response),t.itemState="resave"}))}},computed:{schema:function(){return this.$store.state[this.module][this.model.toLowerCase()+"Schema"]}},watch:{item:{handler:function(t,e){this.itemState=e?"save changes":t.id?"save":"create"},deep:!0}}},o=i("KHd+"),c=Object(o.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item&&t.schema?i("div",{staticClass:"col-12"},[i("form",{on:{change:function(e){return t.autoSave()}}},[i("fieldset",[t.item.id?i("h3",{staticClass:"mb-4"},[t._v("Edit AddressBook Entry"),i("br"),i("span",{staticClass:"small"},[t._v("for "+t._s(t.item.name))])]):i("h3",[t._v("Add a new Address:")]),t._v(" "),i("div",{staticClass:"row"},t._l(t.schema.form,(function(e,a){var s;return i("div",{staticClass:"float-left",class:(s={},s[e.container?[e.container]:"col-12"]=!0,s)},[i("div",{staticClass:"form-group-list"},["boolean"==e.type?i("form-boolean",{attrs:{declared:t.item[a],schema:e},on:{input:function(e){t.item[a]=e}}}):t._e(),t._v(" "),"text"==e.type?i("form-text",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"number"==e.type?i("form-number",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"textarea"==e.type?i("form-textarea",{attrs:{schema:e,rows:e.rows||3},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"select"==e.type?i("form-select",{attrs:{schema:e,scopeData:t.item.country},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"multiselect"==e.type?i("form-multiselect",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"datetime"==e.type?i("form-datetime",{attrs:{schema:e},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e(),t._v(" "),"image"==e.type?i("form-file",{attrs:{schema:e,type:"image",resource:t.model.toLowerCase(),view:e.view||"profile"},on:{input:function(e){t.item[a]=e}},model:{value:t.item[a],callback:function(e){t.$set(t.item,a,e)},expression:"item[ele]"}}):t._e()],1)])})),0),t._v(" "),i("div",{staticClass:"col-12 clearfix mt-3"},[i("div",{staticClass:"drsection-content"},[i("auto-save",{attrs:{type:"save",state:t.itemState},on:{autoSave:function(e){return t.autoSave(!0)}}}),t._v(" "),i("a",{staticClass:"btn btn-sm btn-light",on:{click:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"default",void 0,e.key,void 0)?null:t.$router.go(-1)}}},[t._v("Return.")])],1)])])])]):i("div",[i("loading",{attrs:{display:!t.schema||!t.item,type:"loadPage"}})],1)}),[],!1,null,null,null);e.default=c.exports},yxfT:function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.d(e,"a",(function(){return c}));var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,r(e).apply(this,arguments))}var i,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),i=e,(a=[{key:"resource",value:function(){return"admin/auth/locations"}},{key:"primaryKey",value:function(){return"id"}}])&&s(i.prototype,a),c&&s(i,c),e}(i("YA5Z").a)}}]);